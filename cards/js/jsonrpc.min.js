(function(e,t){if('object'==typeof exports&&'object'==typeof module)module.exports=t(require('null'),require(''),require('WebSocket'),require('fetch'),require('forge'));else if('function'==typeof define&&define.amd)define(['null','','WebSocket','fetch','forge'],t);else{var n='object'==typeof exports?t(require('null'),require(''),require('WebSocket'),require('fetch'),require('forge')):t(e['null'],e[''],e.WebSocket,e.fetch,e.forge);for(var r in n)('object'==typeof exports?exports:e)[r]=n[r]}})(this,function(e,t,n,r,s){var o=Number.isInteger,a=Math.floor,l=Math.pow,u=String.fromCharCode,d=Math.min;return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=99)}([function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){h&&g&&(h=!1,g.length?p=g.concat(p):_=-1,p.length&&a())}function a(){if(!h){var e=r(o);h=!0;for(var t=p.length;t;){for(g=p,p=[];++_<t;)g&&g[_].run();_=-1,t=p.length}g=null,h=!1,s(e)}}function d(e,t){this.fun=e,this.array=t}function i(){}var l=e.exports={},c,u;(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(n){c=t}try{u='function'==typeof clearTimeout?clearTimeout:n}catch(t){u=n}})();var p=[],h=!1,_=-1,g;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new d(e,t)),1!==p.length||h||r(a)},d.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,n){'use strict';(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,s=0,o=d(n,r);s<o;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0}function s(e){return t.Buffer&&'function'==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!!(null!=e&&e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!s(e)&&!('function'!=typeof t.ArrayBuffer)&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(!!(e instanceof DataView)||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}function i(e){if(w.isFunction(e)){if(k)return e.name;var t=e.toString(),n=t.match(O);return n&&n[1]}}function l(e,t){return'string'==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(k||!w.isFunction(e))return w.inspect(e);var t=i(e),n=t?': '+t:'';return'[Function'+n+']'}function u(e){return l(c(e.actual),128)+' '+e.operator+' '+l(c(e.expected),128)}function p(e,t,n,r,s){throw new v.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:s})}function h(e,t){e||p(e,!0,t,'==',v.ok)}function _(e,t,n,i){if(e===t)return!0;if(s(e)&&s(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if((null===e||'object'!=typeof e)&&(null===t||'object'!=typeof t))return n?e==t:e==t;if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;i=i||{actual:[],expected:[]};var d=i.actual.indexOf(e);return!(-1===d||d!==i.expected.indexOf(t))||(i.actual.push(e),i.expected.push(t),f(e,t,n,i))}function g(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function f(e,t,n,r){if(null===e||e===void 0||null===t||t===void 0)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var s=g(e),o=g(t);if(s&&!o||!s&&o)return!1;if(s)return e=C.call(e),t=C.call(t),_(e,t,n);var a=T(e),d=T(t),l,c;if(a.length!==d.length)return!1;for(a.sort(),d.sort(),c=a.length-1;0<=c;c--)if(a[c]!==d[c])return!1;for(c=a.length-1;0<=c;c--)if(l=a[c],!_(e[l],t[l],n,r))return!1;return!0}function m(e,t,n){_(e,t,!0)&&p(e,t,n,'notDeepStrictEqual',m)}function b(e,t){if(!e||!t)return!1;if('[object RegExp]'==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(t){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(n){t=n}return t}function R(e,t,n,r){var s;if('function'!=typeof t)throw new TypeError('"block" argument must be a function');'string'==typeof n&&(r=n,n=null),s=y(t),r=(n&&n.name?' ('+n.name+').':'.')+(r?' '+r:'.'),e&&!s&&p(s,n,'Missing expected exception'+r);var o='string'==typeof r,a=!e&&w.isError(s),i=!e&&s&&!n;if((a&&o&&b(s,n)||i)&&p(s,n,'Got unwanted exception'+r),e&&s&&n&&!b(s,n)||!e&&s)throw s}function S(e,t){e||p(e,!0,t,'==',S)}var E=n(67),w=n(34),P=Object.prototype.hasOwnProperty,C=Array.prototype.slice,k=function(){return'foo'===function(){}.name}(),v=e.exports=h,O=/\s*function\s+([^\(\s]*)\s*/;v.AssertionError=function(e){this.name='AssertionError',this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var t=e.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,s=i(t),o=r.indexOf('\n'+s);if(0<=o){var a=r.indexOf('\n',o+1);r=r.substring(a+1)}this.stack=r}}},w.inherits(v.AssertionError,Error),v.fail=p,v.ok=h,v.equal=function(e,t,n){e!=t&&p(e,t,n,'==',v.equal)},v.notEqual=function(e,t,n){e==t&&p(e,t,n,'!=',v.notEqual)},v.deepEqual=function(e,t,n){_(e,t,!1)||p(e,t,n,'deepEqual',v.deepEqual)},v.deepStrictEqual=function(e,t,n){_(e,t,!0)||p(e,t,n,'deepStrictEqual',v.deepStrictEqual)},v.notDeepEqual=function(e,t,n){_(e,t,!1)&&p(e,t,n,'notDeepEqual',v.notDeepEqual)},v.notDeepStrictEqual=m,v.strictEqual=function(e,t,n){e!==t&&p(e,t,n,'===',v.strictEqual)},v.notStrictEqual=function(e,t,n){e===t&&p(e,t,n,'!==',v.notStrictEqual)},v.throws=function(e,t,n){R(!0,e,t,n)},v.doesNotThrow=function(e,t,n){R(!1,e,t,n)},v.ifError=function(e){if(e)throw e},v.strict=E(S,v,{equal:v.strictEqual,deepEqual:v.deepStrictEqual,notEqual:v.notStrictEqual,notDeepEqual:v.notDeepStrictEqual}),v.strict.strict=v.strict;var T=Object.keys||function(e){var t=[];for(var n in e)P.call(e,n)&&t.push(n);return t}}).call(t,n(7))},function(e,t,n){const r=n(1),s=n(63);e.exports=class extends s{constructor(e,t=0,n={}){super(e),this.strMessage=e,this.code=t===void 0||null===t?0:t,this.objData=n}get code(){return this.nCode}set code(e){r('number'==typeof e||parseInt(e)+''===e,'The JSONRPC.Exception error code must be of type number.'),this.nCode=parseInt(e)}get data(){return this.objData}set data(e){r('object'==typeof e&&null!==e,'The JSONRPC.Exception data property must be an Object.'),this.objData=e}static get NOT_AUTHENTICATED(){return-1}static get NOT_AUTHORIZED(){return-2}static get REQUEST_EXPIRED(){return-3}static get NETWORK_ERROR(){return-4}static get PARSE_ERROR(){return-32700}static get INVALID_REQUEST(){return-32600}static get METHOD_NOT_FOUND(){return-32601}static get INVALID_PARAMS(){return-32602}static get INTERNAL_ERROR(){return-32603}}},function(e,t,n){const r={};r.Exception=n(2),e.exports=class{constructor(){Object.seal(this)}static jsonDecodeSafe(e){if('string'!=typeof e)throw new r.Exception('JSON needs to be a string; Input: '+JSON.stringify(e),r.Exception.PARSE_ERROR);try{return JSON.parse(e)}catch(t){throw new r.Exception(t.message+'; RAW JSON string: '+e,r.Exception.PARSE_ERROR)}}}},function(e,t,n){const r=n(5);e.exports=class extends r{async waitReady(){}async beforeJSONEncode(){}async afterJSONEncode(){}async makeRequest(){}async beforeJSONDecode(){}async afterJSONDecode(){}async exceptionCatch(){}dispose(){this.emit('disposed')}}},function(e){'use strict';function t(e){console&&console.warn&&console.warn(e)}function n(){n.init.call(this)}function r(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function s(e,n,s,o){var a,i,d;if('function'!=typeof s)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s);if(i=e._events,void 0===i?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit('newListener',n,s.listener?s.listener:s),i=e._events),d=i[n]),void 0===d)d=i[n]=s,++e._eventsCount;else if('function'==typeof d?d=i[n]=o?[s,d]:[d,s]:o?d.unshift(s):d.push(s),a=r(e),0<a&&d.length>a&&!d.warned){d.warned=!0;var l=new Error('Possible EventEmitter memory leak detected. '+d.length+' '+(n+' listeners added. Use emitter.setMaxListeners() to increase limit'));l.name='MaxListenersExceededWarning',l.emitter=e,l.type=n,l.count=d.length,t(l)}return e}function o(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,h(this.listener,this.target,e))}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=o.bind(r);return s.listener=n,r.wrapFn=s,s}function i(e,t,n){var r=e._events;if(r===void 0)return[];var s=r[t];return void 0===s?[]:'function'==typeof s?n?[s.listener||s]:[s]:n?u(s):l(s,s.length)}function d(e){var t=this._events;if(t!==void 0){var n=t[e];if('function'==typeof n)return 1;if(void 0!==n)return n.length}return 0}function l(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function c(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function u(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var p='object'==typeof Reflect?Reflect:null,h=p&&'function'==typeof p.apply?p.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},_;_=p&&'function'==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!==e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var f=10;Object.defineProperty(n,'defaultMaxListeners',{enumerable:!0,get:function(){return f},set:function(e){if('number'!=typeof e||0>e||g(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+'.');f=e}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if('number'!=typeof e||0>e||g(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+'.');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r='error'===e,s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var a=new Error('Unhandled error.'+(o?' ('+o.message+')':''));throw a.context=o,a}var i=s[e];if(i===void 0)return!1;if('function'==typeof i)h(i,this,t);else for(var d=i.length,c=l(i,d),n=0;n<d;++n)h(c[n],this,t);return!0},n.prototype.addListener=function(e,t){return s(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return s(this,e,t,!0)},n.prototype.once=function(e,t){if('function'!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,a(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if('function'!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,a(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,r,s,o,a;if('function'!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit('removeListener',e,n.listener||t));else if('function'!=typeof n){for(s=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(0>s)return this;0===s?n.shift():c(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit('removeListener',e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s=Object.keys(n),o;for(r=0;r<s.length;++r)o=s[r],'removeListener'===o||this.removeAllListeners(o);return this.removeAllListeners('removeListener'),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],'function'==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return i(this,e,!0)},n.prototype.rawListeners=function(e){return i(this,e,!1)},n.listenerCount=function(e,t){return'function'==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return 0<this._eventsCount?_(this._events):[]}},function(e,t,n){'use strict';(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(r()<t)throw new RangeError('Invalid typed array length');return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!o.TYPED_ARRAY_SUPPORT&&!(this instanceof o))return new o(e,t,n);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return h(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):'string'==typeof t?_(e,t,n):m(e,t)}function c(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,r){return c(t),0>=t?s(e,t):void 0===n?s(e,t):'string'==typeof r?s(e,t).fill(n,r):s(e,t).fill(n)}function h(e,t){if(c(t),e=s(e,0>t?0:0|b(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function _(e,t,n){if(('string'!=typeof n||''===n)&&(n='utf8'),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=s(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function g(e,t){var n=0>t.length?0:0|b(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<n+(r||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=g(e,t),e}function m(e,t){if(o.isBuffer(t)){var n=0|b(t.length);return(e=s(e,n),0===e.length)?e:(t.copy(e,0,0,n),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||Q(t.length)?s(e,0):g(e,t);if('Buffer'===t.type&&te(t.data))return g(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function b(e){if(e>=r())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+r().toString(16)+' bytes');return 0|e}function y(e,t){if(o.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case'ascii':case'latin1':case'binary':return n;case'utf8':case'utf-8':case void 0:return J(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*n;case'hex':return n>>>1;case'base64':return V(e).length;default:if(r)return J(e).length;t=(''+t).toLowerCase(),r=!0;}}function R(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===n||n>this.length)&&(n=this.length),0>=n)return'';if(n>>>=0,t>>>=0,n<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return N(this,t,n);case'utf8':case'utf-8':return j(this,t,n);case'ascii':return I(this,t,n);case'latin1':case'binary':return L(this,t,n);case'base64':return x(this,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return D(this,t,n);default:if(r)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),r=!0;}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,s){if(0===e.length)return-1;if('string'==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=s?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(0>n)if(s)n=0;else return-1;if('string'==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,s);if('number'==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,s);throw new TypeError('val must be string, number or Buffer')}function w(e,t,n,r,s){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,d=e.length,l=t.length;if(void 0!==r&&(r=(r+'').toLowerCase(),'ucs2'===r||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(2>e.length||2>t.length)return-1;a=2,d/=2,l/=2,n/=2}var c;if(s){var i=-1;for(c=n;c<d;c++)if(o(e,c)!==o(t,-1==i?0:c-i))-1!=i&&(c-=c-i),i=-1;else if(-1==i&&(i=c),c-i+1===l)return i*a}else for(n+l>d&&(n=d-l),c=n;0<=c;c--){for(var u=!0,p=0;p<l;p++)if(o(e,c+p)!==o(t,p)){u=!1;break}if(u)return c}return-1}function P(e,t,n,r){n=+n||0;var s=e.length-n;r?(r=+r,r>s&&(r=s)):r=s;var o=t.length;if(0!=o%2)throw new TypeError('Invalid hex string');r>o/2&&(r=o/2);for(var a=0,i;a<r;++a){if(i=parseInt(t.substr(2*a,2),16),isNaN(i))return a;e[n+a]=i}return a}function C(e,t,n,r){return G(J(t,e.length-n),e,n,r)}function k(e,t,n,r){return G(K(t),e,n,r)}function v(e,t,n,r){return k(e,t,n,r)}function O(e,t,n,r){return G(V(t),e,n,r)}function T(e,t,n,r){return G(X(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function j(e,t,n){n=d(e.length,n);for(var r=[],s=t;s<n;){var o=e[s],a=null,i=239<o?4:223<o?3:191<o?2:1;if(s+i<=n){var l,c,u,p;1==i?128>o&&(a=o):2==i?(l=e[s+1],128==(192&l)&&(p=(31&o)<<6|63&l,127<p&&(a=p))):3==i?(l=e[s+1],c=e[s+2],128==(192&l)&&128==(192&c)&&(p=(15&o)<<12|(63&l)<<6|63&c,2047<p&&(55296>p||57343<p)&&(a=p))):4==i?(l=e[s+1],c=e[s+2],u=e[s+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(p=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,65535<p&&1114112>p&&(a=p))):void 0}null===a?(a=65533,i=1):65535<a&&(a-=65536,r.push(55296|1023&a>>>10),a=56320|1023&a),r.push(a),s+=i}return A(r)}function A(e){var t=e.length;if(t<=ne)return u.apply(String,e);for(var n='',r=0;r<t;)n+=u.apply(String,e.slice(r,r+=ne));return n}function I(e,t,n){var r='';n=d(e.length,n);for(var s=t;s<n;++s)r+=u(127&e[s]);return r}function L(e,t,n){var r='';n=d(e.length,n);for(var s=t;s<n;++s)r+=u(e[s]);return r}function N(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var s='',o=t;o<n;++o)s+=Y(e[o]);return s}function D(e,t,n){for(var r=e.slice(t,n),s='',o=0;o<r.length;o+=2)s+=u(r[o]+256*r[o+1]);return s}function B(e,t,n){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>n)throw new RangeError('Trying to access beyond buffer length')}function q(e,t,n,r,s,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError('Index out of range')}function M(e,t,n,r){0>t&&(t=65535+t+1);for(var s=0,o=d(e.length-n,2);s<o;++s)e[n+s]=(t&255<<8*(r?s:1-s))>>>8*(r?s:1-s)}function W(e,t,n,r){0>t&&(t=4294967295+t+1);for(var s=0,o=d(e.length-n,4);s<o;++s)e[n+s]=255&t>>>8*(r?s:3-s)}function U(e,t,n,r){if(n+r>e.length)throw new RangeError('Index out of range');if(0>n)throw new RangeError('Index out of range')}function F(e,t,n,r,s){return s||U(e,t,n,4,34028234663852886e22,-34028234663852886e22),ee.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,s){return s||U(e,t,n,8,17976931348623157e292,-17976931348623157e292),ee.write(e,t,n,r,52,8),n+8}function H(e){if(e=Z(e).replace(re,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function Z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function Y(e){return 16>e?'0'+e.toString(16):e.toString(16)}function J(e,t){t=t||Infinity;for(var n=e.length,r=null,s=[],o=0,a;o<n;++o){if(a=e.charCodeAt(o),55295<a&&57344>a){if(!r){if(56319<a){-1<(t-=3)&&s.push(239,191,189);continue}else if(o+1===n){-1<(t-=3)&&s.push(239,191,189);continue}r=a;continue}if(56320>a){-1<(t-=3)&&s.push(239,191,189),r=a;continue}a=(r-55296<<10|a-56320)+65536}else r&&-1<(t-=3)&&s.push(239,191,189);if(r=null,128>a){if(0>(t-=1))break;s.push(a)}else if(2048>a){if(0>(t-=2))break;s.push(192|a>>6,128|63&a)}else if(65536>a){if(0>(t-=3))break;s.push(224|a>>12,128|63&a>>6,128|63&a)}else if(1114112>a){if(0>(t-=4))break;s.push(240|a>>18,128|63&a>>12,128|63&a>>6,128|63&a)}else throw new Error('Invalid code point')}return s}function K(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function X(e,t){for(var n=[],r=0,s,o,a;r<e.length&&!(0>(t-=2));++r)s=e.charCodeAt(r),o=s>>8,a=s%256,n.push(a),n.push(o);return n}function V(e){return $.toByteArray(H(e))}function G(e,t,n,r){for(var s=0;s<r&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function Q(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var $=n(59),ee=n(64),te=n(62);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return i(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return p(null,e,t,n)},o.allocUnsafe=function(e){return h(null,e)},o.allocUnsafeSlow=function(e){return h(null,e)},o.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var n=e.length,r=t.length,s=0,a=d(n,r);s<a;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},o.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,s),s+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)S(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?j(this,0,e):R.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e='',n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,n).match(/.{2}/g).join(' '),this.length>n&&(e+=' ... ')),'<Buffer '+e+'>'},o.prototype.compare=function(e,t,n,r,s){if(!o.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),0>t||n>e.length||0>r||s>this.length)throw new RangeError('out of range index');if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var a=s-r,l=n-t,c=d(a,l),u=this.slice(r,s),p=e.slice(t,n),h=0;h<c;++h)if(u[h]!==p[h]){a=u[h],l=p[h];break}return a<l?-1:l<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r='utf8',n=this.length,t=0;else if(void 0===n&&'string'==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r='utf8')):(r=n,n=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var s=this.length-t;if((void 0===n||n>s)&&(n=s),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');r||(r='utf8');for(var o=!1;;)switch(r){case'hex':return P(this,e,t,n);case'utf8':case'utf-8':return C(this,e,t,n);case'ascii':return k(this,e,t,n);case'latin1':case'binary':return v(this,e,t,n);case'base64':return O(this,e,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return T(this,e,t,n);default:if(o)throw new TypeError('Unknown encoding: '+r);r=(''+r).toLowerCase(),o=!0;}},o.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var s=t-e;r=new o(s,void 0);for(var a=0;a<s;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e+--t],s=1;0<t&&(s*=256);)r+=this[e+--t]*s;return r},o.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return s*=128,r>=s&&(r-=l(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=t,s=1,o=this[e+--r];0<r&&(s*=256);)o+=this[e+--r]*s;return s*=128,o>=s&&(o-=l(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),ee.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),ee.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),ee.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),ee.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var s=l(2,8*n)-1;q(this,e,t,n,s,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=255&e/o;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var s=l(2,8*n)-1;q(this,e,t,n,s,0)}var o=n-1,a=1;for(this[t+o]=255&e;0<=--o&&(a*=256);)this[t+o]=255&e/a;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=a(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):W(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):W(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var s=l(2,8*n-1);q(this,e,t,n,s-1,-s)}var o=0,a=1,i=0;for(this[t]=255&e;++o<n&&(a*=256);)0>e&&0==i&&0!==this[t+o-1]&&(i=1),this[t+o]=255&(e/a>>0)-i;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var s=l(2,8*n-1);q(this,e,t,n,s-1,-s)}var o=n-1,a=1,i=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)0>e&&0==i&&0!==this[t+o+1]&&(i=1),this[t+o]=255&(e/a>>0)-i;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=a(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):W(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):W(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>n||n>=this.length)throw new RangeError('sourceStart out of bounds');if(0>r)throw new RangeError('sourceEnd out of bounds');r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var s=r-n,a;if(this===e&&n<t&&t<r)for(a=s-1;0<=a;--a)e[a+t]=this[a+n];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if('string'==typeof e){if('string'==typeof t?(r=t,t=0,n=this.length):'string'==typeof n&&(r=n,n=this.length),1===e.length){var s=e.charCodeAt(0);256>s&&(e=s)}if(void 0!==r&&'string'!=typeof r)throw new TypeError('encoding must be a string');if('string'==typeof r&&!o.isEncoding(r))throw new TypeError('Unknown encoding: '+r)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError('Out of range index');if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if('number'==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=o.isBuffer(e)?e:J(new o(e,r).toString()),d=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%d]}return this};var re=/[^+\/0-9A-Za-z-_]/g}).call(t,n(7))},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,n){const r=n(33),s=n(1),o=n(5);let a=null;try{a=n(35)}catch(e){}class i extends o{constructor(e,t,n,r){super(),s.strictEqual(typeof e,'string'),s.strictEqual(typeof t,'string'),s.strictEqual(typeof n,'object'),this._strName=e,this._strPath=i.normalizePath(t),this._objReflection=n,this._classReverseCallsClient=r}dispose(){this.emit('disposed')}_mixTraitIntoThis(e){for(const t of Object.getOwnPropertyNames(e.constructor.prototype))'function'==typeof e.constructor.prototype[t]&&'constructor'!==t&&(this.constructor.prototype[t]=e[t])}static async _buildAPIClientSourceCode(e,t,n=null){s(Array.isArray(e),'arrAPITraits needs to be an Array'),s('string'==typeof t,'strClassName was suposed to be of type string.'),s('string'==typeof n||null===n,'strTemplate was suposed to be of type string or null.');let r='';for(const s of e){const e=await new a.TypescriptParser().parseSource(s.constructor.toString());for(const t of e.declarations[0].methods)if(!t.name.startsWith('_')&&'constructor'!==t){const e=[];if(!t.parameters.length||'incomingRequest'!==t.parameters[0].name){console.error(`Warning. First parameter of ${s.constructor.name}.${t.name}() is not incomingRequest. That param is mandatory for API exported functions.`);continue}t.parameters.splice(0,1);for(const n of t.parameters)'{'===n.startCharacter?e.push('objDestructuringParam_'+n.name.replace(/[^A-Za-z0-9_]+/g,'__')+'={}'):e.push(n.name);r+=`
						async ${t.name}(${e.join(', ')})
						{
							return this.rpc("${t.name}", [...arguments]);
						}
					`.replace(/^\t{5}/gm,'')}}let o=(n||`
			const JSONRPC = require("jsonrpc-bidirectional");
			class ${t} extends JSONRPC.Client
			{
				_INSERT_METHODS_HERE_
			};
			module.exports = ${t};
		`).replace(/^\t{3}/gm,'').replace('_INSERT_METHODS_HERE_',r);return o}get path(){return this._strPath}get name(){return this._strName}get reflection(){return this._objReflection}get ReverseCallsClientClass(){return this._classReverseCallsClient}static normalizePath(e){const t=r.parse(e);let n=t.pathname?t.pathname.trim():'/';return n.length&&'/'===n.substr(-1)||(n+='/'),'/'!==n.substr(0,1)&&(n='/'+n),n}}e.exports=i},function(e){e.exports='function'==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){'use strict';function r(e){return this instanceof r?void(l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',s)):new r(e)}function s(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(19),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var d=n(16);d.inherits=n(9);var l=n(29),c=n(23);d.inherits(r,l);for(var u=i(c.prototype),p=0,h;p<u.length;p++)h=u[p],r.prototype[h]||(r.prototype[h]=c.prototype[h]);Object.defineProperty(r.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},function(e,t,n){(function(t){var r={};r.Cache=n(42),r.DebugLogger=n(43),r.PrettyBrowserConsoleErrors=n(45),r.SignatureAdd=n(47),r.WebSocketTransport=n(49),r.WorkerTransport=n(51),r.ProcessStdIOTransport=n(46),r.WebRTCTransport=n(48),r.ElectronIPCTransport=n(44),t&&10<=parseInt(t.version.replace('v','').split('.',2)[0])&&(r.WorkerThreadTransport=n(50)),e.exports=r}).call(t,n(0))},function(e,t,n){const r=n(5);e.exports=class extends r{async beforeJSONDecode(){}async afterJSONDecode(){}async callFunction(){}async result(){}async exceptionCatch(){}async response(){}async afterSerialize(){}dispose(){this.emit('disposed')}}},function(e,t,n){const r=n(1),s={};s.EndpointBase=n(8),s.Exception=n(2);const{URL:a}=n(33),i=n(22);e.exports=class{constructor(){this._bAuthenticated=!1,this._bAuthorized=!1,this._mxRequestBody=null,this._requestObject=null,this._endpoint=null,this._router=null,this._mxResult=null,this._objResponseToBeSerialized=null,this._mxResultSerialized=null,this._bMethodCalled=!1,this._nConnectionID=null,this._classClient=null,this._objHeaders={},this._strRemoteAddress='',this._strLocalAddress='',this._objHTTPIncomingMessage=null,this._objHTTPServerResponse=null,this._objSession={},this._bStackInErrorMessage=!1,this._nUnixTimeMilliseconds=0,Object.seal(this)}get isAuthenticated(){return this._bAuthenticated}get connectionID(){return this._nConnectionID}set connectionID(e){r('number'==typeof e&&parseInt(e,10)===e,'Connection ID must be an integer.'),this._nConnectionID=e}set isAuthenticated(e){r('boolean'==typeof e,'bAuthenticated must be of type boolean.'),this._bAuthenticated=e}get isAuthorized(){return this._bAuthorized}set isAuthorized(e){r('boolean'==typeof e,'bAuthorized must be of type boolean.'),this._bAuthorized=e}get requestBody(){return this._mxRequestBody}set requestBody(e){this._mxRequestBody=e}get requestHTTPGetQuery(){if('undefined'==typeof this.httpIncomingMessage||null===this.httpIncomingMessage)return null;let e=this.httpIncomingMessage.url;return e.includes('?')&&(e=e.split('?')[1]),i.parse(e)}get requestHTTPMethod(){return'undefined'==typeof this.httpIncomingMessage||null===this.httpIncomingMessage?null:this.httpIncomingMessage.method}get requestObject(){return this._requestObject}set requestObject(e){r('object'==typeof e||Array.isArray(e),'objRequest must be of type Array or Object.'),this._requestObject=e}get isNotification(){return null!==this._requestObject&&'object'==typeof this._requestObject&&!this.requestObject.hasOwnProperty('id')}get endpoint(){return this._endpoint}set endpoint(e){r(e instanceof s.EndpointBase,'endpoint must extend JSONRPC.EndpointBase'),this._endpoint=e}set router(e){this._router=e}get reverseCallsClient(){return null===this._classClient&&null!==this.connectionID&&this.endpoint&&this.endpoint.ReverseCallsClientClass&&(this._classClient=this._router.connectionIDToSingletonClient(this.connectionID,this.endpoint.ReverseCallsClientClass)),this._classClient}get isMethodCalled(){return this._bMethodCalled}set isMethodCalled(e){r('boolean'==typeof e,'bMethodCalled must be of type boolean.'),this._bMethodCalled=e}get callResult(){return this._mxResult}set callResult(e){this.isMethodCalled=!0,this._mxResult=e}get callResultToBeSerialized(){return this._objResponseToBeSerialized}set callResultToBeSerialized(e){this._objResponseToBeSerialized=e}get callResultSerialized(){return this._mxResultSerialized}get stackInErrorMessage(){return this._bStackInErrorMessage}set stackInErrorMessage(e){this._bStackInErrorMessage=e}set callResultSerialized(e){this._mxResultSerialized=e}get httpServerResponse(){return this._objHTTPServerResponse||null}set httpServerResponse(e){if('object'!=typeof e)throw new TypeError(`Invalid type ${typeof e} for httpServerResponse property in ${this.constructor.name}. Expected "object".`);this._objHTTPServerResponse=e}get httpIncomingMessage(){return this._objHTTPIncomingMessage||null}set httpIncomingMessage(e){if('object'!=typeof e)throw new TypeError(`Invalid type ${typeof e} for httpServerResponse property in ${this.constructor.name}. Expected "object".`);this._objHTTPIncomingMessage=e}get headers(){return this._objHeaders}set headers(e){this._objHeaders=e}get session(){return this._objSession}set session(e){if('object'!=typeof e)throw new TypeError(`Invalid set value of type "${typeof e}" for session. Expected "object"`);this._objSession=e}addHTTPResponseHeaders(e){if('undefined'==typeof this.httpServerResponse||null===this.httpServerResponse)throw new Error('Error when trying to add HTTP response headers. The httpServerResponse is not set on the IncomingRequest instance.');if('object'!=typeof e)throw new TypeError(`Invalid type "${typeof e}" for extraResponseHeaders set on incomingRequest. Expected "object".`);for(let t in e){if(t!==t.toLowerCase())throw new TypeError(`Invalid extra response header key ${t}. Keys must be lowercased.`);let n=e[t];if('string'!=typeof n)throw new TypeError(`Invalid extra response header value ${JSON.stringify(n)} for key ${t}. Only string values are allowed.`);if(n=i.unescape(n),n.includes('\n')||n.includes('\r'))throw new Error(`Invalid extra response header value ${JSON.stringify(n)}.`)}for(let t in e)this.httpServerResponse.setHeader(t,e[t])}get remoteAddress(){return this.httpIncomingMessage&&('undefined'==typeof this._strRemoteAddress||null===this._strRemoteAddress)&&(this._strRemoteAddress=this.httpIncomingMessage.socket.remoteAddress),this._strRemoteAddress}set remoteAddress(e){this._strRemoteAddress=e}get localAddress(){return this.httpIncomingMessage&&('undefined'==typeof this._strLocalAddress||null===this._strLocalAddress)&&(this._strLocalAddress=this.httpIncomingMessage.socket.localAddress),this._strLocalAddress}set localAddress(e){this._strLocalAddress=e}setRedirectURL(e,t=307){if(e.includes('\n\t\r'))throw new TypeError(`Invalid redirect URL ${JSON.stringify(e)}`);r(o(t)&&300<=t&&399>=t,`Invalid redirect HTTP status code. Expected a number between 300 and 399, but got ${JSON.stringify(t)}.`);const n=new a(e);this.addHTTPResponseHeaders({location:n.toString()}),this.httpServerResponse.statusCode=t}toResponseObject(){let e={id:null,jsonrpc:'2.0'};if(this.callResult instanceof Error){let t;this.callResult.data?(this.callResult instanceof s.Exception||'object'==typeof this.callResult.data)&&(t=this.callResult.data,!t.stack&&Object.isSealed(this.callResult.data)&&(t=JSON.parse(JSON.stringify(this.callResult.data)))):t={},t.stack||(t.stack=this.callResult.stack.split(/[\r\n]+/mg)),e.error={message:this.callResult.message+(this.stackInErrorMessage?' '+this.callResult.stack:''),code:this.callResult instanceof s.Exception?this.callResult.code:0,data:t}}else e.result=void 0===this.callResult?null:this.callResult,'function'==typeof e.result&&(delete e.result,e.error={message:'Disallowed attempt to return a function definition through JSONRPC as a return value for this request: '+this._mxRequestBody+'. The original function succeeded, however this error is returned.',code:s.Exception.INTERNAL_ERROR,data:{stack:new Error().stack.split(/[\r\n]+/mg)}});return null!==this._requestObject&&'object'==typeof this._requestObject&&this._requestObject.hasOwnProperty('id')&&(e.id=this._requestObject.id),e}startDurationTimer(){this._nUnixTimeMilliseconds=new Date().getTime()}get durationMilliseconds(){return this._nUnixTimeMilliseconds?new Date().getTime()-this._nUnixTimeMilliseconds:0}}},function(e,t,n){const r=n(1),s={Server:n(15)},o=n(5);e.exports=class extends o{constructor(e){super(),r(null===e||e instanceof s.Server,'jsonrpcServer must be either null or an instance or subclass of JSONRPC.Server.'),this._jsonrpcServer=e,this._nConnectionIDCounter=0,this._objSessions={}}dispose({bCallJSONRPCServerDispose:e=!0,bCallEndpointDispose:t=!0,bCallPluginDispose:n=!0}={}){e&&this._jsonrpcServer&&this._jsonrpcServer.dispose({bCallEndpointDispose:t,bCallPluginDispose:n}),this.emit('disposed',{bCallJSONRPCServerDispose:e,bCallEndpointDispose:t,bCallPluginDispose:n})}connectionIDToSingletonClient(e,t=null,n=null){if(r('number'==typeof e,'nConnectionID must be a number. Received this: '+JSON.stringify(e)),r(null===t||'function'==typeof t,'Invalid ClientClass value: '+typeof t),!n&&!t)throw new Error('At least one of client or ClientClass must be non-null.');if(!this._objSessions.hasOwnProperty(e))throw new Error('Connection '+JSON.stringify(e)+' not found in router.');return null===this._objSessions[e].clientReverseCalls?this._objSessions[e].clientReverseCalls=n||this._makeReverseCallsClient(t,this._objSessions[e]):r(null===t||this._objSessions[e].clientReverseCalls instanceof t,'clientReverseCalls already initialized with a different JSONRPC.Client subclass.'),this._objSessions[e].clientReverseCalls}onConnectionEnded(e){delete this._objSessions[e]}_makeReverseCallsClient(){throw new Error('Must implement.')}}},function(e,t,n){(function(t){const r={Exception:n(2),IncomingRequest:n(13),Utils:n(3),EndpointBase:n(8)},s=n(5),o=n(1);class a extends s{constructor(){super(),this._mapHTTPServerToPathToCallbackMap=new Map,this._arrPlugins=[],this._objEndpoints={},Object.seal(this)}dispose({bCallEndpointDispose:e=!0,bCallPluginDispose:t=!0}={}){for(const n of this._mapHTTPServerToPathToCallbackMap.keys())for(const e of this._mapHTTPServerToPathToCallbackMap.get(n).keys())this.detachFromHTTPServer(n,e);for(const n in this._mapHTTPServerToPathToCallbackMap.clear(),this._objEndpoints)e&&this._objEndpoints[n].dispose(),this.unregisterEndpoint(n);for(let n=this._arrPlugins.length-1;0<=n;n--)t&&this._arrPlugins[n].dispose(),this._arrPlugins.splice(n,1);this._arrPlugins.splice(0),this.emit('disposed',{bCallEndpointDispose:e,bCallPluginDispose:t})}async attachToHTTPServer(e,n,s){if(s=!!s,o('string'==typeof n,'strRootPath must be of type string, received '+typeof n),n=r.EndpointBase.normalizePath(n),this._mapHTTPServerToPathToCallbackMap.has(e)||this._mapHTTPServerToPathToCallbackMap.set(e,new Map),this._mapHTTPServerToPathToCallbackMap.get(e).get(n))return void console.error(new Error(`URL pathname ${n} already attached to this JSONRPC.Server for specified http.Server instance.`));const a=async(e,o)=>{const a=r.EndpointBase.normalizePath(e.url);if(a.substr(0,n.length)===n){if('OPTIONS'===e.method)return o.status=204,void o.end();if(e.headers['sec-websocket-version'])return s?void 0:(console.error('Received websocket upgrade request, yet not sharing the HTTP connection with a WebSocket.'),o.statusCode=403,void o.end());try{const n=await this.processHTTPRequest(e,o);await this.processRequest(n),n.callResult instanceof Error?('number'!=typeof o.statusCode||500>o.statusCode||599<o.statusCode)&&(o.statusCode=500):n.isNotification?o.statusCode=204:o.statusCode=o.statusCode||200,n.isNotification||('object'==typeof n.callResultSerialized?(o.setHeader('Content-Type','application/json'),o.write(JSON.stringify(n.callResultSerialized,void 0,'\t'))):(!o.getHeader('Content-Type')&&('string'==typeof n.callResultSerialized?o.setHeader('Content-Type','text/plain; charset=utf-8'):o.setHeader('Content-Type','application/octet-stream')),!o.getHeader('Content-Length')&&o.setHeader('Content-Length',t.byteLength(n.callResultSerialized)),o.write(n.callResultSerialized)))}catch(e){o.statusCode=500,console.error(e)}o.end()}};e.on('request',a),this._mapHTTPServerToPathToCallbackMap.get(e).set(n,a)}detachFromHTTPServer(e,t){this._mapHTTPServerToPathToCallbackMap.get(e)&&this._mapHTTPServerToPathToCallbackMap.get(e).get(t)&&(e.removeListener('request',this._mapHTTPServerToPathToCallbackMap.get(e).get(t)),this._mapHTTPServerToPathToCallbackMap.get(e).delete(t),![...this._mapHTTPServerToPathToCallbackMap.get(e).values()].length&&this._mapHTTPServerToPathToCallbackMap.delete(e))}registerEndpoint(e){if(!this._objEndpoints.hasOwnProperty(e.path))this._objEndpoints[e.path]=e;else if(this._objEndpoints[e.path]!==e)throw new Error('Another JSONRPC endpoint is registered at the same path: '+e.path);else;}unregisterEndpoint(e){if(this._objEndpoints.hasOwnProperty(e))return delete this._objEndpoints[e],!0}get endpoints(){return this._objEndpoints}addPlugin(e){this._arrPlugins.includes(e)||this._arrPlugins.push(e)}removePlugin(e){this._arrPlugins.includes(e)&&this._arrPlugins.splice(this._arrPlugins.findIndex((t)=>e===t),1)}async processHTTPRequest(e,n){const s=new r.IncomingRequest;try{if('POST'===e.method){const r=[];s.requestBody=await new Promise((s,o)=>{e.on('error',o),n.on('error',o),e.on('end',()=>{s(t.concat(r).toString())}),e.on('data',(e)=>{r.push(e)})})}else if('GET'!==e.method)throw new Error('JSONRPC does not handle HTTP '+e.method+' requests.');s.httpIncomingMessage=e,s.httpServerResponse=n,s.headers=e.headers,s.remoteAddress=e.socket.remoteAddress,s.localAddress=e.socket.localAddress;const o=r.EndpointBase.normalizePath(e.url);if(!this._objEndpoints.hasOwnProperty(o))throw new r.Exception('Unknown JSONRPC endpoint '+o+'.',r.Exception.METHOD_NOT_FOUND);s.endpoint=this._objEndpoints[o]}catch(e){s.callResult=e}return s}async processRequest(e){try{if(!e.isMethodCalled){this.emit('beforeJSONDecode',e);for(let t of this._arrPlugins)await t.beforeJSONDecode(e);e.requestObject||(e.requestObject=r.Utils.jsonDecodeSafe(e.requestBody)),this.emit('afterJSONDecode',e);for(let t of this._arrPlugins)await t.afterJSONDecode(e);if(!e.requestObject||'object'!=typeof e.requestObject)throw new r.Exception('Missing JSONRPC 2.0 request object, and no plugins have provided one in the beforeJSONDecode or afterJSONDecode methods.',r.Exception.PARSE_ERROR);if(Array.isArray(e.requestObject))throw new r.Exception('Batch requests are not supported by this JSON-RPC server.',r.Exception.INTERNAL_ERROR);if(!e.requestObject.hasOwnProperty('params'))e.requestObject.params=[];else if(!Array.isArray(e.requestObject.params))if('object'==typeof e.requestObject.params)throw new r.Exception('Named params are not supported by this server.',r.Exception.INTERNAL_ERROR);else throw new r.Exception('The params property has invalid data type, per JSON-RPC 2.0 specification. Unexpected type: '+typeof e.requestObject.params+'.',r.Exception.INVALID_REQUEST);if(!e.isAuthenticated)throw e.httpServerResponse&&(e.httpServerResponse.statusCode=403),new r.Exception('Not authenticated; calling method name: '+e.requestObject.method,r.Exception.NOT_AUTHENTICATED);if(!e.isAuthorized)throw e.httpServerResponse&&(e.httpServerResponse.statusCode=403),new r.Exception('Not authorized; calling method name: '+e.requestObject.method,r.Exception.NOT_AUTHORIZED);if(e.requestObject.method.startsWith('_'))throw new r.Exception('Method '+JSON.stringify(e.requestObject.method)+' not found on endpoint '+JSON.stringify(e.endpoint.path)+'.',r.Exception.METHOD_NOT_FOUND);e.isMethodCalled||this.emit('callFunction',e);for(let t of this._arrPlugins){if(e.isMethodCalled)break;await t.callFunction(e)}if(!e.isMethodCalled){if('function'!=typeof e.endpoint[e.requestObject.method])throw new r.Exception('Method '+JSON.stringify(e.requestObject.method)+' not found on endpoint '+JSON.stringify(e.endpoint.path)+'.',r.Exception.METHOD_NOT_FOUND);e.callResult=await e.endpoint[e.requestObject.method].apply(e.endpoint,[e].concat(e.requestObject.params))}}}catch(t){e.callResult=t}if(e.callResult instanceof Error){this.emit('exceptionCatch',e);for(let t of this._arrPlugins)await t.exceptionCatch(e)}else{this.emit('result',e);for(let t of this._arrPlugins)await t.result(e)}e.callResultToBeSerialized=e.toResponseObject(),this.emit('response',e);for(let t of this._arrPlugins)await t.response(e);null===e.callResultSerialized&&(e.callResultSerialized=JSON.stringify(e.callResultToBeSerialized,void 0,'\t')),this.emit('afterSerialize',e);for(let t of this._arrPlugins)await t.afterSerialize(e)}}e.exports=a}).call(t,n(6).Buffer)},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):'[object Array]'===n(e)},t.isBoolean=function(e){return'boolean'==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return'number'==typeof e},t.isString=function(e){return'string'==typeof e},t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return'[object RegExp]'===n(e)},t.isObject=function(e){return'object'==typeof e&&null!==e},t.isDate=function(e){return'[object Date]'===n(e)},t.isError=function(t){return'[object Error]'===n(t)||t instanceof Error},t.isFunction=function(e){return'function'==typeof e},t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=e.isBuffer}).call(t,n(6).Buffer)},function(e,t,n){const r=n(5);e.exports=class extends r{constructor(e){super(),this._webSocket=e}get url(){return this._webSocket.url}get socket(){return this._webSocket.socket}get readyState(){return this._webSocket.readyState}get protocol(){return this._webSocket.protocol}get protocolVersion(){return this._webSocket.protocolVersion}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}on(e,t){return this._webSocket.on(e,t)}superOn(e,t){return super.on(e,t)}send(e,...t){return this._webSocket.send(e,...t)}close(e,t){return this._webSocket.close(e,t)}terminate(){return this._webSocket.terminate()}ping(...e){return this._webSocket.ping(...e)}pong(...e){return this._webSocket.pong(...e)}}},function(e,t){'use strict';function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if('object'!=typeof r)throw new TypeError(r+'must be non-object');for(var s in r)n(r,s)&&(e[s]=r[s])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,r,s){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),s);for(var o=0;o<r;o++)e[s+o]=t[n+o]},flattenChunks:function(e){var t,n,r,s,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),s=0,(t=0,n=e.length);t<n;t++)o=e[t],a.set(o,s),s+=o.length;return a}},o={arraySet:function(e,t,n,r,s){for(var o=0;o<r;o++)e[s+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){'use strict';(function(t){e.exports=t.version&&0!==t.version.indexOf('v0.')&&(0!==t.version.indexOf('v1.')||0===t.version.indexOf('v1.8.'))?t:{nextTick:function(e,n,r,s){if('function'!=typeof e)throw new TypeError('"callback" argument must be a function');var o=arguments.length,a,d;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,s)});default:for(a=Array(o-1),d=0;d<a.length;)a[d++]=arguments[d];return t.nextTick(function(){e.apply(null,a)});}}}}).call(t,n(0))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}var o=n(6),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=s),r(a,s),s.from=function(e,t,n){if('number'==typeof e)throw new TypeError('Argument must not be a number');return a(e,t,n)},s.alloc=function(e,t,n){if('number'!=typeof e)throw new TypeError('Argument must be a number');var r=a(e);return void 0===t?r.fill(0):'string'==typeof n?r.fill(t,n):r.fill(t),r},s.allocUnsafe=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return a(e)},s.allocUnsafeSlow=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return o.SlowBuffer(e)}},function(e,t,n){(function(t){const r={};r.Exception=n(2),r.Plugins={},r.Plugins.Client=n(11),r.Utils=n(3),r.OutgoingRequest=n(41);const s=n(5),o=n(94),a=n(1);class i extends s{constructor(e,t={},n=null){super(),this._arrPlugins=[],this._strJSONRPCEndpointURL=e,this._nCallID=1,this._strHTTPUser=null,this._strHTTPPassword=null,this._strBase64BasicAuthentication=null,this._objFetchOptions=t,n&&this.on('exceptionCatch',(e)=>{const t=e.callResult,r=n.constructor.name+': '+t.message+' (Code: '+t.code+')';console.error(r),e.callResult=new n(r,parseInt(t.code)),e.callResult.stack=t.stack,e.callResult.objData=t.objData})}dispose({bCallPluginDispose:e=!0}={}){for(let t=this._arrPlugins.length-1;0<=t;t--)e&&this._arrPlugins[t].dispose(),this._arrPlugins.splice(t,1);this._arrPlugins.splice(0),this.emit('disposed',{bCallPluginDispose:e})}setHTTPCredentials(e,n){this._strHTTPUser=e,this._strHTTPPassword=n,this._strBase64BasicAuthentication=new t(e+':'+n).toString('base64')}async rpc(e,t=[],n=!1,s=[],{bSkipWaitReadyOnConnect:d=!1,nTimeoutSeconds:l=null}={}){const c=new Promise(async(c,u)=>{let p;0<l&&(p=setTimeout(()=>{u(new Error(`JSONRPC call timeout after ${l} seconds`))},1e3*l));try{a('boolean'==typeof n,'bNotification must be of type boolean.'),a(Array.isArray(t),'arrParams must be an Array.'),a(Array.isArray(s),'arrTransferList must be an Array.');const u=[];for(let e of this._arrPlugins)u.push(e.waitReady({bSkipWaitReadyOnConnect:d}));await Promise.all(u);const p=new r.OutgoingRequest(e,t,n?void 0:this._nCallID,s,{bSkipWaitReadyOnConnect:d,nTimeoutSeconds:l});this._nCallID++;try{p.endpointURL=this.endpointURL,p.headers['Content-Type']='application/json',null!==this.httpUser&&null!==this.httpPassword&&(p.headers.Authorization='Basic '+this._strBase64BasicAuthentication),p.requestObject=p.toRequestObject(),this.emit('beforeJSONEncode',p);for(let e of this._arrPlugins)await e.beforeJSONEncode(p);null===p.requestBody&&(p.requestBody=JSON.stringify(p.requestObject,null,'\t')),this.emit('afterJSONEncode',p);for(let e of this._arrPlugins)await e.afterJSONEncode(p);p.isMethodCalled||this.emit('makeRequest',p);for(let e of this._arrPlugins){if(p.isMethodCalled)break;await e.makeRequest(p)}let e=null,t=!1;if(!p.isMethodCalled){let n=void 0===o.Headers||0===Object.values(p.headers).length?void 0:new(o.Headers?o.Headers:Headers)(p.headers);const s=Object.assign({},{method:'POST',mode:'cors',headers:n,body:p.requestBody,cache:'no-cache',credentials:'include'},this._objFetchOptions),a=new(o.Request?o.Request:Request)(p.endpointURL,s);e=await o(a,s),t=!e.ok,e.ok||0!==parseInt(e.status,10)?p.responseBody=await e.text():(p.responseObject={jsonrpc:i.JSONRPC_VERSION,error:{code:r.Exception.NETWORK_ERROR,message:'Network error. The internet connection may have failed.'},id:p.callID},p.responseBody=JSON.stringify(p.responseObject,void 0,'\t'))}n&&(p.responseObject={jsonrpc:i.JSONRPC_VERSION,result:null},p.responseBody=JSON.stringify(p.responseObject,void 0,'\t')),this.emit('beforeJSONDecode',p);for(let e of this._arrPlugins)await e.beforeJSONDecode(p);(null===p.responseObject||p.responseObject===void 0)&&(p.responseObject=r.Utils.jsonDecodeSafe(p.responseBody)),this.emit('afterJSONDecode',p);for(let e of this._arrPlugins)await e.afterJSONDecode(p);p.responseObject.hasOwnProperty('error')?p.responseObject.error.hasOwnProperty('message')&&'string'==typeof p.responseObject.error.message&&p.responseObject.error.hasOwnProperty('code')&&'number'==typeof p.responseObject.error.code?p.callResult=new r.Exception(p.responseObject.error.message,p.responseObject.error.code,p.responseObject.error.data?p.responseObject.error.data:{}):p.callResult=new r.Exception('Invalid error object on JSONRPC protocol response. Response: '+JSON.stringify(p.responseObject),r.Exception.INTERNAL_ERROR):p.responseObject.hasOwnProperty('result')?p.callResult=p.responseObject.result:t=!0,t&&!(p.callResult instanceof Error)&&(p.callResult=new r.Exception('Invalid error object on JSONRPC protocol response. Response object: '+JSON.stringify(p.responseObject)+'. HTTP response class instance: '+JSON.stringify(e)+'.',r.Exception.INTERNAL_ERROR))}catch(e){p.callResult=e}if(p.callResult instanceof Error){this.emit('exceptionCatch',p);for(let e of this._arrPlugins)await e.exceptionCatch(p);throw p.callResult}c(p.callResult)}catch(e){u(e)}finally{p!==void 0&&clearTimeout(p)}});return c}async rpcX({method:e,params:t=[],isNotification:n=!1,transferList:r=[],skipWaitReadyOnConnect:s=!1,timeoutSeconds:o=20}={}){return await this.rpc(e,t,n,r,{bSkipWaitReadyOnConnect:s,nTimeoutSeconds:o})}addPlugin(e){this._arrPlugins.includes(e)||this._arrPlugins.push(e)}removePlugin(e){this._arrPlugins.includes(e)&&this._arrPlugins.splice(this._arrPlugins.findIndex((t)=>e===t),1)}get endpointURL(){return this._strJSONRPCEndpointURL}get plugins(){return this._arrPlugins}get callID(){return this._nCallID}get httpUser(){return this._strHTTPUser}get httpPassword(){return this._strHTTPPassword}static get JSONRPC_VERSION(){return'2.0'}rpcFunctions(){return this.rpc('rpc.functions',[].slice.call(arguments))}rpcReflectionFunction(e){return this.rpc('rpc.reflectionFunction',[e])}rpcReflectionFunctions(e){return this.rpc('rpc.reflectionFunctions',[e])}rpcAllowedCrossSiteXHRSubdomains(){return this.rpc('rpc.allowedCrossSiteXHRSubdomains',[])}enableLogging(){this._consoleLoggerPlugin||(this._consoleLoggerPlugin=new r.Plugins.Client.DebugLogger),this.addPlugin(this._consoleLoggerPlugin)}disableLogging(){this._consoleLoggerPlugin&&this.removePlugin(this._consoleLoggerPlugin)}}e.exports=i}).call(t,n(6).Buffer)},function(e,t,n){'use strict';t.decode=t.parse=n(76),t.encode=t.stringify=n(77)},function(e,t,n){'use strict';(function(t,r,s){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function i(e){return N.from(e)}function d(e){return N.isBuffer(e)||e instanceof D}function l(){}function c(e,t){j=j||n(10),e=e||{};var r=t instanceof j;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var s=e.highWaterMark,i=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(i||0===i)?i:d,this.highWaterMark=a(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(e){return j=j||n(10),q.call(u,this)||this instanceof j?void(this._writableState=new c(e,this),this.writable=!0,e&&('function'==typeof e.write&&(this._write=e.write),'function'==typeof e.writev&&(this._writev=e.writev),'function'==typeof e.destroy&&(this._destroy=e.destroy),'function'==typeof e.final&&(this._final=e.final)),L.call(this)):new u(e)}function p(e,t){var n=new Error('write after end');e.emit('error',n),T.nextTick(t,n)}function h(e,t,n,r){var s=!0,o=!1;return null===n?o=new TypeError('May not write null values to stream'):'string'!=typeof n&&void 0!==n&&!t.objectMode&&(o=new TypeError('Invalid non-string/buffer chunk')),o&&(e.emit('error',o),T.nextTick(r,o),s=!1),s}function _(e,t,n){return e.objectMode||!1===e.decodeStrings||'string'!=typeof t||(t=N.from(t,n)),t}function g(e,t,n,r,s,o){if(!n){var a=_(t,r,s);r!==a&&(n=!0,s='buffer',r=a)}var i=t.objectMode?1:r.length;t.length+=i;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,i,r,s,o);return d}function f(e,t,n,r,s,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(s,t.onwrite):e._write(s,o,t.onwrite),t.sync=!1}function m(e,t,n,r,s){--t.pendingcb,n?(T.nextTick(s,r),T.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit('error',r)):(s(r),e._writableState.errorEmitted=!0,e.emit('error',r),k(e,t))}function b(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,s=n.writecb;if(b(n),t)m(e,n,r,t,s);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?x(R,e,n,o,s):R(e,n,o,s)}}function R(e,t,n,r){n||S(e,t),t.pendingcb--,r(),k(e,t)}function S(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit('drain'))}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=Array(r),a=t.corkedRequestsFree;a.entry=n;for(var i=0,d=!0;n;)s[i]=n,n.isBuf||(d=!1),n=n.next,i+=1;s.allBuffers=d,f(e,t,!0,t.length,s,'',a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,p=t.objectMode?1:l.length;if(f(e,t,!1,p,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final(function(n){t.pendingcb--,n&&e.emit('error',n),t.prefinished=!0,e.emit('prefinish'),k(e,t)})}function C(e,t){t.prefinished||t.finalCalled||('function'==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T.nextTick(P,e,t)):(t.prefinished=!0,e.emit('prefinish')))}function k(e,t){var n=w(t);return n&&(C(e,t),0===t.pendingcb&&(t.finished=!0,e.emit('finish'))),n}function v(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?T.nextTick(n):e.once('finish',n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=n(19);e.exports=u;var x=!t.browser&&-1<['v0.10','v0.9.'].indexOf(t.version.slice(0,5))?r:T.nextTick,j;u.WritableState=c;var A=n(16);A.inherits=n(9);var I={deprecate:n(90)},L=n(32),N=n(20).Buffer,D=s.Uint8Array||function(){},B=n(31);A.inherits(u,L),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,'buffer',{get:I.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer instead.','DEP0003')})}catch(e){}}();var q;'function'==typeof Symbol&&Symbol.hasInstance&&'function'==typeof Function.prototype[Symbol.hasInstance]?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!q.call(this,e)||!(this!==u)&&e&&e._writableState instanceof c}})):q=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},u.prototype.write=function(e,t,n){var r=this._writableState,s=!1,o=!r.objectMode&&d(e);return o&&!N.isBuffer(e)&&(e=i(e)),'function'==typeof t&&(n=t,t=null),o?t='buffer':!t&&(t=r.defaultEncoding),'function'!=typeof n&&(n=l),r.ended?p(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,s=g(this,r,o,e,t,n)),s},u.prototype.cork=function(){var e=this._writableState;e.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&E(this,e))},u.prototype.setDefaultEncoding=function(e){if('string'==typeof e&&(e=e.toLowerCase()),!(-1<['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((e+'').toLowerCase())))throw new TypeError('Unknown encoding: '+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new Error('_write() is not implemented'))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;'function'==typeof e?(n=e,e=null,t=null):'function'==typeof t&&(n=t,t=null),null!==e&&e!==void 0&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||v(this,r,n)},Object.defineProperty(u.prototype,'destroyed',{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=B.destroy,u.prototype._undestroy=B.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(0),n(88).setImmediate,n(7))},function(e,t,n){t=e.exports=n(29),t.Stream=t,t.Readable=t,t.Writable=n(23),t.Duplex=n(10),t.Transform=n(30),t.PassThrough=n(83)},function(t){t.exports=e},function(e,t,n){'use strict';function r(e){if(!e)return'utf8';for(var t;;)switch(e){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return e;default:if(t)return;e=(''+e).toLowerCase(),t=!0;}}function s(e){var t=r(e);if('string'!=typeof t&&(f.isEncoding===m||!m(e)))throw new Error('Unknown encoding: '+e);return t||e}function o(e){this.encoding=s(e);var t;switch(this.encoding){case'utf16le':this.text=c,this.end=u,t=4;break;case'utf8':this.fillLast=l,t=4;break;case'base64':this.text=p,this.end=h,t=3;break;default:return this.write=_,void(this.end=g);}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function a(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function d(e,t,n){var r=t.length-1;if(r<n)return 0;var s=a(t[r]);return 0<=s?(0<s&&(e.lastNeed=s-1),s):--r<n||-2===s?0:(s=a(t[r]),0<=s)?(0<s&&(e.lastNeed=s-2),s):--r<n||-2===s?0:(s=a(t[r]),0<=s?(0<s&&(2===s?s=0:e.lastNeed=s-3),s):0)}function i(e,t){if(128!=(192&t[0]))return e.lastNeed=0,'\uFFFD';if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,'\uFFFD';if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,'\uFFFD'}}function l(e){var t=this.lastTotal-this.lastNeed,n=i(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function c(e,t){if(0==(e.length-t)%2){var n=e.toString('utf16le',t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString('utf16le',t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):'';if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString('utf16le',0,n)}return t}function p(e,t){var r=(e.length-t)%3;return 0==r?e.toString('base64',t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString('base64',t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+this.lastChar.toString('base64',0,3-this.lastNeed):t}function _(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):''}var f=n(20).Buffer,m=f.isEncoding||function(e){switch(e=''+e,e&&e.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return'';var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return'';n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||''},o.prototype.end=function(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+'\uFFFD':t},o.prototype.text=function(e,t){var n=d(this,e,t);if(!this.lastNeed)return e.toString('utf8',t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString('utf8',t,r)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},function(e){'use strict';e.exports=function(e,t,r,s){for(var o=0|65535&e,a=0|65535&e>>>16,i=0;0!==r;){i=2e3<r?2e3:r,r-=i;do o=0|o+t[s++],a=0|a+o;while(--i);o%=65521,a%=65521}return 0|(o|a<<16)}},function(e){'use strict';var t=function(){for(var e=[],t=0,n;256>t;t++){n=t;for(var r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}();e.exports=function(e,n,r,s){e^=-1;for(var o=s;o<s+r;o++)e=e>>>8^t[255&(e^n[o])];return-1^e}},function(e,t,n){'use strict';(function(t,r){function s(e){return M.from(e)}function o(e){return M.isBuffer(e)||e instanceof W}function i(e,t,n){return'function'==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?L(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function d(e,t){N=N||n(10),e=e||{};var r=t instanceof N;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(o||0===o)?o:i,this.highWaterMark=a(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!Y&&(Y=n(26).StringDecoder),this.decoder=new Y(e.encoding),this.encoding=e.encoding)}function l(e){return N=N||n(10),this instanceof l?void(this._readableState=new d(e,this),this.readable=!0,e&&('function'==typeof e.read&&(this._read=e.read),'function'==typeof e.destroy&&(this._destroy=e.destroy)),q.call(this)):new l(e)}function c(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,f(e,a);else{var i;o||(i=p(a,t)),i?e.emit('error',i):a.objectMode||t&&0<t.length?('string'!=typeof t&&!a.objectMode&&Object.getPrototypeOf(t)!==M.prototype&&(t=s(t)),r?a.endEmitted?e.emit('error',new Error('stream.unshift() after end event')):u(e,a,t,!0):a.ended?e.emit('error',new Error('stream.push() after EOF')):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?u(e,a,t,!1):y(e,a)):u(e,a,t,!1))):!r&&(a.reading=!1)}return h(a)}function u(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit('data',n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),y(e,t)}function p(e,t){var n;return o(t)||'string'==typeof t||void 0===t||e.objectMode||(n=new TypeError('Invalid non-string/buffer chunk')),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function _(e){return e>=K?e=K:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function g(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=_(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function f(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z('emitReadable',t.flowing),t.emittedReadable=!0,t.sync?I.nextTick(b,e):b(e))}function b(e){z('emit readable'),e.emit('readable'),C(e)}function y(e,t){t.readingMore||(t.readingMore=!0,I.nextTick(R,e,t))}function R(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z('maybeReadMore read 0'),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){return function(){var t=e._readableState;z('pipeOnDrain',t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&B(e,'data')&&(t.flowing=!0,C(e))}}function E(e){z('readable nexttick read 0'),e.read(0)}function w(e,t){t.resumeScheduled||(t.resumeScheduled=!0,I.nextTick(P,e,t))}function P(e,t){t.reading||(z('resume read 0'),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit('resume'),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(z('flow',t.flowing);t.flowing&&null!==e.read(););}function k(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(''):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=v(e,t.buffer,t.decoder),r}function v(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=n?O(e,t):T(e,t),r}function O(e,t){var n=t.head,r=1,s=n.data;for(e-=s.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(s+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,s}function T(e,t){var n=M.allocUnsafe(e),r=t.head,s=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++s,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(a));break}++s}return t.length-=s,n}function x(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,I.nextTick(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit('end'))}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var I=n(19);e.exports=l;var L=n(81),N;l.ReadableState=d;var D=n(5).EventEmitter,B=function(e,t){return e.listeners(t).length},q=n(32),M=n(20).Buffer,W=t.Uint8Array||function(){},U=n(16);U.inherits=n(9);var F=n(96),z=void 0;z=F&&F.debuglog?F.debuglog('stream'):function(){};var H=n(84),Z=n(31),Y;U.inherits(l,q);var J=['error','close','destroy','pause','resume'];Object.defineProperty(l.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=Z.destroy,l.prototype._undestroy=Z.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:'string'==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=M.from(e,t),t=''),r=!0),c(this,e,t,!1,r)},l.prototype.unshift=function(e){return c(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return Y||(Y=n(26).StringDecoder),this._readableState.decoder=new Y(e),this._readableState.encoding=e,this};var K=8388608;l.prototype.read=function(e){z('read',e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z('read: emitReadable',t.length,t.ended),0===t.length&&t.ended?x(this):m(this),null;if(e=g(e,t),0===e&&t.ended)return 0===t.length&&x(this),null;var r=t.needReadable;z('need readable',r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,z('length less than watermark',r)),t.ended||t.reading?(r=!1,z('reading or ended',r)):r&&(z('do read'),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=g(n,t)));var s;return s=0<e?k(e,t):null,null===s?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&x(this)),null!==s&&this.emit('data',s),s},l.prototype._read=function(){this.emit('error',new Error('_read() is not implemented'))},l.prototype.pipe=function(e,t){function n(e,t){z('onunpipe'),e===p&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function s(){z('onend'),e.end()}function o(){z('cleanup'),e.removeListener('close',l),e.removeListener('finish',c),e.removeListener('drain',f),e.removeListener('error',d),e.removeListener('unpipe',n),p.removeListener('end',s),p.removeListener('end',u),p.removeListener('data',a),m=!0,h.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}function a(t){z('ondata'),b=!1;var n=e.write(t);!1!==n||b||((1===h.pipesCount&&h.pipes===e||1<h.pipesCount&&-1!==A(h.pipes,e))&&!m&&(z('false write response, pause',p._readableState.awaitDrain),p._readableState.awaitDrain++,b=!0),p.pause())}function d(t){z('onerror',t),u(),e.removeListener('error',d),0===B(e,'error')&&e.emit('error',t)}function l(){e.removeListener('finish',c),u()}function c(){z('onfinish'),e.removeListener('close',l),u()}function u(){z('unpipe'),p.unpipe(e)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e);}h.pipesCount+=1,z('pipe count=%d opts=%j',h.pipesCount,t);var _=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=_?s:u;h.endEmitted?I.nextTick(g):p.once('end',g),e.on('unpipe',n);var f=S(p);e.on('drain',f);var m=!1,b=!1;return p.on('data',a),i(e,'error',d),e.once('close',l),e.once('finish',c),e.emit('pipe',p),h.flowing||(z('pipe resume'),p.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit('unpipe',this,n),this);if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<s;o++)r[o].emit('unpipe',this,n);return this}var a=A(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit('unpipe',this,n),this)},l.prototype.on=function(e,t){var n=q.prototype.on.call(this,e,t);if('data'===e)!1!==this._readableState.flowing&&this.resume();else if('readable'===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):I.nextTick(E,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(z('resume'),e.flowing=!0,w(this,e)),this},l.prototype.pause=function(){return z('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(z('pause'),this._readableState.flowing=!1,this.emit('pause')),this},l.prototype.wrap=function(e){var t=this,r=this._readableState,s=!1;for(var o in e.on('end',function(){if(z('wrapped end'),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on('data',function(n){if((z('wrapped data'),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var o=t.push(n);o||(s=!0,e.pause())}}),e)void 0===this[o]&&'function'==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<J.length;a++)e.on(J[a],this.emit.bind(this,J[a]));return this._read=function(t){z('wrapped _read',t),s&&(s=!1,e.resume())},this},Object.defineProperty(l.prototype,'readableHighWaterMark',{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=k}).call(t,n(7),n(0))},function(e,t,n){'use strict';function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit('error',new Error('write callback called multiple times'));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function s(e){return this instanceof s?void(i.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&('function'==typeof e.transform&&(this._transform=e.transform),'function'==typeof e.flush&&(this._flush=e.flush)),this.on('prefinish',o)):new s(e)}function o(){var e=this;'function'==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit('error',t);if(null!=n&&e.push(n),e._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(e._transformState.transforming)throw new Error('Calling transform done when still transforming');return e.push(null)}e.exports=s;var i=n(10),d=n(16);d.inherits=n(9),d.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(){throw new Error('_transform() is not implemented')},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},s.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit('close')})}},function(e,t,n){'use strict';function r(e,t){e.emit('error',t)}var s=n(19);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&s.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(s.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){e.exports=n(5).EventEmitter},function(e,t,n){'use strict';function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function s(e,t,n){if(e&&a.isObject(e)&&e instanceof r)return e;var s=new r;return s.parse(e,t,n),s}var o=n(66),a=n(89);t.parse=s,t.resolve=function(e,t){return s(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?s(e,!1,!0).resolveObject(t):t},t.format=function(e){return a.isString(e)&&(e=s(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var d=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),u=['\''].concat(c),p=['%','/','?',';','#'].concat(u),h=['/','?','#'],_=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(22);r.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError('Parameter \'url\' must be a string, not '+typeof e);var r=e.indexOf('?'),c=-1!==r&&r<e.indexOf('#')?'?':'#',R=e.split(c),S=/\\/g;R[0]=R[0].replace(S,'/'),e=R.join(c);var E=e;if(E=E.trim(),!n&&1===e.split('#').length){var w=l.exec(E);if(w)return this.path=E,this.href=E,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search='',this.query={}),this}var P=d.exec(E);if(P){P=P[0];var C=P.toLowerCase();this.protocol=C,E=E.substr(P.length)}if(n||P||E.match(/^\/\/[^@\/]+@[^@\/]+/)){var v='//'===E.substr(0,2);v&&!(P&&m[P])&&(E=E.substr(2),this.slashes=!0)}if(!m[P]&&(v||P&&!b[P])){for(var O=-1,T=0,i;T<h.length;T++)i=E.indexOf(h[T]),-1!==i&&(-1===O||i<O)&&(O=i);var x,A;A=-1===O?E.lastIndexOf('@'):E.lastIndexOf('@',O),-1!==A&&(x=E.slice(0,A),E=E.slice(A+1),this.auth=decodeURIComponent(x)),O=-1;for(var T=0,i;T<p.length;T++)i=E.indexOf(p[T]),-1!==i&&(-1===O||i<O)&&(O=i);-1===O&&(O=E.length),this.host=E.slice(0,O),E=E.slice(O),this.parseHost(),this.hostname=this.hostname||'';var I='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!I)for(var L=this.hostname.split(/\./),T=0,N=L.length,D;T<N;T++)if(D=L[T],D&&!D.match(_)){for(var B='',q=0,j=D.length;q<j;q++)B+=127<D.charCodeAt(q)?'x':D[q];if(!B.match(_)){var k=L.slice(0,T),M=L.slice(T+1),W=D.match(g);W&&(k.push(W[1]),M.unshift(W[2])),M.length&&(E='/'+M.join('.')+E),this.hostname=k.join('.');break}}this.hostname=this.hostname.length>255?'':this.hostname.toLowerCase(),I||(this.hostname=o.toASCII(this.hostname));var U=this.port?':'+this.port:'',F=this.hostname||'';this.host=F+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==E[0]&&(E='/'+E))}if(!f[C])for(var T=0,N=u.length,z;T<N;T++)if(z=u[T],-1!==E.indexOf(z)){var H=encodeURIComponent(z);H===z&&(H=escape(z)),E=E.split(z).join(H)}var Z=E.indexOf('#');-1!==Z&&(this.hash=E.substr(Z),E=E.slice(0,Z));var Y=E.indexOf('?');if(-1===Y?t&&(this.search='',this.query={}):(this.search=E.substr(Y),this.query=E.substr(Y+1),t&&(this.query=y.parse(this.query)),E=E.slice(0,Y)),E&&(this.pathname=E),b[C]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var U=this.pathname||'',J=this.search||'';this.path=U+J}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||'';e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,':'),e+='@');var t=this.protocol||'',n=this.pathname||'',r=this.hash||'',s=!1,o='';this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(s+=':'+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var i=this.search||o&&'?'+o||'';return t&&':'!==t.substr(-1)&&(t+=':'),this.slashes||(!t||b[t])&&!1!=s?(s='//'+(s||''),n&&'/'!==n.charAt(0)&&(n='/'+n)):!s&&(s=''),r&&'#'!==r.charAt(0)&&(r='#'+r),i&&'?'!==i.charAt(0)&&(i='?'+i),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace('#','%23'),t+s+n+i+r},r.prototype.resolve=function(e){return this.resolveObject(s(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(a.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),d=0,l;d<o.length;d++)l=o[d],n[l]=this[l];if(n.hash=e.hash,''===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0,h;u<c.length;u++)h=c[u],'protocol'!==h&&(n[h]=e[h]);return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname='/'),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!b[e.protocol]){for(var _=Object.keys(e),g=0,f;g<_.length;g++)f=_[g],n[f]=e[f];return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!m[e.protocol]){for(var y=(e.pathname||'').split('/');y.length&&!(e.host=y.shift()););e.host||(e.host=''),e.hostname||(e.hostname=''),''!==y[0]&&y.unshift(''),2>y.length&&y.unshift(''),n.pathname=y.join('/')}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||'',n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var R=n.pathname||'',p=n.search||'';n.path=R+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&'/'===n.pathname.charAt(0),S=e.host||e.pathname&&'/'===e.pathname.charAt(0),E=S||s||n.host&&e.pathname,w=E,P=n.pathname&&n.pathname.split('/')||[],y=e.pathname&&e.pathname.split('/')||[],C=n.protocol&&!b[n.protocol];if(C&&(n.hostname='',n.port=null,n.host&&(''===P[0]?P[0]=n.host:P.unshift(n.host)),n.host='',e.protocol&&(e.hostname=null,e.port=null,e.host&&(''===y[0]?y[0]=e.host:y.unshift(e.host)),e.host=null),E=E&&(''===y[0]||''===P[0])),S)n.host=e.host||''===e.host?e.host:n.host,n.hostname=e.hostname||''===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,P=y;else if(y.length)P||(P=[]),P.pop(),P=P.concat(y),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(C){n.hostname=n.host=P.shift();var k=!!(n.host&&0<n.host.indexOf('@'))&&n.host.split('@');k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:'')+(n.search?n.search:'')),n.href=n.format(),n}if(!P.length)return n.pathname=null,n.path=n.search?'/'+n.search:null,n.href=n.format(),n;for(var v=P.slice(-1)[0],O=(n.host||e.host||1<P.length)&&('.'===v||'..'===v)||''===v,T=0,x=P.length;0<=x;x--)v=P[x],'.'===v?P.splice(x,1):'..'===v?(P.splice(x,1),T++):T&&(P.splice(x,1),T--);if(!E&&!w)for(;T--;T)P.unshift('..');E&&''!==P[0]&&(!P[0]||'/'!==P[0].charAt(0))&&P.unshift(''),O&&'/'!==P.join('/').substr(-1)&&P.push('');var i=''===P[0]||P[0]&&'/'===P[0].charAt(0);if(C){n.hostname=n.host=i?'':P.length?P.shift():'';var k=!!(n.host&&0<n.host.indexOf('@'))&&n.host.split('@');k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return E=E||n.host&&P.length,E&&!i&&P.unshift(''),P.length?n.pathname=P.join('/'):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:'')+(n.search?n.search:'')),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(t=t[0],':'!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e){function r(e,n){var r={seen:[],stylize:o};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),_(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),i(r,e,r.depth)}function s(e,t){var n=r.styles[t];return n?'\x1B['+r.colors[n][0]+'m'+e+'\x1B['+r.colors[n][1]+'m':e}function o(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function i(e,r,s){if(e.customInspect&&r&&w(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var o=r.inspect(s,e);return m(o)||(o=i(e,o,s)),o}var _=d(e,r);if(_)return _;var g=Object.keys(r),f=a(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(r)),E(r)&&(0<=g.indexOf('message')||0<=g.indexOf('description')))return l(r);if(0===g.length){if(w(r)){var b=r.name?': '+r.name:'';return e.stylize('[Function'+b+']','special')}if(y(r))return e.stylize(RegExp.prototype.toString.call(r),'regexp');if(S(r))return e.stylize(Date.prototype.toString.call(r),'date');if(E(r))return l(r)}var R='',P=!1,C=['{','}'];if(h(r)&&(P=!0,C=['[',']']),w(r)){var k=r.name?': '+r.name:'';R=' [Function'+k+']'}if(y(r)&&(R=' '+RegExp.prototype.toString.call(r)),S(r)&&(R=' '+Date.prototype.toUTCString.call(r)),E(r)&&(R=' '+l(r)),0===g.length&&(!P||0==r.length))return C[0]+R+C[1];if(0>s)return y(r)?e.stylize(RegExp.prototype.toString.call(r),'regexp'):e.stylize('[Object]','special');e.seen.push(r);var n;return n=P?c(e,r,s,f,g):g.map(function(t){return u(e,r,s,f,t,P)}),e.seen.pop(),p(n,R,C)}function d(e,t){if(b(t))return e.stylize('undefined','undefined');if(m(t)){var n='\''+JSON.stringify(t).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return e.stylize(n,'string')}return f(t)?e.stylize(''+t,'number'):_(t)?e.stylize(''+t,'boolean'):g(t)?e.stylize('null','null'):void 0}function l(e){return'['+Error.prototype.toString.call(e)+']'}function c(e,t,n,r,s){for(var o=[],a=0,i=t.length;a<i;++a)v(t,a+'')?o.push(u(e,t,n,r,a+'',!0)):o.push('');return s.forEach(function(s){s.match(/^\d+$/)||o.push(u(e,t,n,r,s,!0))}),o}function u(e,t,n,r,s,o){var a,d,l;if(l=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},l.get?l.set?d=e.stylize('[Getter/Setter]','special'):d=e.stylize('[Getter]','special'):l.set&&(d=e.stylize('[Setter]','special')),v(r,s)||(a='['+s+']'),d||(0>e.seen.indexOf(l.value)?(d=g(n)?i(e,l.value,null):i(e,l.value,n-1),-1<d.indexOf('\n')&&(o?d=d.split('\n').map(function(e){return'  '+e}).join('\n').substr(2):d='\n'+d.split('\n').map(function(e){return'   '+e}).join('\n'))):d=e.stylize('[Circular]','special')),b(a)){if(o&&s.match(/^\d+$/))return d;a=JSON.stringify(''+s),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,'name')):(a=a.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),a=e.stylize(a,'string'))}return a+': '+d}function p(e,t,n){var r=0,s=e.reduce(function(e,t){return r++,0<=t.indexOf('\n')&&r++,e+t.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<s?n[0]+(''===t?'':t+'\n ')+' '+e.join(',\n  ')+' '+n[1]:n[0]+t+' '+e.join(', ')+' '+n[1]}function h(e){return Array.isArray(e)}function _(e){return'boolean'==typeof e}function g(e){return null===e}function f(e){return'number'==typeof e}function m(e){return'string'==typeof e}function b(e){return void 0===e}function y(e){return R(e)&&'[object RegExp]'===P(e)}function R(e){return'object'==typeof e&&null!==e}function S(e){return R(e)&&'[object Date]'===P(e)}function E(t){return R(t)&&('[object Error]'===P(t)||t instanceof Error)}function w(e){return'function'==typeof e}function P(e){return Object.prototype.toString.call(e)}function C(e){return 10>e?'0'+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(':');return[e.getDate(),I[e.getMonth()],t].join(' ')}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){if(!e){var n=new Error('Promise was rejected with a falsy value');n.reason=e,e=n}return t(e)}var T=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},j=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(' ')}for(var n=1,s=arguments,o=s.length,a=(e+'').replace(j,function(e){if('%%'===e)return'%';if(n>=o)return e;switch(e){case'%s':return s[n++]+'';case'%d':return+s[n++];case'%j':try{return JSON.stringify(s[n++])}catch(e){return'[Circular]'}default:return e;}}),i=s[n];n<o;i=s[++n])a+=g(i)||!R(i)?' '+i:' '+r(i);return a},t.deprecate=function(n,r){function s(){if(!o){if(e.throwDeprecation)throw new Error(r);else e.traceDeprecation?console.trace(r):console.error(r);o=!0}return n.apply(this,arguments)}if('undefined'!=typeof e&&!0===e.noDeprecation)return n;if('undefined'==typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return s};var x={},A;t.debuglog=function(r){if(b(A)&&(A=n.i({NODE_ENV:production}).NODE_DEBUG||''),r=r.toUpperCase(),!x[r])if(new RegExp('\\b'+r+'\\b','i').test(A)){var s=e.pid;x[r]=function(){var e=t.format.apply(t,arguments);console.error('%s %d: %s',r,s,e)}}else x[r]=function(){};return x[r]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},t.isArray=h,t.isBoolean=_,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=f,t.isString=m,t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=b,t.isRegExp=y,t.isObject=R,t.isDate=S,t.isError=E,t.isFunction=w,t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=n(91);var I=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];t.log=function(){console.log('%s - %s',k(),t.format.apply(t,arguments))},t.inherits=n(9),t._extend=function(e,t){if(!t||!R(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var L='undefined'==typeof Symbol?void 0:Symbol('util.promisify.custom');t.promisify=function(e){function t(){for(var n=new Promise(function(e,t){o=e,a=t}),r=[],s=0,o,a;s<arguments.length;s++)r.push(arguments[s]);r.push(function(e,t){e?a(e):o(t)});try{e.apply(this,r)}catch(e){a(e)}return n}if('function'!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(L&&e[L]){var t=e[L];if('function'!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),L&&Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,T(e))},t.promisify.custom=L,t.callbackify=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var s=n.pop();if('function'!=typeof s)throw new TypeError('The last argument must be of type Function');var o=this,a=function(){return s.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(O,t,a)})}if('function'!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,T(t)),n}}).call(t,n(0))},function(e){e.exports=t},function(e,t,n){var r={Client:n(21),ClientPluginBase:n(4),Server:n(15),ServerPluginBase:n(12),EndpointBase:n(8),BidirectionalWebsocketRouter:n(39),BidirectionalWorkerRouter:n(40),BidirectionalWebRTCRouter:n(38),BidirectionalElectronIPC:n(37),RouterBase:n(14),Exception:n(2),Utils:n(3),Plugins:{Client:n(11),Server:n(57)},WebSocketAdapters:{WebSocketWrapperBase:n(17),uws:{WebSocketWrapper:n(58)}}};e.exports={JSONRPC:r}},function(e,t,n){(function(t){const r=n(1);let s=null;t&&t.versions.electron&&(s=n(25),!s&&(window||self)&&'function'==typeof(window||self).require&&(s=(window||self).require('electron')));const o={};o.Exception=n(2),o.Client=n(21),o.IncomingRequest=n(13),o.EndpointBase=n(8),o.RouterBase=n(14),o.Plugins={},o.Plugins.Client=n(11),o.Utils=n(3),e.exports=class extends o.RouterBase{constructor(e){super(e),e.on('response',(e)=>{e.callResultSerialized=e.callResultToBeSerialized}),this._objWaitForBrowserWindowReadyPromises={}}async addBrowserWindow(e,t=null,n=6e4){null!==t&&(t=o.EndpointBase.normalizePath(t));const r=++this._nConnectionIDCounter;this._objWaitForBrowserWindowReadyPromises[r]={fnResolve:null,fnReject:null};let a=new Promise((e,t)=>{this._objWaitForBrowserWindowReadyPromises[r].fnResolve=e,this._objWaitForBrowserWindowReadyPromises[r].fnReject=t});const i='jsonrpc_winid_'+e.id,d={browserWindow:e,nConnectionID:r,clientReverseCalls:null,clientElectronIPCTransportPlugin:null,strEndpointPath:t,strChannel:i};this._objSessions[r]=d,s.ipcMain.on(i,async(e,t)=>'rpc.connectToEndpoint'===t.method?this._onRPCConnectToEndpoint(t,r,i):void(await this._routeMessage(t,d,i))),e.on('closed',()=>{this.onConnectionEnded(r)});const l=setTimeout(()=>{this._objWaitForBrowserWindowReadyPromises[r].fnReject(new Error('Timed out waiting for BrowserWindow to be ready for JSONRPC.'))},n);return await a,clearTimeout(l),r}async addMainProcess(e){e=o.EndpointBase.normalizePath(e);const t=++this._nConnectionIDCounter,n='jsonrpc_winid_'+(window||self).require('electron').remote.getCurrentWindow().id,r={browserWindow:null,nConnectionID:t,clientReverseCalls:null,clientElectronIPCTransportPlugin:null,strEndpointPath:e,strChannel:n};this._objSessions[t]=r,(window||self).require('electron').ipcRenderer.on(n,async(e,t)=>{await this._routeMessage(t,r,n)});const s=this._makeReverseCallsClient(o.Client,r);return await s.rpc('rpc.connectToEndpoint',[e]),t}_onRPCConnectToEndpoint(e,t,n){const s=e.params[0];if(r('number'==typeof t,'nConnectionID must be of type number.'),!this._objSessions.hasOwnProperty(t))return void console.error(new Error(`[rpc.connectToEndpoint] BrowserWindow with connection ID ${t} doesn't exist. Maybe it was closed.`));try{r('string'==typeof s,'strEndpointPath must be of type string.'),this._objSessions[t].strEndpointPath=o.EndpointBase.normalizePath(s),this._objWaitForBrowserWindowReadyPromises[t].fnResolve(this._objSessions[t].strEndpointPath);const a=this._objSessions[t].browserWindow,i={id:e.id,result:null,jsonrpc:'2.0'};a.webContents.send(n,i)}catch(r){const s=this._objSessions[t].browserWindow,o={id:e.id,error:{message:r.message+'\n'+r.stack,code:0},jsonrpc:'2.0'};s.webContents.send(n,o),this._objWaitForBrowserWindowReadyPromises[t].fnReject(r)}}_makeReverseCallsClient(e,t){const n=new e(t.strEndpointPath);return t.clientElectronIPCTransportPlugin=new o.Plugins.Client.ElectronIPCTransport(!0,t.browserWindow,t.strChannel),n.addPlugin(t.clientElectronIPCTransportPlugin),this.emit('madeReverseCallsClient',n),n}async _routeMessage(e,n,r){const s=n.browserWindow,a=n.nConnectionID;if('object'!=typeof e)return void console.error('['+t.pid+'] BidirectionalElectronIPC: Received '+typeof e+' instead of object. Ignoring. RAW message: '+JSON.stringify(e));let i=!e.hasOwnProperty('id');try{if(e.hasOwnProperty('method')){if(!this._jsonrpcServer)throw new Error('JSONRPC.Server not initialized.');const t=new o.IncomingRequest;t.connectionID=a,t.router=this,t.stackInErrorMessage=!0;try{const n=this._objSessions[a].strEndpointPath;if(!this._jsonrpcServer.endpoints.hasOwnProperty(n))throw new o.Exception('Unknown JSONRPC endpoint '+n+'.',o.Exception.METHOD_NOT_FOUND);t.endpoint=this._jsonrpcServer.endpoints[n],t.requestBody=e,t.requestObject=e}catch(e){t.callResult=e}await this._jsonrpcServer.processRequest(t),i||(s?s.webContents.send(r,t.callResultToBeSerialized):(window||self).require('electron').ipcRenderer.send(r,t.callResultToBeSerialized))}else if(e.hasOwnProperty('result')||e.hasOwnProperty('error')){if(this._objSessions.hasOwnProperty(a)&&null===this._objSessions[a].clientElectronIPCTransportPlugin)throw new Error('How can the client be not initialized, and yet getting responses from phantom requests?');this._objSessions.hasOwnProperty(a)?await this._objSessions[a].clientElectronIPCTransportPlugin.processResponse(e):console.error('Connection ID '+a+' is closed and session is missing. Ignoring response: '+JSON.stringify(e))}else throw i=!1,new Error('Unable to qualify the message as a JSONRPC request or response.')}catch(n){console.error(n),console.error('Uncaught error. RAW remote message: '+JSON.stringify(e)),console.error('['+t.pid+'] Unclean state.'),this.onConnectionEnded(a)}}onConnectionEnded(e){super.onConnectionEnded(e),delete this._objWaitForBrowserWindowReadyPromises[e]}}}).call(t,n(0))},function(e,t,n){(function(t){const r={Exception:n(2),Server:n(15),IncomingRequest:n(13),EndpointBase:n(8),RouterBase:n(14),Plugins:{Client:n(11)},Utils:n(3)};e.exports=class extends r.RouterBase{addRTCDataChannelSync(e){if('closed'===e.readyState)return void console.log('['+t.pid+'] addRTCDataChannelSync ignoring closed dataChannel.');const n=++this._nConnectionIDCounter,s=r.EndpointBase.normalizePath(e.label),o={dataChannel:e,nConnectionID:n,clientReverseCalls:null,clientWebRTCTransportPlugin:null,strEndpointPath:s};this._objSessions[n]=o;const a=async(e)=>{await this._routeMessage(e.data,o)},i=(t)=>{console.error(t),this.onConnectionEnded(n),'open'===e.readyState&&e.close()},d=()=>{this.onConnectionEnded(n),e.removeEventListener('message',a),e.removeEventListener('close',d),e.removeEventListener('error',i)};return e.addEventListener('message',a),e.addEventListener('close',d),e.addEventListener('error',i),n}_makeReverseCallsClient(e,t){const n=new e(t.strEndpointPath);return t.clientWebRTCTransportPlugin=new r.Plugins.Client.WebRTCTransport(t.dataChannel,!0),n.addPlugin(t.clientWebRTCTransportPlugin),this.emit('madeReverseCallsClient',n),n}async _routeMessage(e,n){const s=n.dataChannel,o=n.nConnectionID;if(!e.trim().length)return void console.log('['+t.pid+'] WebRTCBidirectionalRouter: Received empty message. Ignoring.');let a;try{a=r.Utils.jsonDecodeSafe(e)}catch(n){return console.error(n),console.error('Unable to parse JSON. RAW remote message: '+e),this._jsonrpcServer&&this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebRTCTransportPlugin&&'open'===s.readyState&&s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'Invalid JSON: '+JSON.stringify(e)+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),console.log('['+t.pid+'] Unclean state. Unable to match RTCDataChannel message to an existing Promise or qualify it as a request or response.'),void('open'===s.readyState&&s.close())}let i=!a.hasOwnProperty('id');try{if(a.hasOwnProperty('method')){if(!this._jsonrpcServer)throw i||'open'!==s.readyState||s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'JSONRPC.Server not initialized on this RTCDataChannel. Raw request: '+e+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),new Error('JSONRPC.Server not initialized on this RTCDataChannel.');const t=new r.IncomingRequest;t.connectionID=o,t.router=this;try{const n=this._objSessions[o].strEndpointPath;if(!this._jsonrpcServer.endpoints.hasOwnProperty(n))throw new r.Exception('Unknown JSONRPC endpoint '+n+'.',r.Exception.METHOD_NOT_FOUND);t.endpoint=this._jsonrpcServer.endpoints[n],t.requestBody=e,t.requestObject=a}catch(e){t.callResult=e}await this._jsonrpcServer.processRequest(t),'open'!==s.readyState&&console.error('dataChannel.readyState: '+JSON.stringify(s.readyState)+'. Request was '+e+'. Attempted responding with '+JSON.stringify(t.callResultToBeSerialized,void 0,'\t')+'.'),i||s.send(t.callResultSerialized)}else if(a.hasOwnProperty('result')||a.hasOwnProperty('error')){if(this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebRTCTransportPlugin)throw this._jsonrpcServer||i||'open'!==s.readyState||s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'JSONRPC.Client not initialized on this RTCConnection. Raw message: '+e+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),'open'===s.readyState&&s.close(),new Error('How can the client be not initialized, and yet getting responses from phantom requests?');this._objSessions.hasOwnProperty(o)?await this._objSessions[o].clientWebRTCTransportPlugin.processResponse(e,a):console.error('Connection ID '+o+' is closed and session is missing. Ignoring response: '+e)}else throw i=!1,new Error('Unable to qualify the message as a JSONRPC request or response.')}catch(n){return console.error(n),console.error('Uncaught error. RAW remote message: '+e),this._jsonrpcServer&&this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebRTCTransportPlugin&&!i&&'open'===s.readyState&&s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'Internal error: '+n.message+'.',code:r.Exception.INTERNAL_ERROR}},void 0,'\t')),void('open'===s.readyState&&(console.log('['+t.pid+'] Unclean state. Closing data channel.'),s.close()))}}}}).call(t,n(0))},function(e,t,n){(function(t){const r={Exception:n(2),Server:n(15),IncomingRequest:n(13),EndpointBase:n(8),RouterBase:n(14),Plugins:{Client:n(11)},Utils:n(3),WebSocketAdapters:{WebSocketWrapperBase:n(17)}};e.exports=class extends r.RouterBase{addWebSocketSync(e,n){if(e.readyState===r.WebSocketAdapters.WebSocketWrapperBase.CLOSED)return void console.log('['+t.pid+'] addWebSocketSync ignoring closed webSocket.');const s=++this._nConnectionIDCounter,o=r.EndpointBase.normalizePath(e.url?e.url:e.upgradeReq?e.upgradeReq.url:n.url),a={webSocket:e,upgradeRequest:e.upgradeReq?e.upgradeReq:n,nConnectionID:s,clientReverseCalls:null,clientWebSocketTransportPlugin:null,strEndpointPath:o};this._objSessions[s]=a;const i=(t)=>{this.onConnectionEnded(s),e.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&e.close(1e3,t.message)};if(e.on&&e.removeListener&&t&&t.release){const t=(e)=>{this._routeMessage(e,a)},n=()=>{this.onConnectionEnded(s),e.removeListener('message',t),e.removeListener('close',n),e.removeListener('error',i)};e.on('message',t),e.on('close',n),e.on('error',i)}else if(e.addEventListener){const t=(e)=>{this._routeMessage(e.data,a)},n=()=>{this.onConnectionEnded(s),e.removeEventListener('message',t),e.removeEventListener('close',n),e.removeEventListener('error',i)};e.addEventListener('message',t),e.addEventListener('close',n),e.addEventListener('error',i)}else throw new Error('Failed to detect runtime or websocket interface not support (browser, nodejs, websockets/ws npm package compatible interface, etc.');return s}_makeReverseCallsClient(e,t){const n=new e(t.strEndpointPath);return t.clientWebSocketTransportPlugin=new r.Plugins.Client.WebSocketTransport(t.webSocket,!0),n.addPlugin(t.clientWebSocketTransportPlugin),this.emit('madeReverseCallsClient',n),n}async _routeMessage(e,n){const s=n.webSocket,o=n.nConnectionID;if(!e.trim().length)return void console.log('['+t.pid+'] WebSocketBidirectionalRouter: Received empty message. Ignoring.');let a;try{a=r.Utils.jsonDecodeSafe(e)}catch(n){return console.error(n),console.error('Unable to parse JSON. RAW remote message: '+e),this._jsonrpcServer&&this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebSocketTransportPlugin&&s.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'Invalid JSON: '+JSON.stringify(e)+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),console.log('['+t.pid+'] Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request or response.'),void(s.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&s.close(1e3,'Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request or response.'))}let i=!a.hasOwnProperty('id');try{if(a.hasOwnProperty('method')){if(!this._jsonrpcServer)throw i||s.readyState!==r.WebSocketAdapters.WebSocketWrapperBase.OPEN||s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'JSONRPC.Server not initialized on this WebSocket. Raw request: '+e+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),new Error('JSONRPC.Server not initialized on this WebSocket');const t=new r.IncomingRequest;t.connectionID=o,t.router=this,n.upgradeRequest&&(t.headers=n.upgradeRequest.headers,t.remoteAddress=n.upgradeRequest.socket.remoteAddress,t.localAddress=n.upgradeRequest.socket.localAddress);try{const n=this._objSessions[o].strEndpointPath;if(!this._jsonrpcServer.endpoints.hasOwnProperty(n))throw new r.Exception('Unknown JSONRPC endpoint '+n+'.',r.Exception.METHOD_NOT_FOUND);t.endpoint=this._jsonrpcServer.endpoints[n],t.requestBody=e,t.requestObject=a}catch(e){t.callResult=e}if(await this._jsonrpcServer.processRequest(t),s.readyState!==r.WebSocketAdapters.WebSocketWrapperBase.OPEN){let n=JSON.stringify(t.callResultToBeSerialized);200<n.length&&(n=n.substr(0,100)+` <... truncated ${n.length-200} characters ...> `+n.substr(-100)),console.error('webSocket.readyState: '+JSON.stringify(s.readyState)+'. Request was '+e+'. Attempted responding with '+n+'.')}i||s.send(t.callResultSerialized)}else if(a.hasOwnProperty('result')||a.hasOwnProperty('error')){if(this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebSocketTransportPlugin)throw this._jsonrpcServer||i||s.readyState!==r.WebSocketAdapters.WebSocketWrapperBase.OPEN||s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'JSONRPC.Client not initialized on this WebSocket. Raw message: '+e+'.',code:r.Exception.PARSE_ERROR}},void 0,'\t')),s.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&s.close(1e3,'How can the client be not initialized, and yet getting responses from phantom requests? Closing websocket.'),new Error('How can the client be not initialized, and yet getting responses from phantom requests?');this._objSessions.hasOwnProperty(o)?await this._objSessions[o].clientWebSocketTransportPlugin.processResponse(e,a):console.error('Connection ID '+o+' is closed and session is missing. Ignoring response: '+e)}else throw i=!1,new Error('Unable to qualify the message as a JSONRPC request or response.')}catch(n){return console.error(n),console.error('Uncaught error. RAW remote message: '+e),this._jsonrpcServer&&this._objSessions.hasOwnProperty(o)&&null===this._objSessions[o].clientWebSocketTransportPlugin&&!i&&s.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&s.send(JSON.stringify({id:null,jsonrpc:'2.0',error:{message:'Internal error: '+n.message+'.',code:r.Exception.INTERNAL_ERROR}},void 0,'\t')),void(s.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&(console.log('['+t.pid+'] Unclean state. Closing websocket.'),s.close(1e3,'Unclean state. Closing websocket.')))}}}}).call(t,n(0))},function(e,t,n){(function(t){const r=n(1);let s=n(35);s||(s={isMaster:!(self&&self.document===void 0),isWorker:!!(self&&self.document===void 0)});const o={};o.Exception=n(2),o.Server=n(15),o.IncomingRequest=n(13),o.EndpointBase=n(8),o.RouterBase=n(14),o.Plugins={},o.Plugins.Client=n(11),o.Utils=n(3),e.exports=class extends o.RouterBase{constructor(e){super(e),e.on('response',(e)=>{e.callResultSerialized=e.callResultToBeSerialized}),this._objWaitForWorkerReadyPromises={}}async addWorker(e,n,a=6e4){if(!n){if(s.isWorker)throw new Error('The strEndpointPath param is mandatory inside workers.');n=null}else n=o.EndpointBase.normalizePath(n);r(s.isMaster||t===e||self===e,'Unknown worker type.');const i=++this._nConnectionIDCounter;let d;s.isMaster&&(this._objWaitForWorkerReadyPromises[i]={fnResolve:null,fnReject:null},d=new Promise((e,t)=>{this._objWaitForWorkerReadyPromises[i].fnResolve=e,this._objWaitForWorkerReadyPromises[i].fnReject=t}));const l={worker:e,workerID:e.id,nConnectionID:i,clientReverseCalls:null,clientWorkerTransportPlugin:null,strEndpointPath:n};this._objSessions[i]=l;const c=()=>{this.onConnectionEnded(i),e.terminate?e.terminate():e!==t&&!e.isDead()&&e.kill()};if(e.addEventListener){const t=async(e)=>s.isMaster&&'object'==typeof e.data&&e.data.jsonrpc&&'rpc.connectToEndpoint'===e.data.method?this._onRPCConnectToEndpoint(e.data,i):void(await this._routeMessage(e.data,l));e.addEventListener('message',t),e.addEventListener('error',c)}else{const t=async(e)=>s.isMaster&&'object'==typeof e&&e.jsonrpc&&'rpc.connectToEndpoint'===e.method?this._onRPCConnectToEndpoint(e,i):void(await this._routeMessage(e,l)),n=(r)=>{console.log(`Worker ID ${e.id} exited with code ${r}.`),this.onConnectionEnded(i),e.removeListener('message',t),e.removeListener('exit',n),e.removeListener('error',c)};e.on('message',t),e.on('exit',n),e.on('error',c)}if(s.isMaster){const e=setTimeout(()=>{this._objWaitForWorkerReadyPromises[i].fnReject(new Error('Timed out waiting for worker to be ready for JSONRPC.'))},a);await d,clearTimeout(e)}return i}_onRPCConnectToEndpoint(e,t){const n=e.params[0];if(r('number'==typeof t,'nConnectionID must be of type number.'),!this._objSessions.hasOwnProperty(t))return void console.error(new Error(`[rpc.connectToEndpoint] Worker with connection ID ${t} doesn't exist. Maybe it was closed.`));try{r('string'==typeof n,'strEndpointPath must be of type string.'),this._objSessions[t].strEndpointPath=o.EndpointBase.normalizePath(n),this._objWaitForWorkerReadyPromises[t].fnResolve(this._objSessions[t].strEndpointPath);const s=this._objSessions[t].worker,a={id:e.id,result:null,jsonrpc:'2.0'};s.postMessage?s.postMessage(a):s.send(a)}catch(n){const r=this._objSessions[t].worker,s={id:e.id,error:{message:n.message+'\n'+n.stack,code:0},jsonrpc:'2.0'};r.postMessage?r.postMessage(s):r.send(s),this._objWaitForWorkerReadyPromises[t].fnReject(n)}}_makeReverseCallsClient(e,t){const n=new e(t.strEndpointPath);return t.clientWorkerTransportPlugin=new o.Plugins.Client.WorkerTransport(t.worker,!0),n.addPlugin(t.clientWorkerTransportPlugin),this.emit('madeReverseCallsClient',n),n}async _routeMessage(e,n){const r=n.worker,s=n.nConnectionID;if('object'!=typeof e)return void console.error('['+t.pid+'] WorkerBidirectionalRouter: Received '+typeof e+' instead of object. Ignoring. RAW message: '+JSON.stringify(e));let a=!e.hasOwnProperty('id');try{if(e.hasOwnProperty('method')){if(!this._jsonrpcServer)throw new Error('JSONRPC.Server not initialized on this Worker.');const t=new o.IncomingRequest;t.connectionID=s,t.router=this,t.stackInErrorMessage=!0;try{const n=this._objSessions[s].strEndpointPath;if(!this._jsonrpcServer.endpoints.hasOwnProperty(n))throw new o.Exception('Unknown JSONRPC endpoint '+n+'.',o.Exception.METHOD_NOT_FOUND);t.endpoint=this._jsonrpcServer.endpoints[n],t.requestBody=e,t.requestObject=e}catch(e){t.callResult=e}await this._jsonrpcServer.processRequest(t),a||(r.postMessage?r.postMessage(t.callResultSerialized):r.send(t.callResultSerialized))}else if(e.hasOwnProperty('result')||e.hasOwnProperty('error')){if(this._objSessions.hasOwnProperty(s)&&null===this._objSessions[s].clientWorkerTransportPlugin)throw r.terminate?r.terminate():r!==t&&r.kill(),new Error('How can the client be not initialized, and yet getting responses from phantom requests?');this._objSessions.hasOwnProperty(s)?await this._objSessions[s].clientWorkerTransportPlugin.processResponse(e):console.error('Connection ID '+s+' is closed and session is missing. Ignoring response: '+JSON.stringify(e))}else throw a=!1,new Error('Unable to qualify the message as a JSONRPC request or response.')}catch(n){console.error(n),console.error('Uncaught error. RAW remote message: '+JSON.stringify(e)),console.log('['+t.pid+'] Unclean state. Closing worker.'),this.onConnectionEnded(s),r.terminate?r.terminate():r!==t&&r.kill()}}onConnectionEnded(e){super.onConnectionEnded(e),delete this._objWaitForWorkerReadyPromises[e]}}}).call(t,n(0))},function(e,t,n){const r=n(1),s={};s.Client=n(21),s.Exception=n(2),e.exports=class{constructor(e,t,n,r=[],{bSkipWaitReadyOnConnect:s=!1,nTimeoutSeconds:o=null}={}){this._strMethod=e,this._arrParams=t,this._bSkipWaitReadyOnConnect=s,this._nTimeoutSeconds=o,this._requestObject=null,this._mxRequestBody=null,this._mxResponseBody=null,this._responseObject=null,this._mxResult=null,this._strEndpointURL=null,this._objHeaders={},this._bCalled=!1,this._mxCallID=n,this._arrTransferList=r,Object.seal(this)}get callID(){return r('number'==typeof this._mxCallID||'string'==typeof this._mxCallID||'undefined'==typeof this._mxCallID,'this._mxCallID must be of type number.'),this._mxCallID}get isNotification(){return'undefined'==typeof this._mxCallID}get params(){return this._arrParams}set params(e){r(Array.isArray(e),'arrParams must be of type Array.'),this._arrParams=e}get methodName(){return this._strMethod}set methodName(e){r('string'==typeof e,'strMethod must be of type string.'),this._strMethod=e}get skipWaitReadyOnConnect(){return this._bSkipWaitReadyOnConnect}get timeoutSeconds(){return this._nTimeoutSeconds}get headers(){return this._objHeaders}get endpointURL(){return this._strEndpointURL}set endpointURL(e){r('string'==typeof e,'strEndpointURL must be of type string.'),this._strEndpointURL=e}get requestObject(){return this._requestObject}set requestObject(e){r('object'==typeof e||Array.isArray(e),'objRequest must be of type Object or Array.'),r(e.hasOwnProperty('method')||e.hasOwnProperty('params'),JSON.stringify(e),'objRequest must have either a method or params property.'),this._requestObject=e}get requestBody(){return this._mxRequestBody}set requestBody(e){this._mxRequestBody=e}get isMethodCalled(){return this._bCalled}set isMethodCalled(e){this._bCalled=e}get responseBody(){return this._mxResponseBody}set responseBody(e){r('string'==typeof e||'object'==typeof e,'mxResponseBody must be of type string or Object.'),this._mxResponseBody=e}get responseObject(){return this._responseObject}set responseObject(e){if('object'!=typeof e&&!e.hasOwnProperty('result')&&!e.hasOwnProperty('error'))throw new s.Exception('Invalid response structure. RAW response: '+JSON.stringify(this._mxResponseBody,void 0,'\t'),s.Exception.PARSE_ERROR);this._responseObject=e}get callResult(){return this.isMethodCalled=!0,this._mxResult}set callResult(e){this.isMethodCalled=!0,this._mxResult=e}get transferList(){return this._arrTransferList}toRequestObject(){return r(null!==this.methodName,'this.methodName cannot be null.'),r(Array.isArray(this.params),'this.params must be an Array.'),'undefined'==typeof this.callID?{method:this.methodName,params:this.params,jsonrpc:'2.0'}:{method:this.methodName,params:this.params,id:this.callID,jsonrpc:'2.0'}}}},function(e,t,n){const r={};r.ClientPluginBase=n(4),e.exports=class e extends r.ClientPluginBase{constructor(e,t=!1,n=!1,r=5e3){if(super(),'object'!=typeof e||Array.isArray(e))throw new Error('Invalid objFunctionNameToCacheSeconds parameter given.');Object.entries(e).forEach(([e,t])=>{if(0>=t)throw new Error(`Invalid cache duration ${t} given for function ${e}. It must be a number of seconds greater than 0.`)}),this._mapFunctionNameToCacheSeconds=new Map(Object.entries(e)),this._bDeepFreeze=t,this._bReturnDeepCopy=n,this._nMaxEntries=r,this.mapCache=new Map}dispose(){this.clear()}clear(){this.mapCache.clear()}deleteKeys(e=[]){e.forEach((e)=>this.mapCache.delete(e))}async afterJSONEncode(e){if(!e.isNotification&&this._mapFunctionNameToCacheSeconds.has(e.methodName)){const t=this.constructor.getCacheKey(e.methodName,e.params);(this.mapCache.has(t)&&this.mapCache.size>this._nMaxEntries||!this.mapCache.has(t)&&this.mapCache.size>=this._nMaxEntries)&&this.clear(),this.mapCache.has(t)&&(this._isCacheEntryExpired(t)?this.mapCache.delete(t):(e.responseObject={jsonrpc:this.constructor.DEFAULT_JSONRPC_VERSION,result:null,id:e.callID},e.responseBody=JSON.stringify(e.responseObject,void 0,'\t'),e.isMethodCalled=!0))}}async afterJSONDecode(e){if(!e.isNotification&&e.methodName&&this._mapFunctionNameToCacheSeconds.has(e.methodName)){const t=this.constructor.getCacheKey(e.methodName,e.params);if(this.mapCache.has(t)){const n=this.mapCache.get(t).value;this._bReturnDeepCopy?(e.responseObject.result=this.constructor._deepCopy(n),this._bDeepFreeze&&this.constructor._deepFreeze(e.responseObject.result)):e.responseObject.result=n}else{const n=this._mapFunctionNameToCacheSeconds.get(e.methodName),r=1e3*n+Date.now();if(this._bDeepFreeze&&!this._bReturnDeepCopy)this.constructor._deepFreeze(e.responseObject.result),this.mapCache.set(t,{expiresAt:r,value:e.responseObject.result});else{const n=this.constructor._deepCopy(e.responseObject.result);this.mapCache.set(t,{expiresAt:r,value:n}),this.bDeepFreeze&&(this.constructor._deepFreeze(n),this.constructor._deepFreeze(e.responseObject.result))}}}}_isCacheEntryExpired(e){return!this.mapCache.has(e)||Date.now()>this.mapCache.get(e).expiresAt}static getCacheKey(e,t){return`${e}__${JSON.stringify(t)}`}static _deepFreeze(t){if('object'==typeof t)return Object.getOwnPropertyNames(t).forEach((n)=>{const r=t[n];'object'==typeof r&&null!=r&&e._deepFreeze(r)}),Object.freeze(t)}static _deepCopy(e){return JSON.parse(JSON.stringify(e))}static get DEFAULT_JSONRPC_VERSION(){return'2.0'}}},function(e,t,n){(function(t){const r={};r.ClientPluginBase=n(4),e.exports=class extends r.ClientPluginBase{constructor(e=null){super(),this.nMaxMessagesCount=e,this.nMessagesCount=0}async afterJSONEncode(e){const n='string'==typeof e.requestBody?e.requestBody:JSON.stringify(e.requestBody);++this.nMessagesCount>this.nMaxMessagesCount||(n.length>1048576?console.log('['+t.pid+'] ['+new Date().toISOString()+'] Sent JSONRPC request, '+e.requestObject.method+'(). Larger than 1 MB, not logging. \n'):console.log('['+t.pid+'] ['+new Date().toISOString()+'] Sent JSONRPC request: '+n+'\n'))}async beforeJSONDecode(e){const n='string'==typeof e.responseBody?e.responseBody:JSON.stringify(e.responseBody);++this.nMessagesCount>this.nMaxMessagesCount||(n.length>1048576?console.log('['+t.pid+'] ['+new Date().toISOString()+'] Received JSONRPC response, '+e.requestObject.method+'(). Larger than 1 MB, not logging. \n'):console.log('['+t.pid+'] ['+new Date().toISOString()+'] Received JSONRPC response: '+n+'\n'))}}}).call(t,n(0))},function(e,t,n){(function(t){let r=null;t&&t.versions.electron&&(r=n(25),!r&&(window||self)&&'function'==typeof(window||self).require&&(r=(window||self).require('electron')));const s={ClientPluginBase:n(4),Utils:n(3)},o=n(1);e.exports=class extends s.ClientPluginBase{constructor(e,t){super(),this._arrDisposeCalls=[],this._objBrowserWindowRequestsPromises={},this._bBidirectionalMode=!!e,this._browserWindow=t,this._strChannel='jsonrpc_winid_'+(t?t.id:(window||self).require('electron').remote.getCurrentWindow().id),this._setupIPCTransport()}dispose(){for(const e of this._arrDisposeCalls)e();this._arrDisposeCalls.slice(0),this.rejectAllPromises(),super.dispose()}get browserWindow(){return this._browserWindow}get channel(){return this._strChannel}async beforeJSONEncode(e){e.requestBody=e.requestObject}async processResponse(e){return('number'==typeof e.id||'string'==typeof e.id)&&this._objBrowserWindowRequestsPromises[e.id]?void(this._objBrowserWindowRequestsPromises[e.id].outgoingRequest.responseBody=e,this._objBrowserWindowRequestsPromises[e.id].outgoingRequest.responseObject=e,this._objBrowserWindowRequestsPromises[e.id].fnResolve(null),delete this._objBrowserWindowRequestsPromises[e.id]):(console.error(new Error('Couldn\'t find JSONRPC response call ID in this._objWorkerRequestsPromises. RAW response: '+JSON.stringify(e))),console.error(new Error('RAW remote message: '+JSON.stringify(e))),void console.error('['+t.pid+'] Unclean state. Unable to match message to an existing Promise or qualify it as a request.'))}async makeRequest(e){if(!e.isMethodCalled)if(e.isMethodCalled=!0,e.isNotification||(o('number'==typeof e.requestObject.id||'string'==typeof e.requestObject.id,'outgoingRequest.requestObject.id must be of type number or string.'),this._objBrowserWindowRequestsPromises[e.requestObject.id]={outgoingRequest:e,promise:null},this._objBrowserWindowRequestsPromises[e.requestObject.id].promise=new Promise((t,n)=>{this._objBrowserWindowRequestsPromises[e.requestObject.id].fnResolve=t,this._objBrowserWindowRequestsPromises[e.requestObject.id].fnReject=n})),this.browserWindow?this.browserWindow.webContents.send(this.channel,e.requestObject):(window||self).require('electron').ipcRenderer.send(this.channel,e.requestObject),e.isNotification);else return this._objBrowserWindowRequestsPromises[e.requestObject.id].promise}async beforeJSONDecode(){}rejectAllPromises(e){console.log('['+t.pid+'] Rejecting all Promise instances in ElectronIPCTransport.');let n=0;for(let t in this._objBrowserWindowRequestsPromises)this._objBrowserWindowRequestsPromises[t].fnReject(e),delete this._objBrowserWindowRequestsPromises[t],n++;n&&console.error('['+t.pid+'] Rejected '+n+' Promise instances in ElectronIPCTransport.')}_setupIPCTransport(){if(!!this.browserWindow){const e=()=>{this.rejectAllPromises(new Error(`BrowserWindow ${this.browserWindow.id} closed`))};if(this._browserWindow.on('closed',e),this._arrDisposeCalls.push(()=>{this._browserWindow.removeListener('closed',e)}),!this._bBidirectionalMode){const e=async(e,t)=>{await this.processResponse(t)};r.ipcMain.on(this.channel,e),this._arrDisposeCalls.push(()=>{r.ipcMain.removeListener(this.channel,e)})}}else if(!this._bBidirectionalMode){const e=async(e,t)=>{await this.processResponse(t)};(window||self).require('electron').ipcRenderer.on(this._strChannel,e),this._arrDisposeCalls.push(()=>{(window||self).require('electron').ipcRenderer.removeListener(this._strChannel,e)})}}}}).call(t,n(0))},function(e,t,n){const r={};r.ClientPluginBase=n(4),r.Exception=n(2),e.exports=class extends r.ClientPluginBase{async exceptionCatch(e){console.error(e.callResult)}}},function(e,t,n){const r={ClientPluginBase:n(4),Utils:n(3)},s=n(98);e.exports=class extends r.ClientPluginBase{constructor(e,t,n=[]){super(),this._strExePath=e,this._strWorkingDirectoryPath=t,this._arrArguments=n}async makeRequest(e){if(e.isMethodCalled)return;e.isMethodCalled=!0;const t={cwd:this._strWorkingDirectoryPath,maxBuffer:10485760},n=s.spawn(this._strExePath,this._arrArguments,t);return new Promise((t,r)=>{n.on('close',()=>{n.stdin.end(),t(null)}),e.responseBody='',n.stdout.on('data',(t)=>{e.responseBody+=t}),n.on('error',(e)=>{r(e)}),n.stdin.setEncoding('utf-8'),n.stdin.write(e.requestBody)})}}},function(e,t,n){const r={ClientPluginBase:n(4)},s=n(65);e.exports=class e extends r.ClientPluginBase{constructor(t,n){super(),this.strAPIKey=t,this._arrExtraURLVariables=n,this.strKeyMetaData=e.getKeyMetaData(t)}static getKeyMetaData(e){let t=null;const n=e.split(':',2);return 1!==n.length&&(t=n[0]),t}async beforeJSONEncode(e){e.requestObject.expires=parseInt(new Date().getTime()/1e3+86400,10)}async afterJSONEncode(e){const t=new s('SHA-256','TEXT');t.setHMACKey(this.strAPIKey,'TEXT'),t.update(e.requestBody);let n=t.getHMAC('HEX');for(let t in null!==this.strKeyMetaData&&(n=this.strKeyMetaData+':'+n),e.endpointURL+=-1<e.endpointURL.indexOf('?')?'&':'?',-1===e.endpointURL.indexOf('verify')&&(e.endpointURL+='verify='+n),'&'===e.endpointURL.charAt(e.endpointURL.length-1)&&(e.endpointURL=e.endpointURL.slice(0,-1)),this._arrExtraURLVariables)e.endpointURL+='&'+t+'='+this._arrExtraURLVariables[t]}}},function(e,t,n){const r={ClientPluginBase:n(4),Utils:n(3)},s=n(1);e.exports=class extends r.ClientPluginBase{constructor(e,t){super(),this._objRTCDataChannelRequestsPromises={},this._bBidirectionalWebRTCMode=!!t,this._dataChannel=e,this._setupRTCDataChannel()}dispose(){try{this._dataChannel.close()}catch(e){console.error(e)}super.dispose()}get dataChannel(){return this._dataChannel}async processResponse(e,t){if(!t)try{t=r.Utils.jsonDecodeSafe(e)}catch(t){return console.error(t),console.error('Unable to parse JSON. RAW remote response: '+e),void('open'===this._dataChannel.readyState&&this._dataChannel.close())}return('number'==typeof t.id||'string'==typeof t.id)&&this._objRTCDataChannelRequestsPromises[t.id]?void(this._objRTCDataChannelRequestsPromises[t.id].outgoingRequest.responseBody=e,this._objRTCDataChannelRequestsPromises[t.id].outgoingRequest.responseObject=t,this._objRTCDataChannelRequestsPromises[t.id].fnResolve(null),delete this._objRTCDataChannelRequestsPromises[t.id]):(console.error(new Error('Couldn\'t find JSONRPC response call ID in this._objRTCDataChannelRequestsPromises. RAW response: '+e)),console.error(new Error('RAW remote message: '+e)),console.log('Unclean state. Unable to match WebRTC message to an existing Promise or qualify it as a request.'),void('open'===this._dataChannel.readyState&&this.dataChannel.close(1e3,'Unclean state. Unable to match WebRTC message to an existing Promise or qualify it as a request.')))}async makeRequest(e){if(!e.isMethodCalled){if('open'!==this.dataChannel.readyState)throw new Error('RTCDataChannel not connected.');if(e.isMethodCalled=!0,e.isNotification||(s('number'==typeof e.requestObject.id||'string'==typeof e.requestObject.id,'outgoingRequest.requestObject.id must be of type number or string.'),this._objRTCDataChannelRequestsPromises[e.requestObject.id]={outgoingRequest:e,promise:null},this._objRTCDataChannelRequestsPromises[e.requestObject.id].promise=new Promise((t,n)=>{this._objRTCDataChannelRequestsPromises[e.requestObject.id].fnResolve=t,this._objRTCDataChannelRequestsPromises[e.requestObject.id].fnReject=n})),this.dataChannel.send(e.requestBody),e.isNotification);else return this._objRTCDataChannelRequestsPromises[e.requestObject.id].promise}}rejectAllPromises(e){console.log('Rejecting all Promise instances in WebRTCTransport.');let t=0;for(let n in this._objRTCDataChannelRequestsPromises)this._objRTCDataChannelRequestsPromises[n].fnReject(e),delete this._objRTCDataChannelRequestsPromises[n],t++;t&&console.error('Rejected '+t+' Promise instances in WebRTCTransport.')}_setupRTCDataChannel(){const e=(e)=>{this.rejectAllPromises(e)},t=async(e)=>{await this.processResponse(e.data)},n=()=>{this.rejectAllPromises(new Error('RTCDataChannel closed.')),this._dataChannel.removeEventListener('close',n),this._dataChannel.removeEventListener('error',e),this._bBidirectionalWebRTCMode||this._dataChannel.removeEventListener('message',t)};this._dataChannel.addEventListener('close',n),this._dataChannel.addEventListener('error',e),this._bBidirectionalWebRTCMode||this._dataChannel.addEventListener('message',t)}}},function(e,t,n){(function(t){const r={};r.ClientPluginBase=n(4),r.Utils=n(3),r.Exception=n(2),r.WebSocketAdapters={},r.WebSocketAdapters.WebSocketWrapperBase=n(17);const s=n(1),o=n(79),a=n(93);e.exports=class extends r.ClientPluginBase{constructor(e=null,t=!1,{bAutoReconnect:n=!1,strWebSocketURL:r=null,fnWaitReadyOnConnected:o=null,nWaitReadyTimeoutSeconds:a=20,jsonrpcBidirectionalRouter:i=null,jsonrpcClient:d=null}={}){if(s(null===o||'function'==typeof o),s('boolean'==typeof n),s(null===r||'string'==typeof r),s('boolean'==typeof t),super(),this._mapCallIDToWebSocketRequestsPromises=new Map,this._bBidirectionalWebSocketMode=!!t,this._webSocket=e,this._bAutoReconnect=n,this._fnWaitReadyOnConnected=o,this._nWaitReadyTimeoutSeconds=a,this._jsonrpcBidirectionalRouter=i,this._jsonrpcClient=d,n&&!this._jsonrpcBidirectionalRouter&&t)throw new Error('jsonrpcBidirectionalRouter is mandatory when bAutoReconnect = true and bBidirectionalWebSocketMode = true.');if(n&&!this._jsonrpcClient&&t)throw new Error('jsonrpcClient param is mandatory when bAutoReconnect = true and bBidirectionalWebSocketMode = true.');if(!r)if(e)r=e.url;else throw new Error('strWebSocketURL must be provided when passing a null webSocket');if(this._strWebSocketURL=r,e&&this._setupWebSocket(),!e&&!r)throw new Error('At least one of webSocket or strWebSocketURL need to be provided.');if(n&&e)throw new Error('webSocket needs to be passed as null when bAutoReconnect is true.')}webSocketClass(){return a}async _initWebSocket(){return this._bAutoReconnect?this._waitReadyPromise?this._waitReadyPromise:void 0:void 0}async waitReady({bSkipWaitReadyOnConnect:e=!1}){if(this._bAutoReconnect){if(this._waitReadyPromise&&!e)return this._waitReadyPromise;const n=new Promise(async(n,s)=>{let i=this._webSocket,d;try{if(this._webSocket&&[a.CLOSED,a.CLOSING].includes(this._webSocket.readyState)){try{this._webSocket.close()}catch(e){console.error(e)}finally{this._webSocket=null}await o(2e3)}if(!this._webSocket){const e=this.webSocketClass();if(this._webSocket=new e(this._strWebSocketURL),i=this._webSocket,this._setupWebSocket(),d=setTimeout(()=>{const e=new r.Exception(`Timeout connecting to server. waitReady() in JSONRPC WebSocketTransport timed out after ${this._nWaitReadyTimeoutSeconds} seconds.`,r.Exception.REQUEST_EXPIRED);s(e),i.close(1e3,e.message)},1e3*this._nWaitReadyTimeoutSeconds),await new Promise((e,n)=>{if([a.CLOSED,a.CLOSING].includes(i.readyState))n(new Error('WebSocket closed immediately and unexpectedly.'));else if(![a.OPEN].includes(i.readyState))if(i.on&&i.removeListener&&t&&t.release)i.on('open',e),i.on('error',n);else if(i.addEventListener&&i.removeEventListener)i.addEventListener('open',e),i.addEventListener('error',n);else throw new Error('Failed to detect runtime or websocket interface type (browser, nodejs, websockets/ws npm package compatible interface, etc.')}),![a.OPEN].includes(i.readyState))throw new Error('Was expecting WebSocket to be open at this stage.');if(this._bBidirectionalWebSocketMode){const e=this._jsonrpcBidirectionalRouter.addWebSocketSync(i);this._jsonrpcBidirectionalRouter.connectionIDToSingletonClient(e,null,this._jsonrpcClient)}}this._fnWaitReadyOnConnected&&!e&&(await this._fnWaitReadyOnConnected()),n()}catch(e){console.error(e),await o(5e3),s(e),this._waitReadyPromise=null}finally{void 0!==d&&clearTimeout(d)}});return e||(this._waitReadyPromise=n),n}}dispose(){try{this._webSocket.close()}catch(e){console.error(e)}super.dispose()}get webSocket(){return this._webSocket}get webSocketURL(){return this._strWebSocketURL}async processResponse(e,t){if(!t)try{t=r.Utils.jsonDecodeSafe(e)}catch(t){return console.error(t),console.error('Unable to parse JSON. RAW remote response: '+e),void(this._webSocket.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&this._webSocket.close(1e3,'Unable to parse JSON. RAW remote response: '+e))}if('number'!=typeof t.id&&'string'!=typeof t.id||!this._mapCallIDToWebSocketRequestsPromises.has(t.id))return console.error(t),console.error(new Error('Couldn\'t find JSONRPC response call ID in this._objWebSocketRequestsPromises. RAW response: '+e)),console.error(new Error('RAW remote message: '+e)),console.log('Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request.'),void(this._webSocket.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&this.webSocket.close(1e3,'Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request.'));const n=this._mapCallIDToWebSocketRequestsPromises.get(t.id);n&&(n.outgoingRequest.responseBody=e,n.outgoingRequest.responseObject=t,n.fnResolve(null),this._mapCallIDToWebSocketRequestsPromises.delete(t.id))}async makeRequest(e){if(e.isMethodCalled)return;if(await this.waitReady({bSkipWaitReadyOnConnect:e.skipWaitReadyOnConnect}),this.webSocket.readyState!==r.WebSocketAdapters.WebSocketWrapperBase.OPEN)throw new Error('WebSocket not connected. Current WebSocket readyState: '+JSON.stringify(this.webSocket.readyState));e.isMethodCalled=!0;let t;if(e.isNotification);else{if(s('number'==typeof e.requestObject.id||'string'==typeof e.requestObject.id,'outgoingRequest.requestObject.id must be of type number or string.'),this._mapCallIDToWebSocketRequestsPromises.has(e.requestObject.id))throw new Error(`JSONRPC client request ID ${JSON.stringify(e.requestObject.id)} already used.`);for(t={outgoingRequest:e,promise:null,fnReject:void 0,fnResolve:void 0},t.promise=new Promise((e,n)=>{t.fnResolve=e,t.fnReject=n});!t.fnReject;)await o(5);this._mapCallIDToWebSocketRequestsPromises.set(e.requestObject.id,t)}if(await this.waitReady({bSkipWaitReadyOnConnect:e.skipWaitReadyOnConnect}),this.webSocket.send(e.requestBody),e.isNotification);else return t.promise}rejectAllPromises(e){if(this._mapCallIDToWebSocketRequestsPromises.size){console.log(`Rejecting ${this._mapCallIDToWebSocketRequestsPromises.size} Promise instances in WebSocketTransport.`);for(let t of this._mapCallIDToWebSocketRequestsPromises.values())t.fnReject(e);this._mapCallIDToWebSocketRequestsPromises.clear()}}_setupWebSocket(){const e=this._webSocket;if(e.on&&e.removeListener&&t&&t.release){const t=(t)=>{e===this._webSocket&&(this._waitReadyPromise=null),this.rejectAllPromises(t)},n=(r,o)=>{e===this._webSocket&&(this._waitReadyPromise=null),this.rejectAllPromises(new Error('WebSocket closed. Code: '+JSON.stringify(r)+'. Message: '+JSON.stringify(o))),this._bBidirectionalWebSocketMode||e.removeListener('message',s),e.removeListener('close',n),e.removeListener('error',t)},s=async(t)=>{try{await this.processResponse(t)}catch(t){console.error(t),e.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&e.close(1e3,`${t.message}`)}};e.on('error',t),e.on('close',n),this.on('dispose',n),this._bBidirectionalWebSocketMode||e.on('message',s)}else if(e.addEventListener&&e.removeEventListener){const t=(t)=>{e===this._webSocket&&(this._waitReadyPromise=null),this.rejectAllPromises(t)},n=(r)=>{e===this._webSocket&&(this._waitReadyPromise=null),this.rejectAllPromises(new Error('WebSocket closed. Code: '+JSON.stringify(r.code)+'. Message: '+JSON.stringify(r.reason)+'. wasClean: '+JSON.stringify(r.wasClean))),this._bBidirectionalWebSocketMode||e.removeEventListener('message',s),e.removeEventListener('close',n),e.removeEventListener('error',t)},s=async(t)=>{try{await this.processResponse(t.data)}catch(t){console.error(t),e.readyState===r.WebSocketAdapters.WebSocketWrapperBase.OPEN&&e.close(1e3,`${t.message}`)}};this.on('dispose',n),this._bBidirectionalWebSocketMode||e.addEventListener('message',s),e.addEventListener('close',n),e.addEventListener('error',t)}else throw new Error('Failed to detect runtime or websocket interface type (browser, nodejs, websockets/ws npm package compatible interface, etc.')}}}).call(t,n(0))},function(e,t,n){(function(t){const r={ClientPluginBase:n(4),Utils:n(3)},s=n(1);let o;try{o=n(25)}catch(e){}class a extends r.ClientPluginBase{constructor(e,t){super(),this._arrDisposeCalls=[],s(e instanceof o.Worker||e===o),this._objWorkerRequestsPromises={},this._bBidirectionalMode=!!t,this._threadWorker=e,this._threadID=e.threadId,this._setupThreadWorker()}dispose(){for(const e of this._arrDisposeCalls)e();this._arrDisposeCalls.slice(0),this.rejectAllPromises(),super.dispose()}get threadWorker(){return this._threadWorker}async beforeJSONEncode(e){e.requestBody=e.requestObject}async processResponse(e){return('number'==typeof e.id||'string'==typeof e.id)&&this._objWorkerRequestsPromises[e.id]?void(this._objWorkerRequestsPromises[e.id].outgoingRequest.responseBody=e,this._objWorkerRequestsPromises[e.id].outgoingRequest.responseObject=e,this._objWorkerRequestsPromises[e.id].fnResolve(null),delete this._objWorkerRequestsPromises[e.id]):(console.error(new Error(`Couldn't find JSONRPC response call ID in this._objWorkerRequestsPromises from thread ID ${this._threadID}. RAW response: ${JSON.stringify(e)}`)),console.error(new Error(`RAW remote message from thread ID ${this._threadID}: `+JSON.stringify(e))),console.log(`Unclean state in WorkerThreadTransport. Unable to match message from thread Worker thread ID ${this._threadID} to an existing Promise or qualify it as a request.`),void(o.isMainThread?this.threadWorker.terminate():t.exit(1)))}async makeRequest(e){if(!e.isMethodCalled)if(e.isMethodCalled=!0,e.isNotification||(s('number'==typeof e.requestObject.id||'string'==typeof e.requestObject.id,'outgoingRequest.requestObject.id must be of type number or string.'),this._objWorkerRequestsPromises[e.requestObject.id]={outgoingRequest:e,promise:null},this._objWorkerRequestsPromises[e.requestObject.id].promise=new Promise((t,n)=>{this._objWorkerRequestsPromises[e.requestObject.id].fnResolve=t,this._objWorkerRequestsPromises[e.requestObject.id].fnReject=n})),o.isMainThread?this.threadWorker.postMessage(e.requestObject,e.transferList):o.parentPort.postMessage(e.requestObject,e.transferList),e.isNotification);else return this._objWorkerRequestsPromises[e.requestObject.id].promise}async beforeJSONDecode(){}rejectAllPromises(e){console.log(`Rejecting all Promise instances for WorkerThreadTransport thread Id ${this._threadID}.`);let t=0;for(let n in this._objWorkerRequestsPromises)this._objWorkerRequestsPromises[n].fnReject(e),delete this._objWorkerRequestsPromises[n],t++;t&&console.error(`Rejected ${t} Promise instances for WorkerThreadTransport thread Id ${this._threadID}`)}_setupThreadWorker(){const e=(e)=>{this.rejectAllPromises(e)},t=()=>{this.rejectAllPromises(new Error('Thread MessagePort closed.'))},n=async(e)=>{await this.processResponse(e)},r=(s)=>{this.rejectAllPromises(new Error(`Thread Worker with thread ID ${this._threadID} closed. Code: ${JSON.stringify(s)}`)),o.isMainThread?(this._threadWorker.removeListener('exit',r),this._threadWorker.removeListener('error',e),!this._bBidirectionalMode&&this._threadWorker.removeListener('message',n)):(o.parentPort.removeListener('close',t),!this._bBidirectionalMode&&o.parentPort.removeListener('message',n))};o.isMainThread?(this._threadWorker.on('exit',r),this._arrDisposeCalls.push(()=>{this._threadWorker.removeListener('exit',r)}),this._threadWorker.on('error',e),this._arrDisposeCalls.push(()=>{this._threadWorker.removeListener('error',e)}),!this._bBidirectionalMode&&(this._threadWorker.on('message',n),this._arrDisposeCalls.push(()=>{this._threadWorker.removeListener('message',n)}))):(o.parentPort.on('close',t),this._arrDisposeCalls.push(()=>{o.parentPort.removeListener('close',t)}),!this._bBidirectionalMode&&(o.parentPort.on('message',n),this._arrDisposeCalls.push(()=>{o.parentPort.removeListener('message',n)})))}}e.exports=a}).call(t,n(0))},function(e,t,n){(function(t){const r={ClientPluginBase:n(4),Utils:n(3)},s=n(1);e.exports=class extends r.ClientPluginBase{constructor(e,t){super(),this._arrDisposeCalls=[],this._objWorkerRequestsPromises={},this._bBidirectionalWorkerMode=!!t,this._worker=e,this._setupWorker()}dispose(){for(const e of this._arrDisposeCalls)e();this._arrDisposeCalls.slice(0),this.rejectAllPromises(),super.dispose()}get worker(){return this._worker}async beforeJSONEncode(e){e.requestBody=e.requestObject}async processResponse(e){return('number'==typeof e.id||'string'==typeof e.id)&&this._objWorkerRequestsPromises[e.id]?void(this._objWorkerRequestsPromises[e.id].outgoingRequest.responseBody=e,this._objWorkerRequestsPromises[e.id].outgoingRequest.responseObject=e,this._objWorkerRequestsPromises[e.id].fnResolve(null),delete this._objWorkerRequestsPromises[e.id]):(console.error(new Error('Couldn\'t find JSONRPC response call ID in this._objWorkerRequestsPromises. RAW response: '+JSON.stringify(e))),console.error(new Error('RAW remote message: '+JSON.stringify(e))),console.log('Unclean state. Unable to match Worker message to an existing Promise or qualify it as a request.'),void(this.worker.terminate?this.worker.terminate():this.worker!==t&&this.worker.kill()))}async makeRequest(e){if(!e.isMethodCalled){if(this.worker.isDead&&this.worker.isDead())throw new Error('Worker not connected.');if(e.isMethodCalled=!0,e.isNotification||(s('number'==typeof e.requestObject.id||'string'==typeof e.requestObject.id,'outgoingRequest.requestObject.id must be of type number or string.'),this._objWorkerRequestsPromises[e.requestObject.id]={outgoingRequest:e,promise:null},this._objWorkerRequestsPromises[e.requestObject.id].promise=new Promise((t,n)=>{this._objWorkerRequestsPromises[e.requestObject.id].fnResolve=t,this._objWorkerRequestsPromises[e.requestObject.id].fnReject=n})),this.worker.postMessage?e.transferList.length?this.worker.postMessage(e.requestObject,e.transferList):this.worker.postMessage(e.requestObject):this.worker.send(e.requestObject),e.isNotification);else return this._objWorkerRequestsPromises[e.requestObject.id].promise}}async beforeJSONDecode(){}rejectAllPromises(e){console.log('Rejecting all Promise instances in WorkerTransport.');let t=0;for(let n in this._objWorkerRequestsPromises)this._objWorkerRequestsPromises[n].fnReject(e),delete this._objWorkerRequestsPromises[n],t++;t&&console.error('Rejected '+t+' Promise instances in WorkerTransport.')}_setupWorker(){if(this._worker.addEventListener){const e=(e)=>{this.rejectAllPromises(e)},t=async(e)=>{await this.processResponse(e.data)};this._worker.addEventListener('error',e),this._arrDisposeCalls.push(()=>{this._worker.removeEventListener('error',e)}),this._bBidirectionalWorkerMode||(this._worker.addEventListener('message',t),this._arrDisposeCalls.push(()=>{this._worker.removeEventListener('message',t)}))}else{const e=(e)=>{this.rejectAllPromises(e)},t=async(e)=>{await this.processResponse(e)},n=(r,s)=>{this.rejectAllPromises(new Error('Worker closed. Code: '+JSON.stringify(r)+'. Signal: '+JSON.stringify(s))),this._worker.removeListener('exit',n),this._worker.removeListener('error',e),this._bBidirectionalWorkerMode||this._worker.removeListener('message',t)};this._worker.on('exit',n),this._arrDisposeCalls.push(()=>{this._worker.removeListener('exit',n)}),this._worker.on('error',e),this._arrDisposeCalls.push(()=>{this._worker.removeListener('error',e)}),this._bBidirectionalWorkerMode||(this._worker.on('message',t),this._arrDisposeCalls.push(()=>{this._worker.removeListener('message',t)}))}}}}).call(t,n(0))},function(e,t,n){const r={};r.ServerPluginBase=n(12),e.exports=class extends r.ServerPluginBase{async beforeJSONDecode(e){e.isAuthenticated=!0}}},function(e,t,n){const r={};r.ServerPluginBase=n(12),e.exports=class extends r.ServerPluginBase{async beforeJSONDecode(e){e.isAuthorized=!0}}},function(e,t,n){(function(t){const r={};r.ServerPluginBase=n(12),e.exports=class extends r.ServerPluginBase{constructor(e=null){super(),this.nMaxMessagesCount=e,this.nMessagesCount=0}async beforeJSONDecode(e){++this.nMessagesCount>this.nMaxMessagesCount||(e.requestBody.length>1048576?console.log('['+t.pid+'] ['+new Date().toISOString()+'] Received JSONRPC request at endpoint path '+e.endpoint.path+', '+e.requestObject.method+'(). Larger than 1 MB, not logging. \n'):console.log('['+t.pid+'] ['+new Date().toISOString()+'] Received JSONRPC request at endpoint path '+e.endpoint.path+': '+('string'==typeof e.requestBody?e.requestBody:JSON.stringify(e.requestBody))+'\n'))}async afterSerialize(e){++this.nMessagesCount>this.nMaxMessagesCount||(e.requestBody.length>1048576?console.log('['+t.pid+'] ['+new Date().toISOString()+'] Sending JSONRPC response, '+e.requestObject.method+'(). Larger than 1 MB, not logging. \n'):console.log('['+t.pid+'] ['+new Date().toISOString()+'] Sending JSONRPC response: '+('string'==typeof e.callResultSerialized?e.callResultSerialized:JSON.stringify(e.callResultSerialized))+'\n'))}}}).call(t,n(0))},function(e,t,n){const r={};r.ServerPluginBase=n(12),e.exports=class extends r.ServerPluginBase{constructor(e=!1,t=!1,n=!1){super(),this._mapFunctioNameToMetrics=new Map,this._nCurrentlyRunningFunctions=0,this._bExportMethodOnEndpoint=e,this._bFakeAuthenticatedExportedMethod=t,this._bFakeAuthorizedExportedMethod=n}async afterJSONDecode(e){this._bExportMethodOnEndpoint&&['rpc.performanceCounters','rpc.performanceCountersClear'].includes(e.requestObject.method)&&(this._bFakeAuthenticatedExportedMethod&&(e.isAuthenticated=!0),this._bFakeAuthorizedExportedMethod&&(e.isAuthorized=!0)),e.startDurationTimer(),e.requestObject.method&&!e.isNotification&&this._nCurrentlyRunningFunctions++}async result(e){e.isNotification||(this._nCurrentlyRunningFunctions--,0>this._nCurrentlyRunningFunctions&&(this._nCurrentlyRunningFunctions=0));const t=this._functionMappings(e.requestObject.method);t.successCount+=1,t.successMillisecondsTotal+=e.durationMilliseconds,t.successMillisecondsAverage=parseInt(t.successMillisecondsTotal/t.successCount)}async exceptionCatch(e){if(e.requestObject&&e.requestObject.method){e.isNotification||(this._nCurrentlyRunningFunctions--,0>this._nCurrentlyRunningFunctions&&(this._nCurrentlyRunningFunctions=0));const t=this._functionMappings(e.requestObject.method);t.errorCount+=1,t.errorMillisecondsTotal+=e.durationMilliseconds,t.errorMillisecondsAverage=parseInt(t.errorMillisecondsTotal/t.errorCount)}}async callFunction(e){e.requestObject&&e.requestObject.method&&this._bExportMethodOnEndpoint&&('rpc.performanceCounters'===e.requestObject.method?e.callResult={metrics:this.metricsAsObject,runningCallsCount:this.runningCallsCount}:'rpc.performanceCountersClear'===e.requestObject.method&&(e.callResult=!0,this._mapFunctioNameToMetrics.clear()))}get metrics(){return this._mapFunctioNameToMetrics}get metricsAsObject(){const e={};for(const t of this._mapFunctioNameToMetrics.keys())e[t]=this._mapFunctioNameToMetrics.get(t);return e}get runningCallsCount(){return this._nCurrentlyRunningFunctions}_functionMappings(e){let t=this._mapFunctioNameToMetrics.get(e);return t||(t={successCount:0,errorCount:0,successMillisecondsTotal:0,errorMillisecondsTotal:0,successMillisecondsAverage:0,errorMillisecondsAverage:0},this._mapFunctioNameToMetrics.set(e,t)),t}}},function(e,t,n){(function(t){const r={ServerPluginBase:n(12),Exception:n(2)},s=n(1);var a=n(95);const i=n(22),d=n(61);class l extends r.ServerPluginBase{constructor(e,t=l.COMPRESSION_TYPE_ZLIB){super(),l.validateEncryptionKeys(e),this._objKeys=e,this._strCompressionType=t,Object.seal(this)}get allowedEncryptionModes(){return[this.constructor.MODE_AES_128]}get compressionType(){return this._strCompressionType}get _activeKeyIndex(){return this._objKeys.active_index}get _keys(){return this._objKeys.keys}set compressionType(e){s('string'==typeof e,`Invalid property type for compressionType in URLPublic. Expected "string", but got ${typeof strCompressionEnabled}.`),s(this.constructor.allowedCompressionTypes.includes(e),`Invalid compression type "${e}". Allowed ones are: ${JSON.stringify(this.constructor.allowedCompressionTypes)}`),this._strCompressionType=e}async URLRequestGenerate(e,t,n,r=null,a=l.MODE_AES_128){let i={[this.constructor.REQUEST_PARAM_NAME_METHOD]:t,[this.constructor.REQUEST_PARAM_NAME_PARAMS]:n};return null!==r&&(s(o(r),`Invalid nMaxAgeSeconds parameter for URLRequestGenerate. Expected Integer, but got ${JSON.stringify(r)}.`),i[this.constructor.REQUEST_PARAM_NAME_EXPIRE]=parseInt(new Date().getTime()/1e3,10)+r),this.JSONRequestToPublicURL(e,JSON.stringify(i),a)}async JSONRequestToPublicURL(e,t,n=l.MODE_AES_128){s('string'==typeof t,`Invalid parameter type for strJSONRequest. Expected "string", but got "${typeof t}" value ${JSON.stringify(t)}.`);let o=null;switch(n){case this.constructor.MODE_AES_128:o=await this.JSONRequestToURLEncryptedParams(t);break;case this.constructor.MODE_BASE64:o=await this.JSONRequestToURLBase64Params(t);break;case this.constructor.MODE_PLAIN:o=await this.JSONRequestToURLPlainParams(t);break;default:throw new r.Exception(`Unhandled encryption mode ${JSON.stringify(n)}.`);}return s(null!==o,`Invalid objPublicRequest: ${JSON.stringify(o)}.`),n!==this.constructor.MODE_DEFAULT&&(o[this.constructor.URL_PARAM_NAME_MODE]=n),e+=e.includes('?')?'&':'?',e+=i.stringify(o),e}async JSONRequestToURLEncryptedParams(e){let t=this.JSONRequestSignatureAndIV(e,this._activeKeyIndex),n=await this.URLParamEncrypt(e,t),r={[this._activeKeyIndex]:this.constructor.base64URLEscape(n),[this.constructor.URL_PARAM_NAME_VERIFY]:this.constructor.base64URLEscape(t.toString('base64'))};return r}async JSONRequestToURLPlainParams(e){let t=this.JSONRequestSignatureAndIV(e,this._activeKeyIndex),n={[this._activeKeyIndex]:e,[this.constructor.URL_PARAM_NAME_VERIFY]:this.constructor.base64URLEscape(t.toString('base64'))};return n}async JSONRequestToURLBase64Params(e){let n=this.JSONRequestSignatureAndIV(e,this._activeKeyIndex),r;r=await this.constructor.compress(t.from(e),this.compressionType),s('undefined'!=typeof r,'Invalid type for bufferCompresedData after compress.');let o=r.toString('base64'),a={[this._activeKeyIndex]:this.constructor.base64URLEscape(o),[this.constructor.URL_PARAM_NAME_VERIFY]:this.constructor.base64URLEscape(n.toString('base64'))};return a}async beforeJSONDecode(e){if('GET'!==e.requestHTTPMethod||'object'!=typeof e.requestHTTPGetQuery||null===e.requestHTTPGetQuery)return;let t=await this.PublicURLParamsToJSONRequest(e.requestHTTPGetQuery),n=null;try{n=JSON.parse(t)}catch(e){throw console.error(e),new r.Exception('Failed to decode URL request.')}if(n.id=null,n.jsonrpc=this.constructor.DEFAULT_JSONRPC_VERSION,n.method=n[this.constructor.REQUEST_PARAM_NAME_METHOD],n.params=n[this.constructor.REQUEST_PARAM_NAME_PARAMS],delete n[this.constructor.REQUEST_PARAM_NAME_METHOD],delete n[this.constructor.REQUEST_PARAM_NAME_PARAMS],n.hasOwnProperty(this.constructor.REQUEST_PARAM_NAME_EXPIRE)&&(n.expires=n[this.constructor.REQUEST_PARAM_NAME_EXPIRE],delete n[this.constructor.REQUEST_PARAM_NAME_EXPIRE],n.expires<parseInt(new Date().getTime()/1e3,10)))throw new r.Exception('Replay attack prevention. Request is past "expires" timestamp.',r.Exception.REQUEST_EXPIRED);e.isAuthenticated=!0,e.isAuthorized=!0,e.requestBody=JSON.stringify(n)}async URLParamDecrypt(e,n,r){s('string'==typeof r,'strEncryptionKeyIndex must be of type string.'),s('string'==typeof e,`Invalid parameter type for strBase64Data in URLParamDecrypt. Expected "string" but got ${typeof e}.`);let o=null,i=e.substr(0,this.constructor.BROTLI_PREFIX.length)===this.constructor.BROTLI_PREFIX,d=e.substr(0,this.constructor.NONE_PREFIX.length)===this.constructor.NONE_PREFIX,l;l=i?t.from(e.substr(this.constructor.BROTLI_PREFIX.length),'base64'):d?t.from(e.substr(this.constructor.NONE_PREFIX.length),'base64'):t.from(e,'base64');let c=a.cipher.createDecipher('AES-CBC',this._keys[r].aes_key);c.start({iv:a.util.createBuffer(n)}),c.update(a.util.createBuffer(l)),c.finish();let u=t.from(c.output.getBytes(),'binary'),p=this.constructor.COMPRESSION_TYPE_ZLIB;i?p=this.constructor.COMPRESSION_TYPE_BROTLI:d&&(p=this.constructor.NONE),o=await this.constructor.decompress(u,p),s(o instanceof t,`Invalid decompress return type for URLParamDecrypt. Expected "buffer" but got ${typeof o}.`);let h=o.toString();return s('string'==typeof h,`Invalid return type for URLParamDecrypt. Expected "string" but got ${typeof h}.`),h}async URLParamDecode(e){s('string'==typeof e,`Invalid parameter type for strJSONRequest in URLParamDecode. Expected "string" but got ${typeof e}.`);let n=e.substr(0,this.constructor.BROTLI_PREFIX.length)===this.constructor.BROTLI_PREFIX,r=e.substr(0,this.constructor.NONE_PREFIX.length)===this.constructor.NONE_PREFIX,o=null,a;a=n?t.from(e.substr(this.constructor.BROTLI_PREFIX.length),'base64'):r?t.from(e.substr(this.constructor.NONE_PREFIX.length),'base64'):t.from(e,'base64');let i=this.constructor.COMPRESSION_TYPE_ZLIB;n?i=this.constructor.COMPRESSION_TYPE_BROTLI:r&&(i=this.constructor.NONE),o=await this.constructor.decompress(a,i),s(o instanceof t,`Invalid decompress return type for URLParamDecode. Expected "buffer" but got ${typeof o}.`);let d=o.toString();return s('string'==typeof d,`Invalid return type for URLParamDecode. Expected "string" but got ${typeof d}.`),d}async URLParamEncrypt(e,n){s('string'==typeof e,`Invalid parameter type for strJSONRequest in URLParamEncrypt. Expected "string" but got ${typeof e}.`);let r=await this.constructor.compress(e,this.compressionType),o;s(r instanceof t,'Failed to compress data before encryption.'+JSON.stringify(r));let i=a.cipher.createCipher('AES-CBC',this._keys[this._activeKeyIndex].aes_key);i.start({iv:a.util.createBuffer(n)}),i.update(a.util.createBuffer(r)),i.finish(),o=t.from(i.output.getBytes(),'binary'),s('undefined'!=typeof o&&null!==o&&o instanceof t,'Failed to encrypt data.');let d=o.toString('base64');s('string'==typeof d,`Invalid return type for URLParamEncrypt. Expected "string" but got ${typeof d}.`),d=this.constructor.getPreffixForCompressionType(this.compressionType)+d;let l=await this.URLParamDecrypt(d,n,this._activeKeyIndex),c=a.md.md5.create();c.update(l);let u=a.md.md5.create();if(u.update(e),c.digest().toHex()!==u.digest().toHex())throw new Error('Encrypted data failed decryption test.');return d}async PublicURLParamsToJSONRequest(e,n=!1){try{for(let n in this._keys)if(!this._keys[n].compromised&&n in e){if(e[n]=e[n].replace(' ','+'),!(this.constructor.URL_PARAM_NAME_VERIFY in e))throw new r.Exception(`URLPublic: Missing "${this.constructor.URL_PARAM_NAME_VERIFY}" URL parameter required for verifying the URL.`,r.Exception.NOT_AUTHENTICATED);let o=t.from(this.constructor.base64URLUnescape(e[this.constructor.URL_PARAM_NAME_VERIFY]),'base64'),a=this.constructor.URL_PARAM_NAME_MODE in e?parseInt(e[this.constructor.URL_PARAM_NAME_MODE],10):this.constructor.MODE_DEFAULT;if(!this.allowedEncryptionModes.includes(a))throw new r.Exception('Encryption mode not allowed.');let i=null;switch(a){case this.constructor.MODE_AES_128:i=await this.URLParamDecrypt(this.constructor.base64URLUnescape(e[n]),o,n);break;case this.constructor.MODE_BASE64:i=await this.URLParamDecode(this.constructor.base64URLUnescape(e[n]));break;case this.constructor.MODE_PLAIN:i=e[n];break;default:throw new r.Exception(`Unhandled encryption mode ${JSON.stringify(a)}.`);}s('string'==typeof i,'Invalid strJSONRequest after decoding.');let d=this.JSONRequestSignatureAndIV(i,n);if(!d.equals(o))throw new r.Exception('Authentication failure. Verify hash incorrect.',r.Exception.NOT_AUTHENTICATED);return i}throw new r.Exception('Invalid params.')}catch(e){if(n)return JSON.stringify({});throw e}}JSONRequestSignatureAndIV(e,n){s('string'==typeof e,`Invalid parameter type for JSONRequestSignatureAndIV. Expecting "string", but got "${typeof e}".`),s('string'==typeof n,'strActiveKeyIndex needs to be of type string.');let r=a.hmac.create();return r.start(this.constructor.HMAC_ALGORITHM,this._keys[n].salt),r.update(e),t.from(r.digest().getBytes(),'binary')}static base64URLEscape(e){return s('string'==typeof e,`Invalid parameter type for base64URLEscape. Expecting "string", but got "${typeof e}".`),e.replace(/\+/g,'-').replace(/\//g,',').replace(/\=/g,'_')}static base64URLUnescape(e){return s('string'==typeof e,`Invalid parameter type for base64URLEscape. Expecting "string", but got "${typeof e}".`),e.replace(/\-/g,'+').replace(/_/g,'=').replace(/\,/g,'/')}static async compress(e,n=l.COMPRESSION_TYPE_ZLIB){switch(n){case this.COMPRESSION_TYPE_BROTLI:throw new Error('Brotli compression is not supported yet.');case this.COMPRESSION_TYPE_ZLIB:return new Promise((t,n)=>{d.deflate(e,(e,r)=>e?n(e):void t(r))});case this.NONE:return t.from(e);default:throw new Error(`Invalid compression type "${n}" for compress. Allowed ones are: ${JSON.stringify(this.allowedCompressionTypes)}`);}}static async decompress(e,t=l.COMPRESSION_TYPE_ZLIB){switch(t){case this.COMPRESSION_TYPE_BROTLI:throw new Error('Brotli decompression is not supported yet.');case this.COMPRESSION_TYPE_ZLIB:return new Promise((t,n)=>{d.inflate(e,(e,r)=>e?n(e):void t(r))});case this.NONE:return e;default:throw new Error(`Invalid compression type "${t}" for decompress. Allowed ones are: ${JSON.stringify(this.allowedCompressionTypes)}`);}}static getPreffixForCompressionType(e){return e===this.COMPRESSION_TYPE_BROTLI?this.BROTLI_PREFIX:e===this.NONE?this.NONE_PREFIX:''}static validateEncryptionKeys(e){for(let t in s('object'==typeof e&&null!==e,'objKeys needs to be of type Object.'),s('object'==typeof e.keys&&null!==e.keys,'objKeys.keys needs to be of type Object.'),s('string'==typeof e.active_index,'objKeys.active_index needs to be of type string.'),e.keys)if(s('object'==typeof e.keys[t],'objKeys.keys[strIndex] needs to be of type Object.'),s('string'==typeof e.keys[t].aes_key,'objKeys.keys[strIndex].aes_key needs to be of type string.'),s('string'==typeof e.keys[t].salt,'objKeys.keys[strIndex].salt needs to be of type string.'),s(9<=e.keys[t].salt.length,'objKeys.keys['+JSON.stringify(t)+'].salt needs to have at least 9 characters.'),s('string'==typeof e.keys[t].created,'objKeys.keys[strIndex].created needs to be of type string.'),![16,24,32].includes(e.keys[t].aes_key.length))throw new Error(`(JSONRPC.Plugins.Server.URLPublic) Invalid AES key with index ${JSON.stringify(t)}. The AES key must have 16, 24 or 32 hex characters, but found ${e[t].aes_key.length} characters.`)}static get allowedCompressionTypes(){return[this.COMPRESSION_TYPE_ZLIB,this.NONE]}static get URL_PARAM_NAME_VERIFY(){return'v'}static get URL_PARAM_NAME_MODE(){return'm'}static get REQUEST_PARAM_NAME_METHOD(){return'm'}static get REQUEST_PARAM_NAME_PARAMS(){return'p'}static get REQUEST_PARAM_NAME_EXPIRE(){return'e'}static get MODE_DEFAULT(){return this.MODE_AES_128}static get MODE_AES_128(){return 0}static get MODE_PLAIN(){return 1}static get MODE_BASE64(){return 2}static get HMAC_ALGORITHM(){return'md5'}static get BROTLI_PREFIX(){return'br.'}static get NONE_PREFIX(){return'no.'}static get COMPRESSION_TYPE_ZLIB(){return'zlib'}static get COMPRESSION_TYPE_BROTLI(){return'brotli'}static get NONE(){return'none'}static get DEFAULT_JSONRPC_VERSION(){return'2.0'}}e.exports=l}).call(t,n(6).Buffer)},function(e,t,n){var r={};r.DebugLogger=n(54),r.AuthenticationSkip=n(52),r.AuthorizeAll=n(53),r.PerformanceCounters=n(55),r.URLPublic=n(56),e.exports=r},function(e,t,n){const r=n(17);e.exports=class extends r{constructor(e,t){super(e),this._strURL='string'==typeof t?t:e.url?e.url:e.upgradeReq.url,this.objListeningFor={};this._objUpgradeReq=e.upgradeReq?e.upgradeReq:void 0}get url(){return this._strURL}get upgradeReq(){return this._objUpgradeReq}on(e,t){if(super.superOn(e,t),!this.objListeningFor[e])return this.objListeningFor[e]=!0,this._webSocket.on(e,(...t)=>{this.emit(e,...t)})}}},function(e,t){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');var n=e.indexOf('=');-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e,t,n){return 3*(t+n)/4-n}function s(e){for(var t=n(e),s=t[0],o=t[1],a=new u(r(e,s,o)),d=0,l=0<o?s-4:s,p=0,i;p<l;p+=4)i=c[e.charCodeAt(p)]<<18|c[e.charCodeAt(p+1)]<<12|c[e.charCodeAt(p+2)]<<6|c[e.charCodeAt(p+3)],a[d++]=255&i>>16,a[d++]=255&i>>8,a[d++]=255&i;return 2===o&&(i=c[e.charCodeAt(p)]<<2|c[e.charCodeAt(p+1)]>>4,a[d++]=255&i),1===o&&(i=c[e.charCodeAt(p)]<<10|c[e.charCodeAt(p+1)]<<4|c[e.charCodeAt(p+2)]>>2,a[d++]=255&i>>8,a[d++]=255&i),a}function o(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function a(e,t,n){for(var r=[],s=t,a;s<n;s+=3)a=(16711680&e[s]<<16)+(65280&e[s+1]<<8)+(255&e[s+2]),r.push(o(a));return r.join('')}function d(e){for(var t=e.length,n=t%3,r=[],s=16383,o=0,i=t-n,d;o<i;o+=s)r.push(a(e,o,o+s>i?i:o+s));return 1==n?(d=e[t-1],r.push(l[d>>2]+l[63&d<<4]+'==')):2==n&&(d=(e[t-2]<<8)+e[t-1],r.push(l[d>>10]+l[63&d>>4]+l[63&d<<2]+'=')),r.join('')}t.byteLength=function(e){var t=n(e),r=t[0],s=t[1];return 3*(r+s)/4-s},t.toByteArray=s,t.fromByteArray=d;for(var l=[],c=[],u='undefined'==typeof Uint8Array?Array:Uint8Array,p='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',h=0,i=p.length;h<i;++h)l[h]=p[h],c[p.charCodeAt(h)]=h;c[45]=62,c[95]=63},function(e,t,n){'use strict';(function(e,r){function s(e){if('number'!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError('Bad argument');this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=n(1),a=n(75),i=n(69),d=n(71),l=n(68);for(var c in l)t[c]=l[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;s.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):void(this.pending_close=!1,o(this.init_done,'close before init'),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?i.deflateEnd(this.strm):(this.mode===t.INFLATE||this.mode===t.GUNZIP||this.mode===t.INFLATERAW||this.mode===t.UNZIP)&&d.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},s.prototype.write=function(e,t,n,r,s,o,a){return this._write(!0,e,t,n,r,s,o,a)},s.prototype.writeSync=function(e,t,n,r,s,o,a){return this._write(!1,e,t,n,r,s,o,a)},s.prototype._write=function(n,s,a,i,d,l,c,u){if(o.equal(arguments.length,8),o(this.init_done,'write before init'),o(this.mode!==t.NONE,'already finalized'),o.equal(!1,this.write_in_progress,'write already in progress'),o.equal(!1,this.pending_close,'close is pending'),this.write_in_progress=!0,o.equal(!1,void 0===s,'must provide flush value'),this.write_in_progress=!0,s!==t.Z_NO_FLUSH&&s!==t.Z_PARTIAL_FLUSH&&s!==t.Z_SYNC_FLUSH&&s!==t.Z_FULL_FLUSH&&s!==t.Z_FINISH&&s!==t.Z_BLOCK)throw new Error('Invalid flush value');if(null==a&&(a=e.alloc(0),d=0,i=0),this.strm.avail_in=d,this.strm.input=a,this.strm.next_in=i,this.strm.avail_out=u,this.strm.output=l,this.strm.next_out=c,this.flush=s,!n)return this._process(),this._checkError()?this._afterSync():void 0;var p=this;return r.nextTick(function(){p._process(),p._after()}),this},s.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},s.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=i.deflate(this.strm,this.flush);break;case t.UNZIP:switch(0<this.strm.avail_in&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(this.strm.input[e]!==31){this.mode=t.INFLATE;break}else if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;this.strm.input[e]===139?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error('invalid number of gzip magic number bytes read');}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=d.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=d.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=d.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));0<this.strm.avail_in&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=d.inflate(this.strm,this.flush);break;default:throw new Error('Unknown mode '+this.mode);}},s.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error('unexpected end of file'),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error('Missing dictionary'):this._error('Bad dictionary'),!1;default:return this._error('Zlib error'),!1;}return!0},s.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},s.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},s.prototype.init=function(e,n,r,s,a){o(4===arguments.length||5===arguments.length,'init(windowBits, level, memLevel, strategy, [dictionary])'),o(8<=e&&15>=e,'invalid windowBits'),o(-1<=n&&9>=n,'invalid compression level'),o(1<=r&&9>=r,'invalid memlevel'),o(s===t.Z_FILTERED||s===t.Z_HUFFMAN_ONLY||s===t.Z_RLE||s===t.Z_FIXED||s===t.Z_DEFAULT_STRATEGY,'invalid strategy'),this._init(n,e,r,s,a),this._setDictionary()},s.prototype.params=function(){throw new Error('deflateParams Not supported')},s.prototype.reset=function(){this._reset(),this._setDictionary()},s.prototype._init=function(e,n,r,s,o){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=s,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=i.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=d.inflateInit2(this.strm,this.windowBits);break;default:throw new Error('Unknown mode '+this.mode);}this.err!==t.Z_OK&&this._error('Init error'),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},s.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=i.deflateSetDictionary(this.strm,this.dictionary);break;default:}this.err!==t.Z_OK&&this._error('Failed to set dictionary')}},s.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=i.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=d.inflateReset(this.strm);break;default:}this.err!==t.Z_OK&&this._error('Failed to reset stream')},t.Zlib=s}).call(t,n(6).Buffer,n(0))},function(e,t,n){'use strict';(function(e){function r(e,t,n){function r(){for(var t;null!==(t=e.read());)o.push(t),a+=t.length;e.once('readable',r)}function s(){var t=null,r;a>=S?t=new RangeError(E):r=f.concat(o,a),o=[],e.close(),n(t,r)}var o=[],a=0;e.on('error',function(t){e.removeListener('end',s),e.removeListener('readable',r),n(t)}),e.on('end',s),e.end(t),r()}function s(e,t){if('string'==typeof t&&(t=f.from(t)),!f.isBuffer(t))throw new TypeError('Not a string or buffer');var n=e._finishFlushFlag;return e._processChunk(t,n)}function a(e){return this instanceof a?void h.call(this,e,b.DEFLATE):new a(e)}function i(e){return this instanceof i?void h.call(this,e,b.INFLATE):new i(e)}function d(e){return this instanceof d?void h.call(this,e,b.GZIP):new d(e)}function l(e){return this instanceof l?void h.call(this,e,b.GUNZIP):new l(e)}function c(e){return this instanceof c?void h.call(this,e,b.DEFLATERAW):new c(e)}function u(e){return this instanceof u?void h.call(this,e,b.INFLATERAW):new u(e)}function p(e){return this instanceof p?void h.call(this,e,b.UNZIP):new p(e)}function o(e){return e===b.Z_NO_FLUSH||e===b.Z_PARTIAL_FLUSH||e===b.Z_SYNC_FLUSH||e===b.Z_FULL_FLUSH||e===b.Z_FINISH||e===b.Z_BLOCK}function h(e,n){var r=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,m.call(this,e),e.flush&&!o(e.flush))throw new Error('Invalid flush flag: '+e.flush);if(e.finishFlush&&!o(e.finishFlush))throw new Error('Invalid flush flag: '+e.finishFlush);if(this._flushFlag=e.flush||b.Z_NO_FLUSH,this._finishFlushFlag='undefined'==typeof e.finishFlush?b.Z_FINISH:e.finishFlush,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error('Invalid chunk size: '+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error('Invalid windowBits: '+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error('Invalid compression level: '+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error('Invalid memLevel: '+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error('Invalid strategy: '+e.strategy);if(e.dictionary&&!f.isBuffer(e.dictionary))throw new Error('Invalid dictionary: it should be a Buffer instance');this._handle=new b.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){_(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit('error',r)};var a=t.Z_DEFAULT_COMPRESSION;'number'==typeof e.level&&(a=e.level);var i=t.Z_DEFAULT_STRATEGY;'number'==typeof e.strategy&&(i=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,a,e.memLevel||t.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=f.allocUnsafe(this._chunkSize),this._offset=0,this._level=a,this._strategy=i,this.once('end',this.close),Object.defineProperty(this,'_closed',{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function _(t,n){n&&e.nextTick(n);t._handle&&(t._handle.close(),t._handle=null)}function g(e){e.emit('close')}var f=n(6).Buffer,m=n(80).Transform,b=n(60),y=n(34),R=n(1).ok,S=n(6).kMaxLength,E='Cannot create final Buffer. It would be larger than 0x'+S.toString(16)+' bytes';b.Z_MIN_WINDOWBITS=8,b.Z_MAX_WINDOWBITS=15,b.Z_DEFAULT_WINDOWBITS=15,b.Z_MIN_CHUNK=64,b.Z_MAX_CHUNK=Infinity,b.Z_DEFAULT_CHUNK=16384,b.Z_MIN_MEMLEVEL=1,b.Z_MAX_MEMLEVEL=9,b.Z_DEFAULT_MEMLEVEL=8,b.Z_MIN_LEVEL=-1,b.Z_MAX_LEVEL=9,b.Z_DEFAULT_LEVEL=b.Z_DEFAULT_COMPRESSION;for(var w=Object.keys(b),P=0,C;P<w.length;P++)C=w[P],C.match(/^Z/)&&Object.defineProperty(t,C,{enumerable:!0,value:b[C],writable:!1});for(var k={Z_OK:b.Z_OK,Z_STREAM_END:b.Z_STREAM_END,Z_NEED_DICT:b.Z_NEED_DICT,Z_ERRNO:b.Z_ERRNO,Z_STREAM_ERROR:b.Z_STREAM_ERROR,Z_DATA_ERROR:b.Z_DATA_ERROR,Z_MEM_ERROR:b.Z_MEM_ERROR,Z_BUF_ERROR:b.Z_BUF_ERROR,Z_VERSION_ERROR:b.Z_VERSION_ERROR},v=Object.keys(k),O=0,T;O<v.length;O++)T=v[O],k[k[T]]=T;Object.defineProperty(t,'codes',{enumerable:!0,value:Object.freeze(k),writable:!1}),t.Deflate=a,t.Inflate=i,t.Gzip=d,t.Gunzip=l,t.DeflateRaw=c,t.InflateRaw=u,t.Unzip=p,t.createDeflate=function(e){return new a(e)},t.createInflate=function(e){return new i(e)},t.createDeflateRaw=function(e){return new c(e)},t.createInflateRaw=function(e){return new u(e)},t.createGzip=function(e){return new d(e)},t.createGunzip=function(e){return new l(e)},t.createUnzip=function(e){return new p(e)},t.deflate=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new a(t),e,n)},t.deflateSync=function(e,t){return s(new a(t),e)},t.gzip=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new d(t),e,n)},t.gzipSync=function(e,t){return s(new d(t),e)},t.deflateRaw=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new c(t),e,n)},t.deflateRawSync=function(e,t){return s(new c(t),e)},t.unzip=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new p(t),e,n)},t.unzipSync=function(e,t){return s(new p(t),e)},t.inflate=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new i(t),e,n)},t.inflateSync=function(e,t){return s(new i(t),e)},t.gunzip=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new l(t),e,n)},t.gunzipSync=function(e,t){return s(new l(t),e)},t.inflateRaw=function(e,t,n){return'function'==typeof t&&(n=t,t={}),r(new u(t),e,n)},t.inflateRawSync=function(e,t){return s(new u(t),e)},y.inherits(h,m),h.prototype.params=function(n,r,s){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError('Invalid compression level: '+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError('Invalid strategy: '+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(b.Z_SYNC_FLUSH,function(){R(o._handle,'zlib binding closed'),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,s&&s())})}else e.nextTick(s)},h.prototype.reset=function(){return R(this._handle,'zlib binding closed'),this._handle.reset()},h.prototype._flush=function(e){this._transform(f.alloc(0),'',e)},h.prototype.flush=function(t,n){var r=this,s=this._writableState;'function'!=typeof t&&(t!==void 0||n)||(n=t,t=b.Z_FULL_FLUSH),s.ended?n&&e.nextTick(n):s.ending?n&&this.once('end',n):s.needDrain?n&&this.once('drain',function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(f.alloc(0),'',n))},h.prototype.close=function(t){_(this,t),e.nextTick(g,this)},h.prototype._transform=function(e,t,n){var r=this._writableState,s=r.ending||r.ended,o=s&&(!e||r.length===e.length),a;return null===e||f.isBuffer(e)?this._handle?void(o?a=this._finishFlushFlag:(a=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||b.Z_NO_FLUSH)),this._processChunk(e,a,n)):n(new Error('zlib binding closed')):n(new Error('invalid input'))},h.prototype._processChunk=function(e,t,n){function r(u,p){if(this&&(this.buffer=null,this.callback=null),!i._hadError){var h=o-p;if(R(0<=h,'have should not go down'),0<h){var _=i._buffer.slice(i._offset,i._offset+h);i._offset+=h,d?i.push(_):(l.push(_),c+=_.length)}if((0===p||i._offset>=i._chunkSize)&&(o=i._chunkSize,i._offset=0,i._buffer=f.allocUnsafe(i._chunkSize)),0===p){if(a+=s-u,s=u,!d)return!0;var g=i._handle.write(t,e,a,s,i._buffer,i._offset,i._chunkSize);return g.callback=r,void(g.buffer=e)}return!!d&&void n()}}var s=e&&e.length,o=this._chunkSize-this._offset,a=0,i=this,d='function'==typeof n;if(!d){var l=[],c=0,u;this.on('error',function(e){u=e}),R(this._handle,'zlib binding closed');do var p=this._handle.writeSync(t,e,a,s,this._buffer,this._offset,o);while(!this._hadError&&r(p[0],p[1]));if(this._hadError)throw u;if(c>=S)throw _(this),new RangeError(E);var h=f.concat(l,c);return _(this),h}R(this._handle,'zlib binding closed');var g=this._handle.write(t,e,a,s,this._buffer,this._offset,o);g.buffer=e,g.callback=r},y.inherits(a,h),y.inherits(i,h),y.inherits(d,h),y.inherits(l,h),y.inherits(c,h),y.inherits(u,h),y.inherits(p,h)}).call(t,n(0))},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e){'use strict';function t(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function r(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function s(e){t(this,s);var r=n(this,Object.getPrototypeOf(s).call(this,e));return r.name=r.constructor.name,r.message=e,'function'==typeof Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=new Error(e).stack,r}return r(s,e),s}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports=s},function(e,t){t.read=function(t,n,r,o,a){var c=8*a-o-1,u=(1<<c)-1,p=u>>1,h=-7,_=r?a-1:0,i=r?-1:1,d=t[n+_],s,e;for(_+=i,s=d&(1<<-h)-1,d>>=-h,h+=c;0<h;s=256*s+t[n+_],_+=i,h-=8);for(e=s&(1<<-h)-1,s>>=-h,h+=o;0<h;e=256*e+t[n+_],_+=i,h-=8);if(0===s)s=1-p;else{if(s===u)return e?NaN:(d?-1:1)*Infinity;e+=l(2,o),s-=p}return(d?-1:1)*e*l(2,s-o)},t.write=function(t,n,r,o,u,p){var h=8*p-u-1,_=(1<<h)-1,g=_>>1,f=23===u?5.960464477539063e-8-6.617444900424222e-24:0,b=o?0:p-1,i=o?1:-1,d=0>n||0===n&&0>1/n?1:0,s,y,m;for(n=Math.abs(n),isNaN(n)||n===Infinity?(y=isNaN(n)?1:0,s=_):(s=a(Math.log(n)/Math.LN2),1>n*(m=l(2,-s))&&(s--,m*=2),n+=1<=s+g?f/m:f*l(2,1-g),2<=n*m&&(s++,m/=2),s+g>=_?(y=0,s=_):1<=s+g?(y=(n*m-1)*l(2,u),s+=g):(y=n*l(2,g-1)*l(2,u),s=0));8<=u;t[r+b]=255&y,b+=i,y/=256,u-=8);for(s=s<<u|y,h+=u;0<h;t[r+b]=255&s,b+=i,s/=256,h-=8);t[r+b-i]|=128*d}},function(e,n,r){'use strict';var s;(function(o){function a(s,o,a){var i=0,e=[],S=0,n=!1,P=[],O=[],T=!1,y=!1,j=-1,x,A,I,L,N,m,f,u,r;if(a=a||{},x=a.encoding||'UTF8',r=a.numRounds||1,r!==parseInt(r,10)||1>r)throw Error('numRounds must a integer >= 1');if('SHA-1'===s)N=512,m=C,f=k,L=160,u=function(e){return e.slice()};else if(0===s.lastIndexOf('SHA-',0)){if(m=function(e,t){return w(e,t,s)},f=function(t,n,r,o){var e,a;if('SHA-224'===s||'SHA-256'===s)e=(n+65>>>9<<4)+15,a=16;else if('SHA-384'===s||'SHA-512'===s)e=(n+129>>>10<<5)+31,a=32;else throw Error('Unexpected error in SHA-2 implementation');for(;t.length<=e;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[e]=4294967295&n,t[e-1]=0|n/4294967296,r=t.length,n=0;n<r;n+=a)o=w(t.slice(n,n+a),o,s);if('SHA-224'===s)t=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else if('SHA-256'===s)t=o;else if('SHA-384'===s)t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b];else if('SHA-512'===s)t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b,o[6].a,o[6].b,o[7].a,o[7].b];else throw Error('Unexpected error in SHA-2 implementation');return t},u=function(e){return e.slice()},'SHA-224'===s)N=512,L=224;else if('SHA-256'===s)N=512,L=256;else if('SHA-384'===s)N=1024,L=384;else if('SHA-512'===s)N=1024,L=512;else throw Error('Chosen SHA variant is not supported');}else if(0===s.lastIndexOf('SHA3-',0)||0===s.lastIndexOf('SHAKE',0)){var t=6;if(m=v,u=function(t){var n=[],r;for(r=0;5>r;r+=1)n[r]=t[r].slice();return n},j=1,'SHA3-224'===s)N=1152,L=224;else if('SHA3-256'===s)N=1088,L=256;else if('SHA3-384'===s)N=832,L=384;else if('SHA3-512'===s)N=576,L=512;else if('SHAKE128'===s)N=1344,L=-1,t=31,y=!0;else if('SHAKE256'===s)N=1088,L=-1,t=31,y=!0;else throw Error('Chosen SHA variant is not supported');f=function(r,s,o,e,a){o=N;var i=t,c=[],u=o>>>5,n=0,l=s>>>5,d;for(d=0;d<l&&s>=o;d+=u)e=v(r.slice(d,d+u),e),s-=o;for(r=r.slice(d),s%=o;r.length<u;)r.push(0);for(d=s>>>3,r[d>>2]^=i<<8*(d%4),r[u-1]^=2147483648,e=v(r,e);32*c.length<a&&(r=e[n%5][0|n/5],c.push(r.b),!(32*c.length>=a));)c.push(r.a),n+=1,0==64*n%o&&v(null,e);return c}}else throw Error('Chosen SHA variant is not supported');I=R(o,x,j),A=E(s),this.setHMACKey=function(e,t,r){var o;if(!0==n)throw Error('HMAC key already set');if(!0==T)throw Error('Cannot set HMAC key after calling update');if(!0==y)throw Error('SHAKE is not supported for HMAC');if(x=(r||{}).encoding||'UTF8',t=R(t,x,j)(e),e=t.binLen,t=t.value,o=N>>>3,r=o/4-1,o<e/8){for(t=f(t,e,0,E(s),L);t.length<=r;)t.push(0);t[r]&=4294967040}else if(o>e/8){for(;t.length<=r;)t.push(0);t[r]&=4294967040}for(e=0;e<=r;e+=1)P[e]=909522486^t[e],O[e]=1549556828^t[e];A=m(P,A),i=N,n=!0},this.update=function(t){var n=0,r=N>>>5,s,o,a;for(s=I(t,e,S),t=s.binLen,o=s.value,s=t>>>5,a=0;a<s;a+=r)n+N<=t&&(A=m(o.slice(a,a+r),A),n+=N);i+=n,e=o.slice(n>>>5),S=t%N,T=!0},this.getHash=function(t,o){var a,b,g,d;if(!0==n)throw Error('Cannot call getHash after setting HMAC key');if(g=_(o),!0==y){if(-1===g.shakeLen)throw Error('shakeLen must be specified in options');L=g.shakeLen}switch(t){case'HEX':a=function(e){return l(e,L,j,g)};break;case'B64':a=function(e){return c(e,L,j,g)};break;case'BYTES':a=function(e){return p(e,L,j)};break;case'ARRAYBUFFER':try{b=new ArrayBuffer(0)}catch(e){throw Error('ARRAYBUFFER not supported by this environment')}a=function(e){return h(e,L,j)};break;default:throw Error('format must be HEX, B64, BYTES, or ARRAYBUFFER');}for(d=f(e.slice(),S,i,u(A),L),b=1;b<r;b+=1)!0==y&&0!=L%32&&(d[d.length-1]&=16777215>>>24-L%32),d=f(d,L,0,E(s),L);return a(d)},this.getHMAC=function(t,r){var o,a,g,d;if(!1==n)throw Error('Cannot call getHMAC without first setting HMAC key');switch(g=_(r),t){case'HEX':o=function(e){return l(e,L,j,g)};break;case'B64':o=function(e){return c(e,L,j,g)};break;case'BYTES':o=function(e){return p(e,L,j)};break;case'ARRAYBUFFER':try{o=new ArrayBuffer(0)}catch(e){throw Error('ARRAYBUFFER not supported by this environment')}o=function(e){return h(e,L,j)};break;default:throw Error('outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER');}return a=f(e.slice(),S,i,u(A),L),d=m(O,E(s)),d=f(a,L,N,d,L),o(d)}}function i(e,t){this.a=e,this.b=t}function l(t,r,s,o){var e='';r/=8;var a,n,i;for(i=-1===s?3:0,a=0;a<r;a+=1)n=t[a>>>2]>>>8*(i+a%4*s),e+='0123456789abcdef'.charAt(15&n>>>4)+'0123456789abcdef'.charAt(15&n);return o.outputUpper?e.toUpperCase():e}function c(t,r,s,o){var e='',a=r/8,n,i,d,l;for(l=-1===s?3:0,n=0;n<a;n+=3)for(i=n+1<a?t[n+1>>>2]:0,d=n+2<a?t[n+2>>>2]:0,d=(255&t[n>>>2]>>>8*(l+n%4*s))<<16|(255&i>>>8*(l+(n+1)%4*s))<<8|255&d>>>8*(l+(n+2)%4*s),i=0;4>i;i+=1)e+=8*n+6*i<=r?'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(63&d>>>6*(3-i)):o.b64Pad;return e}function p(t,n,r){var s='';n/=8;var e,o,a;for(a=-1===r?3:0,e=0;e<n;e+=1)o=255&t[e>>>2]>>>8*(a+e%4*r),s+=u(o);return s}function h(t,n,r){n/=8;var s=new ArrayBuffer(n),o,e,a;for(a=new Uint8Array(s),e=-1===r?3:0,o=0;o<n;o+=1)a[o]=255&t[o>>>2]>>>8*(e+o%4*r);return s}function _(e){var t={outputUpper:!1,b64Pad:'=',shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty('b64Pad')&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty('shakeLen')){if(0!=e.shakeLen%8)throw Error('shakeLen must be a multiple of 8');t.shakeLen=e.shakeLen}if('boolean'!=typeof t.outputUpper)throw Error('Invalid outputUpper formatting option');if('string'!=typeof t.b64Pad)throw Error('Invalid b64Pad formatting option');return t}function R(e,n,s){switch(n){case'UTF8':case'UTF16BE':case'UTF16LE':break;default:throw Error('encoding must be UTF8, UTF16BE, or UTF16LE');}switch(e){case'HEX':e=function(e,t,n){var r=e.length,o,a,i,d,l,p;if(0!=r%2)throw Error('String of HEX type must be in byte increments');for(t=t||[0],n=n||0,l=n>>>3,p=-1===s?3:0,o=0;o<r;o+=2){if(a=parseInt(e.substr(o,2),16),isNaN(a))throw Error('String of HEX type contains invalid characters');for(d=(o>>>1)+l,i=d>>>2;t.length<=i;)t.push(0);t[i]|=a<<8*(p+d%4*s)}return{value:t,binLen:4*r+n}};break;case'TEXT':e=function(e,o,a){var i=0,d,c,l,p,_,g,u,r;if(o=o||[0],a=a||0,_=a>>>3,'UTF8'===n)for(r=-1===s?3:0,l=0;l<e.length;l+=1)for(d=e.charCodeAt(l),c=[],128>d?c.push(d):2048>d?(c.push(192|d>>>6),c.push(128|63&d)):55296>d||57344<=d?c.push(224|d>>>12,128|63&d>>>6,128|63&d):(l+=1,d=65536+((1023&d)<<10|1023&e.charCodeAt(l)),c.push(240|d>>>18,128|63&d>>>12,128|63&d>>>6,128|63&d)),p=0;p<c.length;p+=1){for(u=i+_,g=u>>>2;o.length<=g;)o.push(0);o[g]|=c[p]<<8*(r+u%4*s),i+=1}else if('UTF16BE'===n||'UTF16LE'===n)for(r=-1===s?2:0,c='UTF16LE'==n&&1!==s||'UTF16LE'!=n&&1===s,l=0;l<e.length;l+=1){for(d=e.charCodeAt(l),!0===c&&(p=255&d,d=p<<8|d>>>8),u=i+_,g=u>>>2;o.length<=g;)o.push(0);o[g]|=d<<8*(r+u%4*s),i+=2}return{value:o,binLen:8*i+a}};break;case'B64':e=function(e,n,o){var a=0,i,d,l,p,h,_,u,r;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error('Invalid character in base-64 string');if(d=e.indexOf('='),e=e.replace(/\=/g,''),-1!==d&&d<e.length)throw Error('Invalid \'=\' found in base-64 string');for(n=n||[0],o=o||0,_=o>>>3,r=-1===s?3:0,d=0;d<e.length;d+=4){for(h=e.substr(d,4),l=p=0;l<h.length;l+=1)i='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(h[l]),p|=i<<18-6*l;for(l=0;l<h.length-1;l+=1){for(u=a+_,i=u>>>2;n.length<=i;)n.push(0);n[i]|=(255&p>>>16-8*l)<<8*(r+u%4*s),a+=1}}return{value:n,binLen:8*a+o}};break;case'BYTES':e=function(e,t,n){var r,o,a,i,d,l;for(t=t||[0],n=n||0,a=n>>>3,l=-1===s?3:0,o=0;o<e.length;o+=1)r=e.charCodeAt(o),d=o+a,i=d>>>2,t.length<=i&&t.push(0),t[i]|=r<<8*(l+d%4*s);return{value:t,binLen:8*e.length+n}};break;case'ARRAYBUFFER':try{e=new ArrayBuffer(0)}catch(t){throw Error('ARRAYBUFFER not supported by this environment')}e=function(e,t,n){var r,o,a,i,d,l;for(t=t||[0],n=n||0,o=n>>>3,d=-1===s?3:0,l=new Uint8Array(e),r=0;r<e.byteLength;r+=1)i=r+o,a=i>>>2,t.length<=a&&t.push(0),t[a]|=l[r]<<8*(d+i%4*s);return{value:t,binLen:8*e.byteLength+n}};break;default:throw Error('format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER');}return e}function m(e,t){return e<<t|e>>>32-t}function f(e,t){return 32<t?(t-=32,new i(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0===t?e:new i(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t)}function g(e,t){return e>>>t|e<<32-t}function b(e,t){var n=null,n=new i(e.a,e.b);return n=32>=t?new i(n.a>>>t|4294967295&n.b<<32-t,n.b>>>t|4294967295&n.a<<32-t):new i(n.b>>>t-32|4294967295&n.a<<64-t,n.a>>>t-32|4294967295&n.b<<64-t)}function t(e,t){var n=null;return n=32>=t?new i(e.a>>>t,e.b>>>t|4294967295&e.a<<32-t):new i(0,e.a>>>t-32)}function S(e,t,n){return e&t^~e&n}function P(e,t,n){return new i(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function O(e,t,n){return e&t^e&n^t&n}function T(e,t,n){return new i(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function j(e){return g(e,2)^g(e,13)^g(e,22)}function I(e){var t=b(e,28),n=b(e,34);return e=b(e,39),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function N(e){return g(e,6)^g(e,11)^g(e,25)}function M(e){var t=b(e,14),n=b(e,18);return e=b(e,41),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function U(e){return g(e,7)^g(e,18)^e>>>3}function Y(e){var n=b(e,1),r=b(e,8);return e=t(e,7),new i(n.a^r.a^e.a,n.b^r.b^e.b)}function Q(e){return g(e,17)^g(e,19)^e>>>10}function $(e){var n=b(e,19),r=b(e,61);return e=t(e,6),new i(n.a^r.a^e.a,n.b^r.b^e.b)}function ee(e,t){var n=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(n>>>16))<<16|65535&n}function G(t,n,r,s){var e=(65535&t)+(65535&n)+(65535&r)+(65535&s);return(65535&(t>>>16)+(n>>>16)+(r>>>16)+(s>>>16)+(e>>>16))<<16|65535&e}function te(t,n,r,s,e){var o=(65535&t)+(65535&n)+(65535&r)+(65535&s)+(65535&e);return(65535&(t>>>16)+(n>>>16)+(r>>>16)+(s>>>16)+(e>>>16)+(o>>>16))<<16|65535&o}function H(t,n){var r,s,e;return r=(65535&t.b)+(65535&n.b),s=(t.b>>>16)+(n.b>>>16)+(r>>>16),e=(65535&s)<<16|65535&r,r=(65535&t.a)+(65535&n.a)+(s>>>16),s=(t.a>>>16)+(n.a>>>16)+(r>>>16),new i((65535&s)<<16|65535&r,e)}function ne(t,r,s,o){var e,a,n;return e=(65535&t.b)+(65535&r.b)+(65535&s.b)+(65535&o.b),a=(t.b>>>16)+(r.b>>>16)+(s.b>>>16)+(o.b>>>16)+(e>>>16),n=(65535&a)<<16|65535&e,e=(65535&t.a)+(65535&r.a)+(65535&s.a)+(65535&o.a)+(a>>>16),a=(t.a>>>16)+(r.a>>>16)+(s.a>>>16)+(o.a>>>16)+(e>>>16),new i((65535&a)<<16|65535&e,n)}function re(t,r,s,o,e){var a,n,d;return a=(65535&t.b)+(65535&r.b)+(65535&s.b)+(65535&o.b)+(65535&e.b),n=(t.b>>>16)+(r.b>>>16)+(s.b>>>16)+(o.b>>>16)+(e.b>>>16)+(a>>>16),d=(65535&n)<<16|65535&a,a=(65535&t.a)+(65535&r.a)+(65535&s.a)+(65535&o.a)+(65535&e.a)+(n>>>16),n=(t.a>>>16)+(r.a>>>16)+(s.a>>>16)+(o.a>>>16)+(e.a>>>16)+(a>>>16),new i((65535&n)<<16|65535&a,d)}function y(e,t){return new i(e.a^t.a,e.b^t.b)}function E(e){var t=[],n;if('SHA-1'===e)t=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf('SHA-',0))switch(t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case'SHA-224':break;case'SHA-256':t=n;break;case'SHA-384':t=[new i(3418070365,t[0]),new i(1654270250,t[1]),new i(2438529370,t[2]),new i(355462360,t[3]),new i(1731405415,t[4]),new i(41048885895,t[5]),new i(3675008525,t[6]),new i(1203062813,t[7])];break;case'SHA-512':t=[new i(n[0],4089235720),new i(n[1],2227873595),new i(n[2],4271175723),new i(n[3],1595750129),new i(n[4],2917565137),new i(n[5],725511199),new i(n[6],4215389547),new i(n[7],327033209)];break;default:throw Error('Unknown SHA variant');}else if(0===e.lastIndexOf('SHA3-',0)||0===e.lastIndexOf('SHAKE',0))for(e=0;5>e;e+=1)t[e]=[new i(0,0),new i(0,0),new i(0,0),new i(0,0),new i(0,0)];else throw Error('No SHA variants supported');return t}function C(t,r){var s=[],o,e,a,n,i,l,c;for(o=r[0],e=r[1],a=r[2],n=r[3],i=r[4],c=0;80>c;c+=1)s[c]=16>c?t[c]:m(s[c-3]^s[c-8]^s[c-14]^s[c-16],1),l=20>c?te(m(o,5),e&a^~e&n,i,1518500249,s[c]):40>c?te(m(o,5),e^a^n,i,1859775393,s[c]):60>c?te(m(o,5),O(e,a,n),i,2400959708,s[c]):te(m(o,5),e^a^n,i,3395469782,s[c]),i=n,n=a,a=m(e,30),e=o,o=l;return r[0]=ee(o,r[0]),r[1]=ee(e,r[1]),r[2]=ee(a,r[2]),r[3]=ee(n,r[3]),r[4]=ee(i,r[4]),r}function k(t,n,r,s){var e;for(e=(n+65>>>9<<4)+15;t.length<=e;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[e]=4294967295&n,t[e-1]=0|n/4294967296,n=t.length,e=0;e<n;e+=16)s=C(t.slice(e,e+16),s);return s}function w(s,o,a){var c=[],_,e,h,n,g,l,p,f,m,b,u,r,t,R,E,y,w,k,v,x,A,C,D;if('SHA-224'===a||'SHA-256'===a)b=64,r=1,C=Number,t=ee,R=G,E=te,y=U,w=Q,k=j,v=N,A=O,x=S,D=L;else if('SHA-384'===a||'SHA-512'===a)b=80,r=2,C=i,t=H,R=ne,E=re,y=Y,w=$,k=I,v=M,A=T,x=P,D=d;else throw Error('Unexpected error in SHA-2 implementation');for(a=o[0],_=o[1],e=o[2],h=o[3],n=o[4],g=o[5],l=o[6],p=o[7],u=0;u<b;u+=1)16>u?(m=u*r,f=s.length<=m?0:s[m],m=s.length<=m+1?0:s[m+1],c[u]=new C(f,m)):c[u]=R(w(c[u-2]),c[u-7],y(c[u-15]),c[u-16]),f=E(p,v(n),x(n,g,l),D[u],c[u]),m=t(k(a),A(a,_,e)),p=l,l=g,g=n,n=t(h,f),h=e,e=_,_=a,a=t(f,m);return o[0]=t(a,o[0]),o[1]=t(_,o[1]),o[2]=t(e,o[2]),o[3]=t(h,o[3]),o[4]=t(n,o[4]),o[5]=t(g,o[5]),o[6]=t(l,o[6]),o[7]=t(p,o[7]),o}function v(t,r){var s=[],o=[],a,d,e,l;if(null!==t)for(d=0;d<t.length;d+=2)r[(d>>>1)%5][0|(d>>>1)/5]=y(r[(d>>>1)%5][0|(d>>>1)/5],new i(t[d+1],t[d]));for(a=0;24>a;a+=1){for(l=E('SHA3-'),d=0;5>d;d+=1){e=r[d][0];var n=r[d][1],c=r[d][2],u=r[d][3],p=r[d][4];s[d]=new i(e.a^n.a^c.a^u.a^p.a,e.b^n.b^c.b^u.b^p.b)}for(d=0;5>d;d+=1)o[d]=y(s[(d+4)%5],f(s[(d+1)%5],1));for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)r[d][e]=y(r[d][e],o[d]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)l[e][(2*d+3*e)%5]=f(r[d][e],x[d][e]);for(d=0;5>d;d+=1)for(e=0;5>e;e+=1)r[d][e]=y(l[d][e],new i(~l[(d+1)%5][e].a&l[(d+2)%5][e].a,~l[(d+1)%5][e].b&l[(d+2)%5][e].b));r[0][0]=y(r[0][0],A[a])}return r}var L,d,x,A;L=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=[new i(L[0],3609767458),new i(L[1],602891725),new i(L[2],3964484399),new i(L[3],2173295548),new i(L[4],4081628472),new i(L[5],3053834265),new i(L[6],2937671579),new i(L[7],3664609560),new i(L[8],2734883394),new i(L[9],1164996542),new i(L[10],1323610764),new i(L[11],3590304994),new i(L[12],4068182383),new i(L[13],991336113),new i(L[14],633803317),new i(L[15],3479774868),new i(L[16],2666613458),new i(L[17],944711139),new i(L[18],2341262773),new i(L[19],2007800933),new i(L[20],1495990901),new i(L[21],1856431235),new i(L[22],3175218132),new i(L[23],2198950837),new i(L[24],3999719339),new i(L[25],766784016),new i(L[26],2566594879),new i(L[27],3203337956),new i(L[28],1034457026),new i(L[29],2466948901),new i(L[30],3758326383),new i(L[31],168717936),new i(L[32],1188179964),new i(L[33],1546045734),new i(L[34],1522805485),new i(L[35],2643833823),new i(L[36],2343527390),new i(L[37],1014477480),new i(L[38],1206759142),new i(L[39],344077627),new i(L[40],1290863460),new i(L[41],3158454273),new i(L[42],3505952657),new i(L[43],106217008),new i(L[44],3606008344),new i(L[45],1432725776),new i(L[46],1467031594),new i(L[47],851169720),new i(L[48],3100823752),new i(L[49],1363258195),new i(L[50],3750685593),new i(L[51],3785050280),new i(L[52],3318307427),new i(L[53],3812723403),new i(L[54],2003034995),new i(L[55],3602036899),new i(L[56],1575990012),new i(L[57],1125592928),new i(L[58],2716904306),new i(L[59],442776044),new i(L[60],593698344),new i(L[61],3733110249),new i(L[62],2999351573),new i(L[63],3815920427),new i(3391569614,3928383900),new i(3515267271,566280711),new i(3940187606,3454069534),new i(4118630271,4000239992),new i(116418474,1914138554),new i(174292421,2731055270),new i(289380356,3203993006),new i(460393269,320620315),new i(685471733,587496836),new i(852142971,1086792851),new i(1017036298,365543100),new i(1126000580,2618297676),new i(1288033470,3409855158),new i(1501505948,4234509866),new i(1607167915,987167468),new i(1816402316,1246189591)],A=[new i(0,1),new i(0,32898),new i(2147483648,32906),new i(2147483648,2147516416),new i(0,32907),new i(0,2147483649),new i(2147483648,2147516545),new i(2147483648,32777),new i(0,138),new i(0,136),new i(0,2147516425),new i(0,2147483658),new i(0,2147516555),new i(2147483648,139),new i(2147483648,32905),new i(2147483648,32771),new i(2147483648,32770),new i(2147483648,128),new i(0,32778),new i(2147483648,2147483658),new i(2147483648,2147516545),new i(2147483648,32896),new i(0,2147483649),new i(2147483648,2147516424)],x=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],(s=function(){return a}.call(n,r,n,e),!(s!==void 0&&(e.exports=s)))})(this)},function(e,t,n){(function(e,r){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(o){function d(e){throw new RangeError(I[e])}function i(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function l(e,t){var n=e.split('@'),r='';1<n.length&&(r=n[0]+'@',e=n[1]),e=e.replace(A,'.');var s=e.split('.'),o=i(s,t).join('.');return r+o}function c(e){for(var t=[],n=0,r=e.length,s,o;n<r;)s=e.charCodeAt(n++),55296<=s&&56319>=s&&n<r?(o=e.charCodeAt(n++),56320==(64512&o)?t.push(((1023&s)<<10)+(1023&o)+65536):(t.push(s),n--)):t.push(s);return t}function p(e){return i(e,function(e){var t='';return 65535<e&&(e-=65536,t+=D(55296|1023&e>>>10),e=56320|1023&e),t+=D(e),t}).join('')}function h(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function _(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function g(e,t,n){var r=0;for(e=n?N(e/v):e>>1,e+=N(e/t);e>L*C>>1;r+=E)e=N(e/L);return N(r+(L+1)*e/(e+w))}function f(e){var r=[],s=e.length,o=0,a=T,n=O,i,l,c,u,_,f,m,b,y,t;for(l=e.lastIndexOf(x),0>l&&(l=0),c=0;c<l;++c)128<=e.charCodeAt(c)&&d('not-basic'),r.push(e.charCodeAt(c));for(u=0<l?l+1:0;u<s;){for(_=o,f=1,m=E;;m+=E){if(u>=s&&d('invalid-input'),b=h(e.charCodeAt(u++)),(b>=E||b>N((S-o)/f))&&d('overflow'),o+=b*f,y=m<=n?P:m>=n+C?C:m-n,b<y)break;t=E-y,f>N(S/t)&&d('overflow'),f*=t}i=r.length+1,n=g(o-_,i,0==_),N(o/i)>S-a&&d('overflow'),a+=N(o/i),o%=i,r.splice(o++,0,a)}return p(r)}function m(e){var r=[],s,n,o,a,i,l,u,p,h,f,t,m,b,y,R;for(e=c(e),m=e.length,s=T,n=0,i=O,l=0;l<m;++l)t=e[l],128>t&&r.push(D(t));for(o=a=r.length,a&&r.push(x);o<m;){for(u=S,l=0;l<m;++l)t=e[l],t>=s&&t<u&&(u=t);for(b=o+1,u-s>N((S-n)/b)&&d('overflow'),n+=(u-s)*b,s=u,l=0;l<m;++l)if(t=e[l],t<s&&++n>S&&d('overflow'),t==s){for(p=n,h=E;;h+=E){if(f=h<=i?P:h>=i+C?C:h-i,p<f)break;R=p-f,y=E-f,r.push(D(_(f+R%y,0))),p=N(R/y)}r.push(D(_(p,0))),i=g(n,b,o==a),n=0,++o}++n,++s}return r.join('')}var b='object'==typeof t&&t&&!t.nodeType&&t,y='object'==typeof e&&e&&!e.nodeType&&e,R='object'==typeof r&&r;(R.global===R||R.window===R||R.self===R)&&(o=R);var S=2147483647,E=36,P=1,C=26,w=38,v=700,O=72,T=128,x='-',k=/^xn--/,j=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:'Overflow: input needs wider integers to process',"not-basic":'Illegal input >= 0x80 (not a basic code point)',"invalid-input":'Invalid input'},L=E-P,N=a,D=u,B;B={version:'1.4.1',ucs2:{decode:c,encode:p},decode:f,encode:m,toASCII:function(e){return l(e,function(e){return j.test(e)?'xn--'+m(e):e})},toUnicode:function(e){return l(e,function(e){return k.test(e)?f(e.slice(4).toLowerCase()):e})}};s=function(){return B}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))})(this)}).call(t,n(92)(e),n(7))},function(e){'use strict';/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function t(e){if(null===e||e===void 0)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(e)}var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String('abc');if(e[5]='de','5'===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t['_'+u(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if('0123456789'!==r.join(''))return!1;var s={};return['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'].forEach(function(e){s[e]=e}),'abcdefghijklmnopqrst'===Object.keys(Object.assign({},s)).join('')}catch(e){return!1}}()?Object.assign:function(e){for(var o=t(e),a=1,d,l;a<arguments.length;a++){for(var c in d=Object(arguments[a]),d)r.call(d,c)&&(o[c]=d[c]);if(n){l=n(d);for(var u=0;u<l.length;u++)s.call(d,l[u])&&(o[l[u]]=d[l[u]])}}return o}},function(e){'use strict';e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){'use strict';function r(e,t){return e.msg=O[t],t}function o(e){return(e<<1)-(4<e?9:0)}function a(e){for(var t=e.length;0<=--t;)e[t]=0}function i(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out);0===n||(P.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function d(e,t){C._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,i(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function u(e,t,n,r){var s=e.avail_in;return(s>r&&(s=r),0===s)?0:(e.avail_in-=s,P.arraySet(t,e.input,e.next_in,s,n),1===e.state.wrap?e.adler=k(e.adler,t,s,n):2===e.state.wrap&&(e.adler=v(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)}function p(e,t){var n=e.max_chain_length,r=e.strstart,s=e.prev_length,o=e.nice_match,a=e.strstart>e.w_size-$?e.strstart-(e.w_size-$):0,i=e.window,d=e.w_mask,l=e.prev,c=e.strstart+Q,u=i[r+s-1],p=i[r+s],h,_;e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(h=t,i[h+s]!==p||i[h+s-1]!==u||i[h]!==i[r]||i[++h]!==i[r+1])continue;r+=2,h++;do;while(i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&i[++r]===i[++h]&&r<c);if(_=Q-(c-r),r=c-Q,_>s){if(e.match_start=t,s=_,_>=o)break;u=i[r+s-1],p=i[r+s]}}while((t=l[t&d])>a&&0!=--n);return s<=e.lookahead?s:e.lookahead}function h(e){var t=e.w_size,r,s,n,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$)){P.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,s=e.hash_size,r=s;do n=e.head[--r],e.head[r]=n>=t?n-t:0;while(--s);s=t,r=s;do n=e.prev[--r],e.prev[r]=n>=t?n-t:0;while(--s);o+=t}if(0===e.strm.avail_in)break;if(s=u(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=s,e.lookahead+e.insert>=G)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+G-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<G)););}while(e.lookahead<$&&0!==e.strm.avail_in)}function s(e,t){for(var n,r;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-$&&(e.match_length=p(e,n)),!(e.match_length>=G))r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(r=C._tr_tally(e,e.strstart-e.match_start,e.match_length-G),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=G){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(r&&(d(e,!1),0===e.strm.avail_out))return de}return e.insert=e.strstart<G-1?e.strstart:G-1,t===A?(d(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?de:le}function _(e,t){for(var n,r,s;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===T)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=G-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-$&&(e.match_length=p(e,n),5>=e.match_length&&(e.strategy===M||e.match_length===G&&4096<e.strstart-e.match_start)&&(e.match_length=G-1)),e.prev_length>=G&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-G,r=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-G),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=G-1,e.strstart++,r&&(d(e,!1),0===e.strm.avail_out))return de}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(r=C._tr_tally(e,0,e.window[e.strstart-1]),r&&d(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return de}return e.match_available&&(r=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<G-1?e.strstart:G-1,t===A?(d(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?de:le}function g(e,t){for(var n=e.window,r,s,o,a;;){if(e.lookahead<=Q){if(h(e),e.lookahead<=Q&&t===T)return de;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=G&&0<e.strstart&&(o=e.strstart-1,s=n[o],s===n[++o]&&s===n[++o]&&s===n[++o])){a=e.strstart+Q;do;while(s===n[++o]&&s===n[++o]&&s===n[++o]&&s===n[++o]&&s===n[++o]&&s===n[++o]&&s===n[++o]&&s===n[++o]&&o<a);e.match_length=Q-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=G?(r=C._tr_tally(e,1,e.match_length-G),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(d(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(d(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?de:le}function f(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===T)return de;break}if(e.match_length=0,n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(d(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(d(e,!0),0===e.strm.avail_out?ce:ue):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?de:le}function m(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}function b(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=he[e.level].max_lazy,e.good_match=he[e.level].good_length,e.nice_match=he[e.level].nice_length,e.max_chain_length=he[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=G-1,e.match_available=0,e.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new P.Buf16(2*X),this.dyn_dtree=new P.Buf16(2*(2*J+1)),this.bl_tree=new P.Buf16(2*(2*K+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new P.Buf16(V+1),this.heap=new P.Buf16(2*Y+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new P.Buf16(2*Y+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=z,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?te:ae,e.adler=2===t.wrap?0:1,t.last_flush=T,C._tr_init(t),L):r(e,D)}function S(e){var t=R(e);return t===L&&b(e.state),t}function E(e,t,n,o,a,i){if(!e)return D;var d=1;if(t===q&&(t=6),0>o?(d=0,o=-o):15<o&&(d=2,o-=16),1>a||a>Z||n!==H||8>o||15<o||0>t||9<t||0>i||i>F)return r(e,D);8===o&&(o=9);var l=new y;return e.state=l,l.strm=e,l.wrap=d,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+G-1)/G),l.window=new P.Buf8(2*l.w_size),l.head=new P.Buf16(l.hash_size),l.prev=new P.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new P.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=i,l.method=n,S(e)}function w(e,t){var n,d,s,u;if(!e||!e.state||t>I||0>t)return e?r(e,D):D;if(d=e.state,!e.output||!e.input&&0!==e.avail_in||d.status===ie&&t!==A)return r(e,0===e.avail_out?B:D);if(d.strm=e,n=d.last_flush,d.last_flush=t,d.status===te)if(2===d.wrap)e.adler=0,l(d,31),l(d,139),l(d,8),d.gzhead?(l(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),l(d,255&d.gzhead.time),l(d,255&d.gzhead.time>>8),l(d,255&d.gzhead.time>>16),l(d,255&d.gzhead.time>>24),l(d,9===d.level?2:d.strategy>=W||2>d.level?4:0),l(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(l(d,255&d.gzhead.extra.length),l(d,255&d.gzhead.extra.length>>8)),d.gzhead.hcrc&&(e.adler=v(e.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=ne):(l(d,0),l(d,0),l(d,0),l(d,0),l(d,0),l(d,9===d.level?2:d.strategy>=W||2>d.level?4:0),l(d,pe),d.status=ae);else{var p=H+(d.w_bits-8<<4)<<8,h=-1;h=d.strategy>=W||2>d.level?0:6>d.level?1:6===d.level?2:3,p|=h<<6,0!==d.strstart&&(p|=ee),p+=31-p%31,d.status=ae,c(d,p),0!==d.strstart&&(c(d,e.adler>>>16),c(d,65535&e.adler)),e.adler=1}if(d.status===ne)if(d.gzhead.extra){for(s=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),i(e),s=d.pending,d.pending===d.pending_buf_size));)l(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=re)}else d.status=re;if(d.status===re)if(d.gzhead.name){s=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),i(e),s=d.pending,d.pending===d.pending_buf_size)){u=1;break}u=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,l(d,u)}while(0!==u);d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),0===u&&(d.gzindex=0,d.status=se)}else d.status=se;if(d.status===se)if(d.gzhead.comment){s=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),i(e),s=d.pending,d.pending===d.pending_buf_size)){u=1;break}u=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,l(d,u)}while(0!==u);d.gzhead.hcrc&&d.pending>s&&(e.adler=v(e.adler,d.pending_buf,d.pending-s,s)),0===u&&(d.status=oe)}else d.status=oe;if(d.status===oe&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&i(e),d.pending+2<=d.pending_buf_size&&(l(d,255&e.adler),l(d,255&e.adler>>8),e.adler=0,d.status=ae)):d.status=ae),0!==d.pending){if(i(e),0===e.avail_out)return d.last_flush=-1,L;}else if(0===e.avail_in&&o(t)<=o(n)&&t!==A)return r(e,B);if(d.status===ie&&0!==e.avail_in)return r(e,B);if(0!==e.avail_in||0!==d.lookahead||t!==T&&d.status!==ie){var _=d.strategy===W?f(d,t):d.strategy===U?g(d,t):he[d.level].func(d,t);if((_===ce||_===ue)&&(d.status=ie),_===de||_===ce)return 0===e.avail_out&&(d.last_flush=-1),L;if(_===le&&(t===x?C._tr_align(d):t!==I&&(C._tr_stored_block(d,0,0,!1),t===j&&(a(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=0))),i(e),0===e.avail_out))return d.last_flush=-1,L}return t===A?0>=d.wrap?N:(2===d.wrap?(l(d,255&e.adler),l(d,255&e.adler>>8),l(d,255&e.adler>>16),l(d,255&e.adler>>24),l(d,255&e.total_in),l(d,255&e.total_in>>8),l(d,255&e.total_in>>16),l(d,255&e.total_in>>24)):(c(d,e.adler>>>16),c(d,65535&e.adler)),i(e),0<d.wrap&&(d.wrap=-d.wrap),0===d.pending?N:L):L}var P=n(18),C=n(74),k=n(27),v=n(28),O=n(73),T=0,x=1,j=3,A=4,I=5,L=0,N=1,D=-2,B=-5,q=-1,M=1,W=2,U=3,F=4,z=2,H=8,Z=9,Y=256+1+29,J=30,K=19,X=2*Y+1,V=15,G=3,Q=258,$=Q+G+1,ee=32,te=42,ne=69,re=73,se=91,oe=103,ae=113,ie=666,de=1,le=2,ce=3,ue=4,pe=3,he;he=[new m(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(1>=e.lookahead){if(h(e),0===e.lookahead&&t===T)return de;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,d(e,!1),0===e.strm.avail_out))return de;if(e.strstart-e.block_start>=e.w_size-$&&(d(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===A?(d(e,!0),0===e.strm.avail_out?ce:ue):e.strstart>e.block_start&&(d(e,!1),0===e.strm.avail_out)?de:de}),new m(4,4,8,4,s),new m(4,5,16,8,s),new m(4,6,32,32,s),new m(4,4,16,16,_),new m(8,16,32,32,_),new m(8,16,128,128,_),new m(8,32,128,256,_),new m(32,128,258,1024,_),new m(32,258,258,4096,_)],t.deflateInit=function(e,t){return E(e,t,H,15,8,0)},t.deflateInit2=E,t.deflateReset=S,t.deflateResetKeep=R,t.deflateSetHeader=function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,L):D:D},t.deflate=w,t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status,t!==te&&t!==ne&&t!==re&&t!==se&&t!==oe&&t!==ae&&t!==ie)?r(e,D):(e.state=null,t===ae?r(e,-3):L):D},t.deflateSetDictionary=function(e,t){var r=t.length,o,s,i,n,d,l,c,u;if(!e||!e.state)return D;if(o=e.state,n=o.wrap,2===n||1===n&&o.status!==te||o.lookahead)return D;for(1===n&&(e.adler=k(e.adler,t,r,0)),o.wrap=0,r>=o.w_size&&(0===n&&(a(o.head),o.strstart=0,o.block_start=0,o.insert=0),u=new P.Buf8(o.w_size),P.arraySet(u,t,r-o.w_size,o.w_size,0),t=u,r=o.w_size),d=e.avail_in,l=e.next_in,c=e.input,e.avail_in=r,e.next_in=0,e.input=t,h(o);o.lookahead>=G;){s=o.strstart,i=o.lookahead-(G-1);do o.ins_h=(o.ins_h<<o.hash_shift^o.window[s+G-1])&o.hash_mask,o.prev[s&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=s,s++;while(--i);o.strstart=s,o.lookahead=G-1,h(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=G-1,o.match_available=0,e.next_in=l,e.input=c,e.avail_in=d,o.wrap=n,L},t.deflateInfo='pako deflate (from Nodeca project)'},function(e){'use strict';var t=30;e.exports=function(e,n){var r,s,o,a,i,d,l,c,u,p,h,_,g,f,m,b,y,R,S,E,w,P,C,k,v;r=e.state,s=e.next_in,k=e.input,o=s+(e.avail_in-5),a=e.next_out,v=e.output,i=a-(n-e.avail_out),d=a+(e.avail_out-257),l=r.dmax,c=r.wsize,u=r.whave,p=r.wnext,h=r.window,_=r.hold,g=r.bits,f=r.lencode,m=r.distcode,b=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;top:do{15>g&&(_+=k[s++]<<g,g+=8,_+=k[s++]<<g,g+=8),R=f[_&b];dolen:for(;;){if(S=R>>>24,_>>>=S,g-=S,S=255&R>>>16,0===S)v[a++]=65535&R;else if(16&S){E=65535&R,S&=15,S&&(g<S&&(_+=k[s++]<<g,g+=8),E+=_&(1<<S)-1,_>>>=S,g-=S),15>g&&(_+=k[s++]<<g,g+=8,_+=k[s++]<<g,g+=8),R=m[_&y];dodist:for(;;){if(S=R>>>24,_>>>=S,g-=S,S=255&R>>>16,16&S){if(w=65535&R,S&=15,g<S&&(_+=k[s++]<<g,g+=8,g<S&&(_+=k[s++]<<g,g+=8)),w+=_&(1<<S)-1,w>l){e.msg='invalid distance too far back',r.mode=t;break top}if(_>>>=S,g-=S,S=a-i,w>S){if(S=w-S,S>u&&r.sane){e.msg='invalid distance too far back',r.mode=t;break top}if(P=0,C=h,0===p){if(P+=c-S,S<E){E-=S;do v[a++]=h[P++];while(--S);P=a-w,C=v}}else if(p<S){if(P+=c+p-S,S-=p,S<E){E-=S;do v[a++]=h[P++];while(--S);if(P=0,p<E){S=p,E-=S;do v[a++]=h[P++];while(--S);P=a-w,C=v}}}else if(P+=p-S,S<E){E-=S;do v[a++]=h[P++];while(--S);P=a-w,C=v}for(;2<E;)v[a++]=C[P++],v[a++]=C[P++],v[a++]=C[P++],E-=3;E&&(v[a++]=C[P++],1<E&&(v[a++]=C[P++]))}else{P=a-w;do v[a++]=v[P++],v[a++]=v[P++],v[a++]=v[P++],E-=3;while(2<E);E&&(v[a++]=v[P++],1<E&&(v[a++]=v[P++]))}}else if(0==(64&S)){R=m[(65535&R)+(_&(1<<S)-1)];continue dodist}else{e.msg='invalid distance code',r.mode=t;break top}break}}else if(0==(64&S)){R=f[(65535&R)+(_&(1<<S)-1)];continue dolen}else if(32&S){r.mode=12;break top}else{e.msg='invalid literal/length code',r.mode=t;break top}break}}while(s<o&&a<d);return E=g>>3,s-=E,g-=E<<3,_&=(1<<g)-1,e.next_in=s,e.next_out=a,e.avail_in=s<o?5+(o-s):5-(s-o),e.avail_out=a<d?257+(d-a):257-(a-d),r.hold=_,void(r.bits=g)}},function(e,t,n){'use strict';function r(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg='',t.wrap&&(e.adler=1&t.wrap),t.mode=k,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(re),t.distcode=t.distdyn=new p.Buf32(se),t.sane=1,t.back=-1,S):E}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):E}function i(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?E:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e)):E}function d(e,t){var n,r;return e?(r=new s,e.state=r,r.window=null,n=i(e,t),n!==S&&(e.state=null),n):E}function l(e){if(oe){var t;for(ae=new p.Buf32(512),ie=new p.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(f(m,e.lens,0,288,ae,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;f(b,e.lens,0,32,ie,0,e.work,{bits:5}),oe=!1}e.lencode=ae,e.lenbits=9,e.distcode=ie,e.distbits=5}function c(e,t,n,r){var s=e.state,o;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new p.Buf8(s.wsize)),r>=s.wsize?(p.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>r&&(o=r),p.arraySet(s.window,t,n-r,o,s.wnext),r-=o,r?(p.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}var p=n(18),h=n(27),_=n(28),g=n(70),f=n(72),m=1,b=2,y=4,R=6,S=0,E=-2,w=-3,P=-4,C=8,k=1,v=2,O=3,T=4,x=5,j=6,A=7,I=8,L=9,N=10,D=11,B=12,q=13,M=14,W=15,U=16,F=17,z=18,H=19,Z=20,Y=21,J=22,K=23,X=24,V=25,G=26,Q=27,$=28,ee=29,te=30,ne=31,re=852,se=592,oe=!0,ae,ie;t.inflateReset=a,t.inflateReset2=i,t.inflateResetKeep=o,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var s=0,o=new p.Buf8(4),a=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i,d,re,se,oe,ae,ie,de,le,ce,ue,pe,he,_e,ge,fe,me,be,ye,Re,Se,Ee,we,Pe;if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return E;i=e.state,i.mode===B&&(i.mode=q),oe=e.next_out,re=e.output,ie=e.avail_out,se=e.next_in,d=e.input,ae=e.avail_in,de=i.hold,le=i.bits,ce=ae,ue=ie,Ee=S;inf_leave:for(;;)switch(i.mode){case k:if(0===i.wrap){i.mode=q;break}for(;16>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(2&i.wrap&&35615===de){i.check=0,o[0]=255&de,o[1]=255&de>>>8,i.check=_(i.check,o,2,0),de=0,le=0,i.mode=v;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&de)<<8)+(de>>8))%31){e.msg='incorrect header check',i.mode=te;break}if((15&de)!==C){e.msg='unknown compression method',i.mode=te;break}if(de>>>=4,le-=4,Se=(15&de)+8,0===i.wbits)i.wbits=Se;else if(Se>i.wbits){e.msg='invalid window size',i.mode=te;break}i.dmax=1<<Se,e.adler=i.check=1,i.mode=512&de?N:B,de=0,le=0;break;case v:for(;16>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(i.flags=de,(255&i.flags)!==C){e.msg='unknown compression method',i.mode=te;break}if(57344&i.flags){e.msg='unknown header flags set',i.mode=te;break}i.head&&(i.head.text=1&de>>8),512&i.flags&&(o[0]=255&de,o[1]=255&de>>>8,i.check=_(i.check,o,2,0)),de=0,le=0,i.mode=O;case O:for(;32>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.head&&(i.head.time=de),512&i.flags&&(o[0]=255&de,o[1]=255&de>>>8,o[2]=255&de>>>16,o[3]=255&de>>>24,i.check=_(i.check,o,4,0)),de=0,le=0,i.mode=T;case T:for(;16>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.head&&(i.head.xflags=255&de,i.head.os=de>>8),512&i.flags&&(o[0]=255&de,o[1]=255&de>>>8,i.check=_(i.check,o,2,0)),de=0,le=0,i.mode=x;case x:if(1024&i.flags){for(;16>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.length=de,i.head&&(i.head.extra_len=de),512&i.flags&&(o[0]=255&de,o[1]=255&de>>>8,i.check=_(i.check,o,2,0)),de=0,le=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(pe=i.length,pe>ae&&(pe=ae),pe&&(i.head&&(Se=i.head.extra_len-i.length,!i.head.extra&&(i.head.extra=Array(i.head.extra_len)),p.arraySet(i.head.extra,d,se,pe,Se)),512&i.flags&&(i.check=_(i.check,d,pe,se)),ae-=pe,se+=pe,i.length-=pe),i.length))break inf_leave;i.length=0,i.mode=A;case A:if(2048&i.flags){if(0===ae)break inf_leave;pe=0;do Se=d[se+pe++],i.head&&Se&&65536>i.length&&(i.head.name+=u(Se));while(Se&&pe<ae);if(512&i.flags&&(i.check=_(i.check,d,pe,se)),ae-=pe,se+=pe,Se)break inf_leave}else i.head&&(i.head.name=null);i.length=0,i.mode=I;case I:if(4096&i.flags){if(0===ae)break inf_leave;pe=0;do Se=d[se+pe++],i.head&&Se&&65536>i.length&&(i.head.comment+=u(Se));while(Se&&pe<ae);if(512&i.flags&&(i.check=_(i.check,d,pe,se)),ae-=pe,se+=pe,Se)break inf_leave}else i.head&&(i.head.comment=null);i.mode=L;case L:if(512&i.flags){for(;16>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(de!==(65535&i.check)){e.msg='header crc mismatch',i.mode=te;break}de=0,le=0}i.head&&(i.head.hcrc=1&i.flags>>9,i.head.done=!0),e.adler=i.check=0,i.mode=B;break;case N:for(;32>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}e.adler=i.check=r(de),de=0,le=0,i.mode=D;case D:if(0===i.havedict)return e.next_out=oe,e.avail_out=ie,e.next_in=se,e.avail_in=ae,i.hold=de,i.bits=le,2;e.adler=i.check=1,i.mode=B;case B:if(t===5||t===R)break inf_leave;case q:if(i.last){de>>>=7&le,le-=7&le,i.mode=Q;break}for(;3>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}switch(i.last=1&de,de>>>=1,le-=1,3&de){case 0:i.mode=M;break;case 1:if(l(i),i.mode=Z,t===R){de>>>=2,le-=2;break inf_leave}break;case 2:i.mode=F;break;case 3:e.msg='invalid block type',i.mode=te;}de>>>=2,le-=2;break;case M:for(de>>>=7&le,le-=7&le;32>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if((65535&de)!=(65535^de>>>16)){e.msg='invalid stored block lengths',i.mode=te;break}if(i.length=65535&de,de=0,le=0,i.mode=W,t===R)break inf_leave;case W:i.mode=U;case U:if(pe=i.length,pe){if(pe>ae&&(pe=ae),pe>ie&&(pe=ie),0===pe)break inf_leave;p.arraySet(re,d,se,pe,oe),ae-=pe,se+=pe,ie-=pe,oe+=pe,i.length-=pe;break}i.mode=B;break;case F:for(;14>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(i.nlen=(31&de)+257,de>>>=5,le-=5,i.ndist=(31&de)+1,de>>>=5,le-=5,i.ncode=(15&de)+4,de>>>=4,le-=4,286<i.nlen||30<i.ndist){e.msg='too many length or distance symbols',i.mode=te;break}i.have=0,i.mode=z;case z:for(;i.have<i.ncode;){for(;3>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.lens[a[i.have++]]=7&de,de>>>=3,le-=3}for(;19>i.have;)i.lens[a[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,we={bits:i.lenbits},Ee=f(0,i.lens,0,19,i.lencode,0,i.work,we),i.lenbits=we.bits,Ee){e.msg='invalid code lengths set',i.mode=te;break}i.have=0,i.mode=H;case H:for(;i.have<i.nlen+i.ndist;){for(;;){if(s=i.lencode[de&(1<<i.lenbits)-1],ge=s>>>24,fe=255&s>>>16,me=65535&s,ge<=le)break;if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(16>me)de>>>=ge,le-=ge,i.lens[i.have++]=me;else{if(16===me){for(Pe=ge+2;le<Pe;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(de>>>=ge,le-=ge,0===i.have){e.msg='invalid bit length repeat',i.mode=te;break}Se=i.lens[i.have-1],pe=3+(3&de),de>>>=2,le-=2}else if(17===me){for(Pe=ge+3;le<Pe;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}de>>>=ge,le-=ge,Se=0,pe=3+(7&de),de>>>=3,le-=3}else{for(Pe=ge+7;le<Pe;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}de>>>=ge,le-=ge,Se=0,pe=11+(127&de),de>>>=7,le-=7}if(i.have+pe>i.nlen+i.ndist){e.msg='invalid bit length repeat',i.mode=te;break}for(;pe--;)i.lens[i.have++]=Se}}if(i.mode===te)break;if(0===i.lens[256]){e.msg='invalid code -- missing end-of-block',i.mode=te;break}if(i.lenbits=9,we={bits:i.lenbits},Ee=f(m,i.lens,0,i.nlen,i.lencode,0,i.work,we),i.lenbits=we.bits,Ee){e.msg='invalid literal/lengths set',i.mode=te;break}if(i.distbits=6,i.distcode=i.distdyn,we={bits:i.distbits},Ee=f(b,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,we),i.distbits=we.bits,Ee){e.msg='invalid distances set',i.mode=te;break}if(i.mode=Z,t===R)break inf_leave;case Z:i.mode=Y;case Y:if(6<=ae&&258<=ie){e.next_out=oe,e.avail_out=ie,e.next_in=se,e.avail_in=ae,i.hold=de,i.bits=le,g(e,ue),oe=e.next_out,re=e.output,ie=e.avail_out,se=e.next_in,d=e.input,ae=e.avail_in,de=i.hold,le=i.bits,i.mode===B&&(i.back=-1);break}for(i.back=0;;){if(s=i.lencode[de&(1<<i.lenbits)-1],ge=s>>>24,fe=255&s>>>16,me=65535&s,ge<=le)break;if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(fe&&0==(240&fe)){for(be=ge,ye=fe,Re=me;;){if(s=i.lencode[Re+((de&(1<<be+ye)-1)>>be)],ge=s>>>24,fe=255&s>>>16,me=65535&s,be+ge<=le)break;if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}de>>>=be,le-=be,i.back+=be}if(de>>>=ge,le-=ge,i.back+=ge,i.length=me,0===fe){i.mode=G;break}if(32&fe){i.back=-1,i.mode=B;break}if(64&fe){e.msg='invalid literal/length code',i.mode=te;break}i.extra=15&fe,i.mode=J;case J:if(i.extra){for(Pe=i.extra;le<Pe;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.length+=de&(1<<i.extra)-1,de>>>=i.extra,le-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=K;case K:for(;;){if(s=i.distcode[de&(1<<i.distbits)-1],ge=s>>>24,fe=255&s>>>16,me=65535&s,ge<=le)break;if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(0==(240&fe)){for(be=ge,ye=fe,Re=me;;){if(s=i.distcode[Re+((de&(1<<be+ye)-1)>>be)],ge=s>>>24,fe=255&s>>>16,me=65535&s,be+ge<=le)break;if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}de>>>=be,le-=be,i.back+=be}if(de>>>=ge,le-=ge,i.back+=ge,64&fe){e.msg='invalid distance code',i.mode=te;break}i.offset=me,i.extra=15&fe,i.mode=X;case X:if(i.extra){for(Pe=i.extra;le<Pe;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}i.offset+=de&(1<<i.extra)-1,de>>>=i.extra,le-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg='invalid distance too far back',i.mode=te;break}i.mode=V;case V:if(0===ie)break inf_leave;if(pe=ue-ie,i.offset>pe){if(pe=i.offset-pe,pe>i.whave&&i.sane){e.msg='invalid distance too far back',i.mode=te;break}pe>i.wnext?(pe-=i.wnext,he=i.wsize-pe):he=i.wnext-pe,pe>i.length&&(pe=i.length),_e=i.window}else _e=re,he=oe-i.offset,pe=i.length;pe>ie&&(pe=ie),ie-=pe,i.length-=pe;do re[oe++]=_e[he++];while(--pe);0===i.length&&(i.mode=Y);break;case G:if(0===ie)break inf_leave;re[oe++]=i.length,ie--,i.mode=Y;break;case Q:if(i.wrap){for(;32>le;){if(0===ae)break inf_leave;ae--,de|=d[se++]<<le,le+=8}if(ue-=ie,e.total_out+=ue,i.total+=ue,ue&&(e.adler=i.check=i.flags?_(i.check,re,ue,oe-ue):h(i.check,re,ue,oe-ue)),ue=ie,(i.flags?de:r(de))!==i.check){e.msg='incorrect data check',i.mode=te;break}de=0,le=0}i.mode=$;case $:if(i.wrap&&i.flags){for(;32>le;){if(0===ae)break inf_leave;ae--,de+=d[se++]<<le,le+=8}if(de!==(4294967295&i.total)){e.msg='incorrect length check',i.mode=te;break}de=0,le=0}i.mode=ee;case ee:Ee=1;break inf_leave;case te:Ee=w;break inf_leave;case ne:return P;case 32:default:return E;}return(e.next_out=oe,e.avail_out=ie,e.next_in=se,e.avail_in=ae,i.hold=de,i.bits=le,(i.wsize||ue!==e.avail_out&&i.mode<te&&(i.mode<Q||t!==y))&&c(e,e.output,e.next_out,ue-e.avail_out))?(i.mode=ne,P):(ce-=e.avail_in,ue-=e.avail_out,e.total_in+=ce,e.total_out+=ue,i.total+=ue,i.wrap&&ue&&(e.adler=i.check=i.flags?_(i.check,re,ue,e.next_out-ue):h(i.check,re,ue,e.next_out-ue)),e.data_type=i.bits+(i.last?64:0)+(i.mode===B?128:0)+(i.mode===Z||i.mode===W?256:0),(0===ce&&0===ue||t===y)&&Ee===S&&(Ee=-5),Ee)},t.inflateEnd=function(e){if(!e||!e.state)return E;var t=e.state;return t.window&&(t.window=null),e.state=null,S},t.inflateGetHeader=function(e,t){var n;return e&&e.state?(n=e.state,0==(2&n.wrap))?E:(n.head=t,t.done=!1,S):E},t.inflateSetDictionary=function(e,t){var n=t.length,r,s,o;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==D)?E:r.mode===D&&(s=1,s=h(s,t,n,0),s!==r.check)?w:(o=c(e,t,n,n),o)?(r.mode=ne,P):(r.havedict=1,S):E},t.inflateInfo='pako inflate (from Nodeca project)'},function(e,t,n){'use strict';var r=n(18),s=15,o=852,a=592,i=0,d=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,_,g,f,m,b){var y=b.bits,R=0,S=0,E=0,w=0,P=0,C=0,k=0,v=0,O=0,T=0,x=null,j=0,A=new r.Buf16(s+1),I=new r.Buf16(s+1),L=null,N=0,D,B,q,M,W,U,F,z,H;for(R=0;R<=s;R++)A[R]=0;for(S=0;S<_;S++)A[t[n+S]]++;for(P=y,w=s;1<=w&&0===A[w];w--);if(P>w&&(P=w),0==w)return g[f++]=20971520,g[f++]=20971520,b.bits=1,0;for(E=1;E<w&&0===A[E];E++);for(P<E&&(P=E),v=1,R=1;R<=s;R++)if(v<<=1,v-=A[R],0>v)return-1;if(0<v&&(e===i||1!=w))return-1;for(I[1]=0,R=1;R<s;R++)I[R+1]=I[R]+A[R];for(S=0;S<_;S++)0!==t[n+S]&&(m[I[t[n+S]]++]=S);if(e===i?(x=L=m,U=19):e===d?(x=c,j-=257,L=u,N-=257,U=256):(x=p,L=h,U=-1),T=0,S=0,R=E,W=f,C=P,k=0,q=-1,O=1<<P,M=O-1,e===d&&O>o||e===l&&O>a)return 1;for(;;){F=R-k,m[S]<U?(z=0,H=m[S]):m[S]>U?(z=L[N+m[S]],H=x[j+m[S]]):(z=96,H=0),D=1<<R-k,B=1<<C,E=B;do B-=D,g[W+(T>>k)+B]=0|(F<<24|z<<16|H);while(0!==B);for(D=1<<R-1;T&D;)D>>=1;if(0===D?T=0:(T&=D-1,T+=D),S++,0==--A[R]){if(R===w)break;R=t[n+m[S]]}if(R>P&&(T&M)!==q){for(0==k&&(k=P),W+=E,C=R-k,v=1<<C;C+k<w&&(v-=A[C+k],!(0>=v));)C++,v<<=1;if(O+=1<<C,e===d&&O>o||e===l&&O>a)return 1;q=T&M,g[q]=0|(P<<24|C<<16|W-f)}}return 0!=T&&(g[W+T]=0|(4194304|R-k<<24)),b.bits=P,0}},function(e){'use strict';e.exports={2:'need dictionary',1:'stream end',0:'',"-1":'file error',"-2":'stream error',"-3":'data error',"-4":'insufficient memory',"-5":'buffer error',"-6":'incompatible version'}},function(e,t,n){'use strict';function r(e){for(var t=e.length;0<=--t;)e[t]=0}function s(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return 256>e?$[e]:$[256+(e>>>7)]}function i(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function d(e,t,n){e.bi_valid>U-n?(e.bi_buf|=65535&t<<e.bi_valid,i(e,e.bi_buf),e.bi_buf=t>>U-e.bi_valid,e.bi_valid+=n-U):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=n)}function l(e,t,n){d(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(0<--t);return n>>>1}function u(e){16===e.bi_valid?(i(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function p(e,t){var r=t.dyn_tree,s=t.max_code,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,l=t.stat_desc.max_length,c=0,u,p,n,h,_,g;for(h=0;h<=W;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<M;u++)(p=e.heap[u],h=r[2*r[2*p+1]+1]+1,h>l&&(h=l,c++),r[2*p+1]=h,!(p>s))&&(e.bl_count[h]++,_=0,p>=d&&(_=i[p-d]),g=r[2*p],e.opt_len+=g*(h+_),a&&(e.static_len+=g*(o[2*p+1]+_)));if(0!=c){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,c-=2}while(0<c);for(h=l;0!==h;h--)for(p=e.bl_count[h];0!==p;)(n=e.heap[--u],!(n>s))&&(r[2*n+1]!==h&&(e.opt_len+=(h-r[2*n+1])*r[2*n],r[2*n+1]=h),p--)}}function h(e,t,r){var s=Array(W+1),o=0,a,i;for(a=1;a<=W;a++)s[a]=o=o+r[a-1]<<1;for(i=0;i<=t;i++){var n=e[2*i+1];0!==n&&(e[2*i]=c(s[n]++,n))}}function _(){var e=Array(W+1),t,n,r,o,a;for(r=0,o=0;o<L-1;o++)for(te[o]=r,t=0;t<1<<J[o];t++)ee[r++]=o;for(ee[r-1]=o,a=0,o=0;16>o;o++)for(ne[o]=a,t=0;t<1<<K[o];t++)$[a++]=o;for(a>>=7;o<B;o++)for(ne[o]=a<<7,t=0;t<1<<K[o]-7;t++)$[256+a++]=o;for(n=0;n<=W;n++)e[n]=0;for(t=0;143>=t;)G[2*t+1]=8,t++,e[8]++;for(;255>=t;)G[2*t+1]=9,t++,e[9]++;for(;279>=t;)G[2*t+1]=7,t++,e[7]++;for(;287>=t;)G[2*t+1]=8,t++,e[8]++;for(h(G,D+1,e),t=0;t<B;t++)Q[2*t+1]=5,Q[2*t]=c(t,5);se=new s(G,J,N+1,D,W),oe=new s(Q,K,0,B,W),ae=new s([],X,0,q,F)}function g(e){var t;for(t=0;t<D;t++)e.dyn_ltree[2*t]=0;for(t=0;t<B;t++)e.dyn_dtree[2*t]=0;for(t=0;t<q;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){8<e.bi_valid?i(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,n,r){f(e),r&&(i(e,n),i(e,~n)),T.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function b(e,t,n,r){var s=2*t,o=2*n;return e[s]<e[o]||e[s]===e[o]&&r[t]<=r[n]}function y(e,t,n){for(var r=e.heap[n],s=n<<1;s<=e.heap_len&&(s<e.heap_len&&b(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!b(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r}function R(e,t,n){var r=0,s,o,i,c;if(0!==e.last_lit)do s=e.pending_buf[e.d_buf+2*r]<<8|e.pending_buf[e.d_buf+2*r+1],o=e.pending_buf[e.l_buf+r],r++,0===s?l(e,o,t):(i=ee[o],l(e,i+N+1,t),c=J[i],0!==c&&(o-=te[i],d(e,o,c)),s--,i=a(s),l(e,i,n),c=K[i],0!==c&&(s-=ne[i],d(e,s,c)));while(r<e.last_lit);l(e,z,t)}function S(e,t){var r=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems,i=-1,d,n,l;for(e.heap_len=0,e.heap_max=M,d=0;d<a;d++)0===r[2*d]?r[2*d+1]=0:(e.heap[++e.heap_len]=i=d,e.depth[d]=0);for(;2>e.heap_len;)l=e.heap[++e.heap_len]=2>i?++i:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,o&&(e.static_len-=s[2*l+1]);for(t.max_code=i,d=e.heap_len>>1;1<=d;d--)y(e,r,d);l=a;do d=e.heap[1],e.heap[1]=e.heap[e.heap_len--],y(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=d,e.heap[--e.heap_max]=n,r[2*l]=r[2*d]+r[2*n],e.depth[l]=(e.depth[d]>=e.depth[n]?e.depth[d]:e.depth[n])+1,r[2*d+1]=r[2*n+1]=l,e.heap[1]=l++,y(e,r,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],p(e,t),h(r,i,e.bl_count)}function E(e,t,r){var s=-1,o=t[1],a=0,i=7,d=4,l,n;for(0===o&&(i=138,d=3),t[2*(r+1)+1]=65535,l=0;l<=r;l++){if(n=o,o=t[2*(l+1)+1],++a<i&&n===o)continue;else a<d?e.bl_tree[2*n]+=a:0===n?10>=a?e.bl_tree[2*Z]++:e.bl_tree[2*Y]++:(n!==s&&e.bl_tree[2*n]++,e.bl_tree[2*H]++);a=0,s=n,0===o?(i=138,d=3):n===o?(i=6,d=3):(i=7,d=4)}}function w(e,t,r){var s=-1,o=t[1],a=0,i=7,c=4,u,n;for(0===o&&(i=138,c=3),u=0;u<=r;u++){if(n=o,o=t[2*(u+1)+1],++a<i&&n===o)continue;else if(a<c)do l(e,n,e.bl_tree);while(0!=--a);else 0===n?10>=a?(l(e,Z,e.bl_tree),d(e,a-3,3)):(l(e,Y,e.bl_tree),d(e,a-11,7)):(n!==s&&(l(e,n,e.bl_tree),a--),l(e,H,e.bl_tree),d(e,a-3,2));a=0,s=n,0===o?(i=138,c=3):n===o?(i=6,c=3):(i=7,c=4)}}function P(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=q-1;3<=t&&0===e.bl_tree[2*V[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function C(e,t,n,r){var s;for(d(e,t-257,5),d(e,n-1,5),d(e,r-4,4),s=0;s<r;s++)d(e,e.bl_tree[2*V[s]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,n-1)}function k(e){var t=4093624447,r;for(r=0;31>=r;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return x;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return j;for(r=32;r<N;r++)if(0!==e.dyn_ltree[2*r])return j;return x}function v(e){re||(_(),re=!0),e.l_desc=new o(e.dyn_ltree,se),e.d_desc=new o(e.dyn_dtree,oe),e.bl_desc=new o(e.bl_tree,ae),e.bi_buf=0,e.bi_valid=0,g(e)}function O(e,t,n,r){d(e,(A<<1)+(r?1:0),3),m(e,t,n,!0)}var T=n(18),x=0,j=1,A=0,I=1,L=29,N=256,D=N+1+L,B=30,q=19,M=2*D+1,W=15,U=16,F=7,z=256,H=16,Z=17,Y=18,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(2*(D+2));r(G);var Q=Array(2*B);r(Q);var $=Array(512);r($);var ee=Array(258-3+1);r(ee);var te=Array(L);r(te);var ne=Array(B);r(ne);var re=!1,se,oe,ae;t._tr_init=v,t._tr_stored_block=O,t._tr_flush_block=function(e,t,n,r){var s=0,o,a;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=k(e)),S(e,e.l_desc),S(e,e.d_desc),s=P(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==t?O(e,t,n,r):e.strategy===4||a===o?(d(e,(I<<1)+(r?1:0),3),R(e,G,Q)):(d(e,(2<<1)+(r?1:0),3),C(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),R(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&f(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ee[n]+N+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){d(e,I<<1,3),l(e,z,G),u(e)}},function(e){'use strict';e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(e){'use strict';function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,s,o){r=r||'&',s=s||'=';var a={};if('string'!=typeof e||0===e.length)return a;var d=/\+/g;e=e.split(r);var l=1e3;o&&'number'==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;0<l&&c>l&&(c=l);for(var u=0;u<c;++u){var i=e[u].replace(d,'%20'),p=i.indexOf(s),h,_,g,f;0<=p?(h=i.substr(0,p),_=i.substr(p+1)):(h=i,_=''),g=decodeURIComponent(h),f=decodeURIComponent(_),t(a,g)?n(a[g])?a[g].push(f):a[g]=[a[g],f]:a[g]=f}return a};var n=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)}},function(e){'use strict';function t(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var n=function(e){switch(typeof e){case'string':return e;case'boolean':return e?'true':'false';case'number':return isFinite(e)?e:'';default:return'';}};e.exports=function(e,o,a,i){return o=o||'&',a=a||'=',null===e&&(e=void 0),'object'==typeof e?t(s(e),function(s){var i=encodeURIComponent(n(s))+a;return r(e[s])?t(e[s],function(e){return i+encodeURIComponent(n(e))}).join(o):i+encodeURIComponent(n(e[s]))}).join(o):i?encodeURIComponent(n(i))+a+encodeURIComponent(n(e)):''};var r=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(e,t){(function(e){'use strict';function n(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return h[p]=r,m(p),p++}function r(e){delete h[e]}function s(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function o(e){if(_)setTimeout(o,0,e);else{var t=h[e];if(t){_=!0;try{s(t)}finally{r(e),_=!1}}}}function a(){m=function(e){t.nextTick(function(){o(e)})}}function i(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=n,t}}function d(){var t='setImmediate$'+Math.random()+'$',n=function(n){n.source===e&&'string'==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener('message',n,!1):e.attachEvent('onmessage',n),m=function(n){e.postMessage(t+n,'*')}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},m=function(t){e.port2.postMessage(t)}}function c(){var e=g.documentElement;m=function(t){var n=g.createElement('script');n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function u(){m=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var p=1,h={},_=!1,g=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e),m;f=f&&f.setTimeout?f:e,'[object process]'==={}.toString.call(e.process)?a():i()?d():e.MessageChannel?l():g&&'onreadystatechange'in g.createElement('script')?c():u(),f.setImmediate=n,f.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,n(7),n(0))},function(e){function t(e){return new Promise(function(t){setTimeout(t,e)})}e.exports=function(e){function n(n){return t(e).then(function(){return n})}return n.then=function(){var n=t(e);return n.then.apply(n,arguments)},n.catch=Promise.resolve().catch,n}},function(e,t,n){function r(){s.call(this)}e.exports=r;var s=n(5).EventEmitter,o=n(9);o(r,s),r.Readable=n(24),r.Writable=n(87),r.Duplex=n(82),r.Transform=n(86),r.PassThrough=n(85),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,'function'==typeof e.destroy&&e.destroy())}function i(e){if(d(),0===s.listenerCount(this,'error'))throw e}function d(){l.removeListener('data',n),e.removeListener('drain',r),l.removeListener('end',o),l.removeListener('close',a),l.removeListener('error',i),e.removeListener('error',i),l.removeListener('end',d),l.removeListener('close',d),e.removeListener('close',d)}var l=this;l.on('data',n),e.on('drain',r),e._isStdio||t&&!1===t.end||(l.on('end',o),l.on('close',a));var c=!1;return l.on('error',i),e.on('error',i),l.on('end',d),l.on('close',d),e.on('close',d),e.emit('pipe',l),e}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,n){e.exports=n(10)},function(e,t,n){'use strict';function r(e){return this instanceof r?void s.call(this,e):new r(e)}e.exports=r;var s=n(30),o=n(16);o.inherits=n(9),o.inherits(r,s),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function s(e,t,n){e.copy(t,n)}var o=n(20).Buffer,a=n(97);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return'';for(var t=this.head,n=''+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)s(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+' '+e})},function(e,t,n){e.exports=n(24).PassThrough},function(e,t,n){e.exports=n(24).Transform},function(e,t,n){e.exports=n(23)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var s='undefined'!=typeof e&&e||'undefined'!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(78),t.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(7))},function(e){'use strict';e.exports={isString:function(e){return'string'==typeof e},isObject:function(e){return'object'==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&'true'===(n+'').toLowerCase()}e.exports=function(e,t){function r(){if(!s){if(n('throwDeprecation'))throw new Error(t);else n('traceDeprecation')?console.trace(t):console.warn(t);s=!0}return e.apply(this,arguments)}if(n('noDeprecation'))return e;var s=!1;return r}}).call(t,n(7))},function(e){e.exports=function(e){return e&&'object'==typeof e&&'function'==typeof e.copy&&'function'==typeof e.fill&&'function'==typeof e.readUInt8}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e){e.exports=n},function(e){e.exports=r},function(e){e.exports=s},function(){},function(){},function(){},function(e,t,n){e.exports=n(36)}])});